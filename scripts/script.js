
module.exports = async ({github, context, core}) => {
    const fs = require('fs');
    const regions = process.env.REGIONS;
    console.log(generate(regions));
    const content = fs.readFileSync('./notices.json');
    //
    // console.log(content.toString());
}

function generate(regions) {
    const template = `/*
* Do not edit this file manually. To prevent misconfiguration, this file
* should only be modified by an automated GitHub workflow, that ensures
* that the regions present in this list correspond to all the regions
* where we have the AWS::CDK::Metadata handler deployed.
*
* See: https://github.com/aws/aws-cdk/issues/27189
*/

export const AWS_CDK_METADATA = new Set([
$REGIONS
]);
`;

    return template.replace('$REGIONS', regions.map(r => `  ${r}`).join('\n'));
}