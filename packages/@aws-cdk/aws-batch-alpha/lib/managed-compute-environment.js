"use strict";
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", { value: true });
exports.FargateComputeEnvironment = exports.ManagedEc2EksComputeEnvironment = exports.ManagedEc2EcsComputeEnvironment = exports.AllocationStrategy = exports.EksMachineImageType = exports.EcsMachineImageType = exports.ManagedComputeEnvironmentBase = void 0;
const jsiiDeprecationWarnings = require("../.warnings.jsii.js");
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
const ec2 = require("aws-cdk-lib/aws-ec2");
const iam = require("aws-cdk-lib/aws-iam");
const core_1 = require("aws-cdk-lib/core");
const aws_batch_1 = require("aws-cdk-lib/aws-batch");
const compute_environment_base_1 = require("./compute-environment-base");
/**
 * Abstract base class for ManagedComputeEnvironments
 * @internal
 */
class ManagedComputeEnvironmentBase extends compute_environment_base_1.ComputeEnvironmentBase {
    constructor(scope, id, props) {
        super(scope, id, props);
        this.tags = new core_1.TagManager(core_1.TagType.MAP, 'AWS::Batch::ComputeEnvironment');
        this.maxvCpus = props.maxvCpus ?? DEFAULT_MAX_VCPUS;
        this.replaceComputeEnvironment = props.replaceComputeEnvironment ?? false;
        this.spot = props.spot;
        this.updateTimeout = props.updateTimeout;
        this.terminateOnUpdate = props.terminateOnUpdate;
        this.updateToLatestImageVersion = props.updateToLatestImageVersion ?? true;
        this.securityGroups = props.securityGroups ?? [
            new ec2.SecurityGroup(this, 'SecurityGroup', {
                vpc: props.vpc,
            }),
        ];
        this.connections = new ec2.Connections({
            securityGroups: this.securityGroups,
        });
    }
}
exports.ManagedComputeEnvironmentBase = ManagedComputeEnvironmentBase;
/**
 * Maps the image to instance types
 */
var EcsMachineImageType;
(function (EcsMachineImageType) {
    /**
     * Tells Batch that this machine image runs on non-GPU instances
     */
    EcsMachineImageType["ECS_AL2"] = "ECS_AL2";
    /**
     * Tells Batch that this machine image runs on GPU instances
     */
    EcsMachineImageType["ECS_AL2_NVIDIA"] = "ECS_AL2_NVIDIA";
})(EcsMachineImageType || (exports.EcsMachineImageType = EcsMachineImageType = {}));
/**
 * Maps the image to instance types
 */
var EksMachineImageType;
(function (EksMachineImageType) {
    /**
     * Tells Batch that this machine image runs on non-GPU instances
     */
    EksMachineImageType["EKS_AL2"] = "EKS_AL2";
    /**
     * Tells Batch that this machine image runs on GPU instances
     */
    EksMachineImageType["EKS_AL2_NVIDIA"] = "EKS_AL2_NVIDIA";
})(EksMachineImageType || (exports.EksMachineImageType = EksMachineImageType = {}));
/**
 * Determines how this compute environment chooses instances to spawn
 *
 * @see https://aws.amazon.com/blogs/compute/optimizing-for-cost-availability-and-throughput-by-selecting-your-aws-batch-allocation-strategy/
 */
var AllocationStrategy;
(function (AllocationStrategy) {
    /**
     * Batch chooses the lowest-cost instance type that fits all the jobs in the queue.
     * If instances of that type are not available, the queue will not choose a new type;
     * instead, it will wait for the instance to become available.
     * This can stall your `Queue`, with your compute environment only using part of its max capacity
     * (or none at all) until the `BEST_FIT` instance becomes available.
     * This allocation strategy keeps costs lower but can limit scaling.
     * `BEST_FIT` isn't supported when updating compute environments
     */
    AllocationStrategy["BEST_FIT"] = "BEST_FIT";
    /**
     * This is the default Allocation Strategy if `spot` is `false` or unspecified.
     * This strategy will examine the Jobs in the queue and choose whichever instance type meets the requirements
     * of the jobs in the queue and with the lowest cost per vCPU, just as `BEST_FIT`.
     * However, if not all of the capacity can be filled with this instance type,
     * it will choose a new next-best instance type to run any jobs that couldn’t fit into the `BEST_FIT` capacity.
     * To make the most use of this allocation strategy,
     * it is recommended to use as many instance classes as is feasible for your workload.
     */
    AllocationStrategy["BEST_FIT_PROGRESSIVE"] = "BEST_FIT_PROGRESSIVE";
    /**
     * If your workflow tolerates interruptions, you should enable `spot` on your `ComputeEnvironment`
     * and use `SPOT_CAPACITY_OPTIMIZED` (this is the default if `spot` is enabled).
     * This will tell Batch to choose the instance types from the ones you’ve specified that have
     * the most spot capacity available to minimize the chance of interruption.
     * To get the most benefit from your spot instances,
     * you should allow Batch to choose from as many different instance types as possible.
     */
    AllocationStrategy["SPOT_CAPACITY_OPTIMIZED"] = "SPOT_CAPACITY_OPTIMIZED";
    /**
     * The price and capacity optimized allocation strategy looks at both price and capacity
     * to select the Spot Instance pools that are the least likely to be interrupted
     * and have the lowest possible price.
     *
     * The Batch team recommends this over `SPOT_CAPACITY_OPTIMIZED` in most instances.
     */
    AllocationStrategy["SPOT_PRICE_CAPACITY_OPTIMIZED"] = "SPOT_PRICE_CAPACITY_OPTIMIZED";
})(AllocationStrategy || (exports.AllocationStrategy = AllocationStrategy = {}));
/**
 * A ManagedComputeEnvironment that uses ECS orchestration on EC2 instances.
 *
 * @resource AWS::Batch::ComputeEnvironment
 */
class ManagedEc2EcsComputeEnvironment extends ManagedComputeEnvironmentBase {
    /**
     * refer to an existing ComputeEnvironment by its arn.
     */
    static fromManagedEc2EcsComputeEnvironmentArn(scope, id, managedEc2EcsComputeEnvironmentArn) {
        const stack = core_1.Stack.of(scope);
        const computeEnvironmentName = stack.splitArn(managedEc2EcsComputeEnvironmentArn, core_1.ArnFormat.SLASH_RESOURCE_NAME).resourceName;
        class Import extends core_1.Resource {
            constructor() {
                super(...arguments);
                this.computeEnvironmentArn = managedEc2EcsComputeEnvironmentArn;
                this.computeEnvironmentName = computeEnvironmentName;
                this.enabled = true;
                this.instanceClasses = [];
                this.instanceTypes = [];
                this.maxvCpus = 1;
                this.connections = {};
                this.securityGroups = [];
                this.tags = new core_1.TagManager(core_1.TagType.MAP, 'AWS::Batch::ComputeEnvironment');
            }
            addInstanceClass(_instanceClass) {
                throw new Error(`cannot add instance class to imported ComputeEnvironment '${id}'`);
            }
            addInstanceType(_instanceType) {
                throw new Error(`cannot add instance type to imported ComputeEnvironment '${id}'`);
            }
        }
        return new Import(scope, id);
    }
    constructor(scope, id, props) {
        super(scope, id, props);
        try {
            jsiiDeprecationWarnings._aws_cdk_aws_batch_alpha_ManagedEc2EcsComputeEnvironmentProps(props);
        }
        catch (error) {
            if (process.env.JSII_DEBUG !== "1" && error.name === "DeprecationError") {
                Error.captureStackTrace(error, ManagedEc2EcsComputeEnvironment);
            }
            throw error;
        }
        this.images = props.images;
        this.allocationStrategy = determineAllocationStrategy(id, props.allocationStrategy, this.spot);
        this.spotBidPercentage = props.spotBidPercentage;
        this.spotFleetRole = props.spotFleetRole ?? (this.spot && this.allocationStrategy === AllocationStrategy.BEST_FIT
            ? createSpotFleetRole(this)
            : undefined);
        this.instanceTypes = props.instanceTypes ?? [];
        this.instanceClasses = props.instanceClasses ?? [];
        const { instanceRole, instanceProfile } = createInstanceRoleAndProfile(this, props.instanceRole);
        this.instanceRole = instanceRole;
        this.instanceProfile = instanceProfile;
        this.launchTemplate = props.launchTemplate;
        this.minvCpus = props.minvCpus ?? DEFAULT_MIN_VCPUS;
        this.placementGroup = props.placementGroup;
        validateVCpus(id, this.minvCpus, this.maxvCpus);
        validateSpotConfig(id, this.spot, this.spotBidPercentage, this.spotFleetRole);
        const { subnetIds } = props.vpc.selectSubnets(props.vpcSubnets);
        const resource = new aws_batch_1.CfnComputeEnvironment(this, 'Resource', {
            ...baseManagedResourceProperties(this, subnetIds),
            computeEnvironmentName: props.computeEnvironmentName,
            computeResources: {
                ...baseManagedResourceProperties(this, subnetIds).computeResources,
                minvCpus: this.minvCpus,
                instanceRole: this.instanceProfile.attrArn,
                instanceTypes: core_1.Lazy.list({
                    produce: () => renderInstances(this.instanceTypes, this.instanceClasses, props.useOptimalInstanceClasses),
                }),
                type: this.spot ? 'SPOT' : 'EC2',
                spotIamFleetRole: this.spotFleetRole?.roleArn,
                allocationStrategy: this.allocationStrategy,
                bidPercentage: this.spotBidPercentage,
                launchTemplate: this.launchTemplate ? {
                    launchTemplateId: this.launchTemplate?.launchTemplateId,
                } : undefined,
                ec2Configuration: this.images?.map((image) => {
                    return {
                        imageIdOverride: image.image?.getImage(this).imageId,
                        imageType: image.imageType ?? EcsMachineImageType.ECS_AL2,
                    };
                }),
                placementGroup: this.placementGroup?.placementGroupName,
                tags: this.tags.renderedTags,
            },
        });
        this.computeEnvironmentName = this.getResourceNameAttribute(resource.ref);
        this.computeEnvironmentArn = this.getResourceArnAttribute(resource.attrComputeEnvironmentArn, {
            service: 'batch',
            resource: 'compute-environment',
            resourceName: this.physicalName,
        });
        this.node.addValidation({ validate: () => validateInstances(this.instanceTypes, this.instanceClasses, props.useOptimalInstanceClasses) });
    }
    addInstanceType(instanceType) {
        this.instanceTypes.push(instanceType);
    }
    addInstanceClass(instanceClass) {
        this.instanceClasses.push(instanceClass);
    }
}
exports.ManagedEc2EcsComputeEnvironment = ManagedEc2EcsComputeEnvironment;
_a = JSII_RTTI_SYMBOL_1;
ManagedEc2EcsComputeEnvironment[_a] = { fqn: "@aws-cdk/aws-batch-alpha.ManagedEc2EcsComputeEnvironment", version: "0.0.0" };
/**
 * A ManagedComputeEnvironment that uses ECS orchestration on EC2 instances.
 *
 * @resource AWS::Batch::ComputeEnvironment
 */
class ManagedEc2EksComputeEnvironment extends ManagedComputeEnvironmentBase {
    constructor(scope, id, props) {
        super(scope, id, props);
        try {
            jsiiDeprecationWarnings._aws_cdk_aws_batch_alpha_ManagedEc2EksComputeEnvironmentProps(props);
        }
        catch (error) {
            if (process.env.JSII_DEBUG !== "1" && error.name === "DeprecationError") {
                Error.captureStackTrace(error, ManagedEc2EksComputeEnvironment);
            }
            throw error;
        }
        this.kubernetesNamespace = props.kubernetesNamespace;
        this.eksCluster = props.eksCluster;
        this.images = props.images;
        this.allocationStrategy = determineAllocationStrategy(id, props.allocationStrategy, this.spot);
        if (this.allocationStrategy === AllocationStrategy.BEST_FIT) {
            throw new Error(`ManagedEc2EksComputeEnvironment '${id}' uses invalid allocation strategy 'AllocationStrategy.BEST_FIT'`);
        }
        this.spotBidPercentage = props.spotBidPercentage;
        this.instanceTypes = props.instanceTypes ?? [];
        this.instanceClasses = props.instanceClasses ?? [];
        const { instanceRole, instanceProfile } = createInstanceRoleAndProfile(this, props.instanceRole);
        this.instanceRole = instanceRole;
        this.instanceProfile = instanceProfile;
        this.launchTemplate = props.launchTemplate;
        this.minvCpus = props.minvCpus ?? DEFAULT_MIN_VCPUS;
        this.placementGroup = props.placementGroup;
        validateVCpus(id, this.minvCpus, this.maxvCpus);
        validateSpotConfig(id, this.spot, this.spotBidPercentage);
        const { subnetIds } = props.vpc.selectSubnets(props.vpcSubnets);
        const resource = new aws_batch_1.CfnComputeEnvironment(this, 'Resource', {
            ...baseManagedResourceProperties(this, subnetIds),
            computeEnvironmentName: props.computeEnvironmentName,
            eksConfiguration: {
                eksClusterArn: this.eksCluster.clusterArn,
                kubernetesNamespace: this.kubernetesNamespace,
            },
            computeResources: {
                ...baseManagedResourceProperties(this, subnetIds).computeResources,
                minvCpus: this.minvCpus,
                instanceRole: this.instanceProfile.attrArn,
                instanceTypes: core_1.Lazy.list({ produce: () => renderInstances(this.instanceTypes, this.instanceClasses, props.useOptimalInstanceClasses) }),
                type: this.spot ? 'SPOT' : 'EC2',
                allocationStrategy: this.allocationStrategy,
                bidPercentage: this.spotBidPercentage,
                launchTemplate: this.launchTemplate ? {
                    launchTemplateId: this.launchTemplate?.launchTemplateId,
                } : undefined,
                ec2Configuration: this.images?.map((image) => {
                    return {
                        imageIdOverride: image.image?.getImage(this).imageId,
                        imageType: image.imageType ?? EksMachineImageType.EKS_AL2,
                    };
                }),
                placementGroup: this.placementGroup?.placementGroupName,
                tags: this.tags.renderedTags,
            },
        });
        this.computeEnvironmentName = this.getResourceNameAttribute(resource.ref);
        this.computeEnvironmentArn = this.getResourceArnAttribute(resource.attrComputeEnvironmentArn, {
            service: 'batch',
            resource: 'compute-environment',
            resourceName: this.physicalName,
        });
        this.node.addValidation({ validate: () => validateInstances(this.instanceTypes, this.instanceClasses, props.useOptimalInstanceClasses) });
    }
    addInstanceType(instanceType) {
        this.instanceTypes.push(instanceType);
    }
    addInstanceClass(instanceClass) {
        this.instanceClasses.push(instanceClass);
    }
}
exports.ManagedEc2EksComputeEnvironment = ManagedEc2EksComputeEnvironment;
_b = JSII_RTTI_SYMBOL_1;
ManagedEc2EksComputeEnvironment[_b] = { fqn: "@aws-cdk/aws-batch-alpha.ManagedEc2EksComputeEnvironment", version: "0.0.0" };
/**
 * A ManagedComputeEnvironment that uses ECS orchestration on Fargate instances.
 *
 * @resource AWS::Batch::ComputeEnvironment
 */
class FargateComputeEnvironment extends ManagedComputeEnvironmentBase {
    /**
     * Reference an existing FargateComputeEnvironment by its arn
     */
    static fromFargateComputeEnvironmentArn(scope, id, fargateComputeEnvironmentArn) {
        const stack = core_1.Stack.of(scope);
        const computeEnvironmentName = stack.splitArn(fargateComputeEnvironmentArn, core_1.ArnFormat.SLASH_RESOURCE_NAME).resourceName;
        class Import extends core_1.Resource {
            constructor() {
                super(...arguments);
                this.computeEnvironmentArn = fargateComputeEnvironmentArn;
                this.computeEnvironmentName = computeEnvironmentName;
                this.enabled = true;
                this.maxvCpus = 1;
                this.connections = {};
                this.securityGroups = [];
                this.tags = new core_1.TagManager(core_1.TagType.MAP, 'AWS::Batch::ComputeEnvironment');
            }
        }
        return new Import(scope, id);
    }
    constructor(scope, id, props) {
        super(scope, id, props);
        try {
            jsiiDeprecationWarnings._aws_cdk_aws_batch_alpha_FargateComputeEnvironmentProps(props);
        }
        catch (error) {
            if (process.env.JSII_DEBUG !== "1" && error.name === "DeprecationError") {
                Error.captureStackTrace(error, FargateComputeEnvironment);
            }
            throw error;
        }
        const { subnetIds } = props.vpc.selectSubnets(props.vpcSubnets);
        const resource = new aws_batch_1.CfnComputeEnvironment(this, 'Resource', {
            ...baseManagedResourceProperties(this, subnetIds),
            computeEnvironmentName: props.computeEnvironmentName,
            computeResources: {
                ...baseManagedResourceProperties(this, subnetIds).computeResources,
                type: this.spot ? 'FARGATE_SPOT' : 'FARGATE',
            },
        });
        this.computeEnvironmentName = this.getResourceNameAttribute(resource.ref);
        this.computeEnvironmentArn = this.getResourceArnAttribute(resource.attrComputeEnvironmentArn, {
            service: 'batch',
            resource: 'compute-environment',
            resourceName: this.physicalName,
        });
    }
}
exports.FargateComputeEnvironment = FargateComputeEnvironment;
_c = JSII_RTTI_SYMBOL_1;
FargateComputeEnvironment[_c] = { fqn: "@aws-cdk/aws-batch-alpha.FargateComputeEnvironment", version: "0.0.0" };
function renderInstances(types, classes, useOptimalInstanceClasses) {
    const instances = [];
    for (const instanceType of types ?? []) {
        instances.push(instanceType.toString());
    }
    for (const instanceClass of classes ?? []) {
        instances.push(instanceClass);
    }
    if (useOptimalInstanceClasses || useOptimalInstanceClasses === undefined) {
        instances.push('optimal');
    }
    return instances;
}
function createInstanceRoleAndProfile(scope, instanceRole) {
    const result = {};
    result.instanceRole = instanceRole ?? new iam.Role(scope, 'InstanceProfileRole', {
        assumedBy: new iam.ServicePrincipal('ec2.amazonaws.com'),
        managedPolicies: [iam.ManagedPolicy.fromAwsManagedPolicyName('service-role/AmazonEC2ContainerServiceforEC2Role')],
    });
    result.instanceProfile = new iam.CfnInstanceProfile(scope, 'InstanceProfile', {
        roles: [result.instanceRole.roleName],
    });
    return result;
}
function createSpotFleetRole(scope) {
    return new iam.Role(scope, 'SpotFleetRole', {
        assumedBy: new iam.ServicePrincipal('spotfleet.amazonaws.com'),
    });
}
function determineAllocationStrategy(id, allocationStrategy, spot) {
    let result = allocationStrategy;
    if (!allocationStrategy) {
        result = spot ? AllocationStrategy.SPOT_PRICE_CAPACITY_OPTIMIZED : AllocationStrategy.BEST_FIT_PROGRESSIVE;
    }
    else if (allocationStrategy === AllocationStrategy.SPOT_PRICE_CAPACITY_OPTIMIZED && !spot) {
        throw new Error(`Managed ComputeEnvironment '${id}' specifies 'AllocationStrategy.SPOT_PRICE_CAPACITY_OPTIMIZED' without using spot instances`);
    }
    else if (allocationStrategy === AllocationStrategy.SPOT_CAPACITY_OPTIMIZED && !spot) {
        throw new Error(`Managed ComputeEnvironment '${id}' specifies 'AllocationStrategy.SPOT_CAPACITY_OPTIMIZED' without using spot instances`);
    }
    return result;
}
function validateInstances(types, classes, useOptimalInstanceClasses) {
    if (renderInstances(types, classes, useOptimalInstanceClasses).length === 0) {
        return ["Specifies 'useOptimalInstanceClasses: false' without specifying any instance types or classes"];
    }
    return [];
}
function validateSpotConfig(id, spot, spotBidPercentage, spotFleetRole) {
    if (spotBidPercentage) {
        if (!spot) {
            throw new Error(`Managed ComputeEnvironment '${id}' specifies 'spotBidPercentage' without specifying 'spot'`);
        }
        else if (spotBidPercentage > 100) {
            throw new Error(`Managed ComputeEnvironment '${id}' specifies 'spotBidPercentage' > 100`);
        }
        else if (spotBidPercentage < 0) {
            throw new Error(`Managed ComputeEnvironment '${id}' specifies 'spotBidPercentage' < 0`);
        }
    }
    if (spotFleetRole) {
        if (!spot) {
            throw new Error(`Managed ComputeEnvironment '${id}' specifies 'spotFleetRole' without specifying 'spot'`);
        }
    }
}
function validateVCpus(id, minvCpus, maxvCpus) {
    if (minvCpus < 0) {
        throw new Error(`Managed ComputeEnvironment '${id}' has 'minvCpus' = ${minvCpus} < 0; 'minvCpus' cannot be less than zero`);
    }
    if (minvCpus > maxvCpus) {
        throw new Error(`Managed ComputeEnvironment '${id}' has 'minvCpus' = ${minvCpus} > 'maxvCpus' = ${maxvCpus}; 'minvCpus' cannot be greater than 'maxvCpus'`);
    }
}
function baseManagedResourceProperties(baseComputeEnvironment, subnetIds) {
    return {
        serviceRole: baseComputeEnvironment.serviceRole?.roleArn,
        state: baseComputeEnvironment.enabled ? 'ENABLED' : 'DISABLED',
        computeResources: {
            maxvCpus: baseComputeEnvironment.maxvCpus,
            type: 'managed',
            updateToLatestImageVersion: baseComputeEnvironment.updateToLatestImageVersion,
            securityGroupIds: baseComputeEnvironment.securityGroups.map((securityGroup) => securityGroup.securityGroupId),
            subnets: subnetIds,
        },
        updatePolicy: {
            terminateJobsOnUpdate: baseComputeEnvironment.terminateOnUpdate,
            jobExecutionTimeoutMinutes: baseComputeEnvironment.updateTimeout?.toMinutes(),
        },
        replaceComputeEnvironment: baseComputeEnvironment.replaceComputeEnvironment,
        type: 'managed',
    };
}
const DEFAULT_MIN_VCPUS = 0;
const DEFAULT_MAX_VCPUS = 256;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFuYWdlZC1jb21wdXRlLWVudmlyb25tZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWFuYWdlZC1jb21wdXRlLWVudmlyb25tZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDJDQUEyQztBQUUzQywyQ0FBMkM7QUFFM0MsMkNBQThHO0FBRTlHLHFEQUE4RDtBQUM5RCx5RUFBa0g7QUE0TGxIOzs7R0FHRztBQUNILE1BQXNCLDZCQUE4QixTQUFRLGlEQUFzQjtJQVloRixZQUFZLEtBQWdCLEVBQUUsRUFBVSxFQUFFLEtBQXFDO1FBQzdFLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBTFYsU0FBSSxHQUFlLElBQUksaUJBQVUsQ0FBQyxjQUFPLENBQUMsR0FBRyxFQUFFLGdDQUFnQyxDQUFDLENBQUM7UUFPL0YsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxJQUFJLGlCQUFpQixDQUFDO1FBQ3BELElBQUksQ0FBQyx5QkFBeUIsR0FBRyxLQUFLLENBQUMseUJBQXlCLElBQUksS0FBSyxDQUFDO1FBQzFFLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDekMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztRQUNqRCxJQUFJLENBQUMsMEJBQTBCLEdBQUcsS0FBSyxDQUFDLDBCQUEwQixJQUFJLElBQUksQ0FBQztRQUMzRSxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQyxjQUFjLElBQUk7WUFDNUMsSUFBSSxHQUFHLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxlQUFlLEVBQUU7Z0JBQzNDLEdBQUcsRUFBRSxLQUFLLENBQUMsR0FBRzthQUNmLENBQUM7U0FDSCxDQUFDO1FBQ0YsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUM7WUFDckMsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjO1NBQ3BDLENBQUMsQ0FBQztLQUNKO0NBQ0Y7QUE5QkQsc0VBOEJDO0FBOEpEOztHQUVHO0FBQ0gsSUFBWSxtQkFVWDtBQVZELFdBQVksbUJBQW1CO0lBQzdCOztPQUVHO0lBQ0gsMENBQW1CLENBQUE7SUFFbkI7O09BRUc7SUFDSCx3REFBaUMsQ0FBQTtBQUNuQyxDQUFDLEVBVlcsbUJBQW1CLG1DQUFuQixtQkFBbUIsUUFVOUI7QUFFRDs7R0FFRztBQUNILElBQVksbUJBVVg7QUFWRCxXQUFZLG1CQUFtQjtJQUM3Qjs7T0FFRztJQUNILDBDQUFtQixDQUFBO0lBRW5COztPQUVHO0lBQ0gsd0RBQWlDLENBQUE7QUFDbkMsQ0FBQyxFQVZXLG1CQUFtQixtQ0FBbkIsbUJBQW1CLFFBVTlCO0FBRUQ7Ozs7R0FJRztBQUNILElBQVksa0JBeUNYO0FBekNELFdBQVksa0JBQWtCO0lBQzVCOzs7Ozs7OztPQVFHO0lBQ0gsMkNBQXFCLENBQUE7SUFFckI7Ozs7Ozs7O09BUUc7SUFDSCxtRUFBNkMsQ0FBQTtJQUU3Qzs7Ozs7OztPQU9HO0lBQ0gseUVBQW1ELENBQUE7SUFFbkQ7Ozs7OztPQU1HO0lBQ0gscUZBQStELENBQUE7QUFDakUsQ0FBQyxFQXpDVyxrQkFBa0Isa0NBQWxCLGtCQUFrQixRQXlDN0I7QUF1SEQ7Ozs7R0FJRztBQUNILE1BQWEsK0JBQWdDLFNBQVEsNkJBQTZCO0lBQ2hGOztPQUVHO0lBQ0ksTUFBTSxDQUFDLHNDQUFzQyxDQUNsRCxLQUFnQixFQUFFLEVBQVUsRUFBRSxrQ0FBMEM7UUFFeEUsTUFBTSxLQUFLLEdBQUcsWUFBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QixNQUFNLHNCQUFzQixHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsa0NBQWtDLEVBQUUsZ0JBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFlBQWEsQ0FBQztRQUUvSCxNQUFNLE1BQU8sU0FBUSxlQUFRO1lBQTdCOztnQkFDa0IsMEJBQXFCLEdBQUcsa0NBQWtDLENBQUM7Z0JBQzNELDJCQUFzQixHQUFHLHNCQUFzQixDQUFDO2dCQUNoRCxZQUFPLEdBQUcsSUFBSSxDQUFDO2dCQUNmLG9CQUFlLEdBQUcsRUFBRSxDQUFDO2dCQUNyQixrQkFBYSxHQUFHLEVBQUUsQ0FBQztnQkFDbkIsYUFBUSxHQUFHLENBQUMsQ0FBQztnQkFDYixnQkFBVyxHQUFHLEVBQVUsQ0FBQztnQkFDekIsbUJBQWMsR0FBRyxFQUFFLENBQUM7Z0JBQ3BCLFNBQUksR0FBZSxJQUFJLGlCQUFVLENBQUMsY0FBTyxDQUFDLEdBQUcsRUFBRSxnQ0FBZ0MsQ0FBQyxDQUFDO1lBUW5HLENBQUM7WUFOUSxnQkFBZ0IsQ0FBQyxjQUFpQztnQkFDdkQsTUFBTSxJQUFJLEtBQUssQ0FBQyw2REFBNkQsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUN0RixDQUFDO1lBQ00sZUFBZSxDQUFDLGFBQStCO2dCQUNwRCxNQUFNLElBQUksS0FBSyxDQUFDLDREQUE0RCxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3JGLENBQUM7U0FDRjtRQUVELE9BQU8sSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQzlCO0lBaUJELFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBMkM7UUFDbkYsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7Ozs7OzsrQ0FoRGYsK0JBQStCOzs7O1FBa0R4QyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLGtCQUFrQixHQUFHLDJCQUEyQixDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9GLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsaUJBQWlCLENBQUM7UUFFakQsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsYUFBYSxJQUFJLENBQzFDLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLGtCQUFrQixLQUFLLGtCQUFrQixDQUFDLFFBQVE7WUFDbEUsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQztZQUMzQixDQUFDLENBQUMsU0FBUyxDQUNkLENBQUM7UUFFRixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLElBQUksRUFBRSxDQUFDO1FBQy9DLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUM7UUFFbkQsTUFBTSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsR0FBRyw0QkFBNEIsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2pHLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO1FBRXZDLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQztRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLElBQUksaUJBQWlCLENBQUM7UUFDcEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDO1FBRTNDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDaEQsa0JBQWtCLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUU5RSxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sUUFBUSxHQUFHLElBQUksaUNBQXFCLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUMzRCxHQUFHLDZCQUE2QixDQUFDLElBQUksRUFBRSxTQUFTLENBQUM7WUFDakQsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLHNCQUFzQjtZQUNwRCxnQkFBZ0IsRUFBRTtnQkFDaEIsR0FBRyw2QkFBNkIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUMsZ0JBQWtFO2dCQUNwSCxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7Z0JBQ3ZCLFlBQVksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU87Z0JBQzFDLGFBQWEsRUFBRSxXQUFJLENBQUMsSUFBSSxDQUFDO29CQUN2QixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMseUJBQXlCLENBQUM7aUJBQzFHLENBQUM7Z0JBQ0YsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSztnQkFDaEMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxPQUFPO2dCQUM3QyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsa0JBQWtCO2dCQUMzQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtnQkFDckMsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO29CQUNwQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLGdCQUFnQjtpQkFDeEQsQ0FBQyxDQUFDLENBQUMsU0FBUztnQkFDYixnQkFBZ0IsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO29CQUMzQyxPQUFPO3dCQUNMLGVBQWUsRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPO3dCQUNwRCxTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVMsSUFBSSxtQkFBbUIsQ0FBQyxPQUFPO3FCQUMxRCxDQUFDO2dCQUNKLENBQUMsQ0FBQztnQkFDRixjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxrQkFBa0I7Z0JBQ3ZELElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQW1CO2FBQ3BDO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMseUJBQXlCLEVBQUU7WUFDNUYsT0FBTyxFQUFFLE9BQU87WUFDaEIsUUFBUSxFQUFFLHFCQUFxQjtZQUMvQixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVk7U0FDaEMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUMzSTtJQUVNLGVBQWUsQ0FBQyxZQUE4QjtRQUNuRCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztLQUN2QztJQUVNLGdCQUFnQixDQUFDLGFBQWdDO1FBQ3RELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0tBQzFDOztBQXZISCwwRUF3SEM7OztBQTBQRDs7OztHQUlHO0FBQ0gsTUFBYSwrQkFBZ0MsU0FBUSw2QkFBNkI7SUFtQmhGLFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBMkM7UUFDbkYsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7Ozs7OzsrQ0FwQmYsK0JBQStCOzs7O1FBc0J4QyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLG1CQUFtQixDQUFDO1FBQ3JELElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztRQUVuQyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLGtCQUFrQixHQUFHLDJCQUEyQixDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9GLElBQUksSUFBSSxDQUFDLGtCQUFrQixLQUFLLGtCQUFrQixDQUFDLFFBQVEsRUFBRTtZQUMzRCxNQUFNLElBQUksS0FBSyxDQUFDLG9DQUFvQyxFQUFFLGtFQUFrRSxDQUFDLENBQUM7U0FDM0g7UUFDRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDLGlCQUFpQixDQUFDO1FBQ2pELElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLGFBQWEsSUFBSSxFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUMsZUFBZSxJQUFJLEVBQUUsQ0FBQztRQUVuRCxNQUFNLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxHQUFHLDRCQUE0QixDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDakcsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7UUFFdkMsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDO1FBQzNDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsSUFBSSxpQkFBaUIsQ0FBQztRQUNwRCxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUM7UUFFM0MsYUFBYSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoRCxrQkFBa0IsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUUxRCxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sUUFBUSxHQUFHLElBQUksaUNBQXFCLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUMzRCxHQUFHLDZCQUE2QixDQUFDLElBQUksRUFBRSxTQUFTLENBQUM7WUFDakQsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLHNCQUFzQjtZQUNwRCxnQkFBZ0IsRUFBRTtnQkFDaEIsYUFBYSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVTtnQkFDekMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLG1CQUFtQjthQUM5QztZQUNELGdCQUFnQixFQUFFO2dCQUNoQixHQUFHLDZCQUE2QixDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQyxnQkFBa0U7Z0JBQ3BILFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtnQkFDdkIsWUFBWSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTztnQkFDMUMsYUFBYSxFQUFFLFdBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMseUJBQXlCLENBQUMsRUFBRSxDQUFDO2dCQUN2SSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLO2dCQUNoQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsa0JBQWtCO2dCQUMzQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtnQkFDckMsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO29CQUNwQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLGdCQUFnQjtpQkFDeEQsQ0FBQyxDQUFDLENBQUMsU0FBUztnQkFDYixnQkFBZ0IsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO29CQUMzQyxPQUFPO3dCQUNMLGVBQWUsRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPO3dCQUNwRCxTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVMsSUFBSSxtQkFBbUIsQ0FBQyxPQUFPO3FCQUMxRCxDQUFDO2dCQUNKLENBQUMsQ0FBQztnQkFDRixjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxrQkFBa0I7Z0JBQ3ZELElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQW1CO2FBQ3BDO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMseUJBQXlCLEVBQUU7WUFDNUYsT0FBTyxFQUFFLE9BQU87WUFDaEIsUUFBUSxFQUFFLHFCQUFxQjtZQUMvQixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVk7U0FDaEMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUMzSTtJQUVNLGVBQWUsQ0FBQyxZQUE4QjtRQUNuRCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztLQUN2QztJQUVNLGdCQUFnQixDQUFDLGFBQWdDO1FBQ3RELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0tBQzFDOztBQTNGSCwwRUE0RkM7OztBQVlEOzs7O0dBSUc7QUFDSCxNQUFhLHlCQUEwQixTQUFRLDZCQUE2QjtJQUMxRTs7T0FFRztJQUNJLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQyxLQUFnQixFQUFFLEVBQVUsRUFBRSw0QkFBb0M7UUFDL0csTUFBTSxLQUFLLEdBQUcsWUFBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QixNQUFNLHNCQUFzQixHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsNEJBQTRCLEVBQUUsZ0JBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFlBQWEsQ0FBQztRQUV6SCxNQUFNLE1BQU8sU0FBUSxlQUFRO1lBQTdCOztnQkFDa0IsMEJBQXFCLEdBQUcsNEJBQTRCLENBQUM7Z0JBQ3JELDJCQUFzQixHQUFHLHNCQUFzQixDQUFDO2dCQUNoRCxZQUFPLEdBQUcsSUFBSSxDQUFDO2dCQUNmLGFBQVEsR0FBRyxDQUFDLENBQUM7Z0JBQ2IsZ0JBQVcsR0FBRyxFQUFVLENBQUM7Z0JBQ3pCLG1CQUFjLEdBQUcsRUFBRSxDQUFDO2dCQUNwQixTQUFJLEdBQWUsSUFBSSxpQkFBVSxDQUFDLGNBQU8sQ0FBQyxHQUFHLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQztZQUNuRyxDQUFDO1NBQUE7UUFFRCxPQUFPLElBQUksTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztLQUM5QjtJQUtELFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBcUM7UUFDN0UsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7Ozs7OzsrQ0F6QmYseUJBQXlCOzs7O1FBMkJsQyxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sUUFBUSxHQUFHLElBQUksaUNBQXFCLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUMzRCxHQUFHLDZCQUE2QixDQUFDLElBQUksRUFBRSxTQUFTLENBQUM7WUFDakQsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLHNCQUFzQjtZQUNwRCxnQkFBZ0IsRUFBRTtnQkFDaEIsR0FBRyw2QkFBNkIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUMsZ0JBQWtFO2dCQUNwSCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxTQUFTO2FBQzdDO1NBQ0YsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMseUJBQXlCLEVBQUU7WUFDNUYsT0FBTyxFQUFFLE9BQU87WUFDaEIsUUFBUSxFQUFFLHFCQUFxQjtZQUMvQixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVk7U0FDaEMsQ0FBQyxDQUFDO0tBQ0o7O0FBMUNILDhEQTJDQzs7O0FBRUQsU0FBUyxlQUFlLENBQUMsS0FBMEIsRUFBRSxPQUE2QixFQUFFLHlCQUFtQztJQUNySCxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFFckIsS0FBSyxNQUFNLFlBQVksSUFBSSxLQUFLLElBQUksRUFBRSxFQUFFO1FBQ3RDLFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDekM7SUFDRCxLQUFLLE1BQU0sYUFBYSxJQUFJLE9BQU8sSUFBSSxFQUFFLEVBQUU7UUFDekMsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztLQUMvQjtJQUNELElBQUkseUJBQXlCLElBQUkseUJBQXlCLEtBQUssU0FBUyxFQUFFO1FBQ3hFLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDM0I7SUFFRCxPQUFPLFNBQVMsQ0FBQztBQUNuQixDQUFDO0FBRUQsU0FBUyw0QkFBNEIsQ0FBQyxLQUFnQixFQUFFLFlBQXdCO0lBQzlFLE1BQU0sTUFBTSxHQUFRLEVBQUUsQ0FBQztJQUV2QixNQUFNLENBQUMsWUFBWSxHQUFHLFlBQVksSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLHFCQUFxQixFQUFFO1FBQy9FLFNBQVMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQztRQUN4RCxlQUFlLEVBQUUsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLHdCQUF3QixDQUFDLGtEQUFrRCxDQUFDLENBQUM7S0FDbEgsQ0FBQyxDQUFDO0lBRUgsTUFBTSxDQUFDLGVBQWUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsaUJBQWlCLEVBQUU7UUFDNUUsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUM7S0FDdEMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQUVELFNBQVMsbUJBQW1CLENBQUMsS0FBZ0I7SUFDM0MsT0FBTyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLGVBQWUsRUFBRTtRQUMxQyxTQUFTLEVBQUUsSUFBSSxHQUFHLENBQUMsZ0JBQWdCLENBQUMseUJBQXlCLENBQUM7S0FDL0QsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsMkJBQTJCLENBQUMsRUFBVSxFQUFFLGtCQUF1QyxFQUFFLElBQWM7SUFDdEcsSUFBSSxNQUFNLEdBQUcsa0JBQWtCLENBQUM7SUFDaEMsSUFBSSxDQUFDLGtCQUFrQixFQUFFO1FBQ3ZCLE1BQU0sR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLDZCQUE2QixDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxvQkFBb0IsQ0FBQztLQUM1RztTQUFNLElBQUksa0JBQWtCLEtBQUssa0JBQWtCLENBQUMsNkJBQTZCLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFDM0YsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsRUFBRSw2RkFBNkYsQ0FBQyxDQUFDO0tBQ2pKO1NBQU0sSUFBSSxrQkFBa0IsS0FBSyxrQkFBa0IsQ0FBQyx1QkFBdUIsSUFBSSxDQUFDLElBQUksRUFBRTtRQUNyRixNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixFQUFFLHVGQUF1RixDQUFDLENBQUM7S0FDM0k7SUFFRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxLQUEwQixFQUFFLE9BQTZCLEVBQUUseUJBQW1DO0lBQ3ZILElBQUksZUFBZSxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUseUJBQXlCLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQzNFLE9BQU8sQ0FBQywrRkFBK0YsQ0FBQyxDQUFDO0tBQzFHO0lBRUQsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxFQUFVLEVBQUUsSUFBYyxFQUFFLGlCQUEwQixFQUFFLGFBQXlCO0lBQzNHLElBQUksaUJBQWlCLEVBQUU7UUFDckIsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLEVBQUUsMkRBQTJELENBQUMsQ0FBQztTQUMvRzthQUFNLElBQUksaUJBQWlCLEdBQUcsR0FBRyxFQUFFO1lBQ2xDLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLEVBQUUsdUNBQXVDLENBQUMsQ0FBQztTQUMzRjthQUFNLElBQUksaUJBQWlCLEdBQUcsQ0FBQyxFQUFFO1lBQ2hDLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLEVBQUUscUNBQXFDLENBQUMsQ0FBQztTQUN6RjtLQUNGO0lBRUQsSUFBSSxhQUFhLEVBQUU7UUFDakIsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLEVBQUUsdURBQXVELENBQUMsQ0FBQztTQUMzRztLQUNGO0FBQ0gsQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLEVBQVUsRUFBRSxRQUFnQixFQUFFLFFBQWdCO0lBQ25FLElBQUksUUFBUSxHQUFHLENBQUMsRUFBRTtRQUNoQixNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixFQUFFLHNCQUFzQixRQUFRLDJDQUEyQyxDQUFDLENBQUM7S0FDN0g7SUFDRCxJQUFJLFFBQVEsR0FBRyxRQUFRLEVBQUU7UUFDdkIsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsRUFBRSxzQkFBc0IsUUFBUSxtQkFBbUIsUUFBUSxnREFBZ0QsQ0FBQyxDQUFDO0tBQzdKO0FBQ0gsQ0FBQztBQUVELFNBQVMsNkJBQTZCLENBQUMsc0JBQXFELEVBQUUsU0FBbUI7SUFDL0csT0FBTztRQUNMLFdBQVcsRUFBRSxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsT0FBTztRQUN4RCxLQUFLLEVBQUUsc0JBQXNCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFVBQVU7UUFDOUQsZ0JBQWdCLEVBQUU7WUFDaEIsUUFBUSxFQUFFLHNCQUFzQixDQUFDLFFBQVE7WUFDekMsSUFBSSxFQUFFLFNBQVM7WUFDZiwwQkFBMEIsRUFBRSxzQkFBc0IsQ0FBQywwQkFBMEI7WUFDN0UsZ0JBQWdCLEVBQUUsc0JBQXNCLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQztZQUM3RyxPQUFPLEVBQUUsU0FBUztTQUNuQjtRQUNELFlBQVksRUFBRTtZQUNaLHFCQUFxQixFQUFFLHNCQUFzQixDQUFDLGlCQUFpQjtZQUMvRCwwQkFBMEIsRUFBRSxzQkFBc0IsQ0FBQyxhQUFhLEVBQUUsU0FBUyxFQUFFO1NBQzlFO1FBQ0QseUJBQXlCLEVBQUUsc0JBQXNCLENBQUMseUJBQXlCO1FBQzNFLElBQUksRUFBRSxTQUFTO0tBQ2hCLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDNUIsTUFBTSxpQkFBaUIsR0FBRyxHQUFHLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBlYzIgZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjMic7XG5pbXBvcnQgKiBhcyBla3MgZnJvbSAnYXdzLWNkay1saWIvYXdzLWVrcyc7XG5pbXBvcnQgKiBhcyBpYW0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWlhbSc7XG5pbXBvcnQgeyBJUm9sZSB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1pYW0nO1xuaW1wb3J0IHsgQXJuRm9ybWF0LCBEdXJhdGlvbiwgSVRhZ2dhYmxlLCBMYXp5LCBSZXNvdXJjZSwgU3RhY2ssIFRhZ01hbmFnZXIsIFRhZ1R5cGUgfSBmcm9tICdhd3MtY2RrLWxpYi9jb3JlJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuaW1wb3J0IHsgQ2ZuQ29tcHV0ZUVudmlyb25tZW50IH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWJhdGNoJztcbmltcG9ydCB7IElDb21wdXRlRW52aXJvbm1lbnQsIENvbXB1dGVFbnZpcm9ubWVudEJhc2UsIENvbXB1dGVFbnZpcm9ubWVudFByb3BzIH0gZnJvbSAnLi9jb21wdXRlLWVudmlyb25tZW50LWJhc2UnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBNYW5hZ2VkIENvbXB1dGVFbnZpcm9ubWVudC4gQmF0Y2ggd2lsbCBwcm92aXNpb24gRUMyIEluc3RhbmNlcyB0b1xuICogbWVldCB0aGUgcmVxdWlyZW1lbnRzIG9mIHRoZSBqb2JzIGV4ZWN1dGluZyBpbiB0aGlzIENvbXB1dGVFbnZpcm9ubWVudC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTWFuYWdlZENvbXB1dGVFbnZpcm9ubWVudCBleHRlbmRzIElDb21wdXRlRW52aXJvbm1lbnQsIGVjMi5JQ29ubmVjdGFibGUsIElUYWdnYWJsZSB7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSB2Q3B1cyB0aGlzIGBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50YCBjYW4gc2NhbGUgdXAgdG8uXG4gICAqXG4gICAqICpOb3RlKjogaWYgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IHVzZXMgRUMyIHJlc291cmNlcyAobm90IEZhcmdhdGUpIHdpdGggZWl0aGVyIGBBbGxvY2F0aW9uU3RyYXRlZ3kuQkVTVF9GSVRfUFJPR1JFU1NJVkVgIG9yXG4gICAqIGBBbGxvY2F0aW9uU3RyYXRlZ3kuU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRURgLCBvciBgQWxsb2NhdGlvblN0cmF0ZWd5LkJFU1RfRklUYCB3aXRoIFNwb3QgaW5zdGFuY2VzLFxuICAgKiBUaGUgc2NoZWR1bGVyIG1heSBleGNlZWQgdGhpcyBudW1iZXIgYnkgYXQgbW9zdCBvbmUgb2YgdGhlIGluc3RhbmNlcyBzcGVjaWZpZWQgaW4gYGluc3RhbmNlVHlwZXNgXG4gICAqIG9yIGBpbnN0YW5jZUNsYXNzZXNgLlxuICAgKi9cbiAgcmVhZG9ubHkgbWF4dkNwdXM6IG51bWJlcjtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHdoZXRoZXIgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IGlzIHJlcGxhY2VkIGlmIGFuIHVwZGF0ZSBpcyBtYWRlIHRoYXQgcmVxdWlyZXNcbiAgICogcmVwbGFjaW5nIGl0cyBpbnN0YW5jZXMuIFRvIGVuYWJsZSBtb3JlIHByb3BlcnRpZXMgdG8gYmUgdXBkYXRlZCxcbiAgICogc2V0IHRoaXMgcHJvcGVydHkgdG8gYGZhbHNlYC4gV2hlbiBjaGFuZ2luZyB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eSB0byBmYWxzZSxcbiAgICogZG8gbm90IGNoYW5nZSBhbnkgb3RoZXIgcHJvcGVydGllcyBhdCB0aGUgc2FtZSB0aW1lLlxuICAgKiBJZiBvdGhlciBwcm9wZXJ0aWVzIGFyZSBjaGFuZ2VkIGF0IHRoZSBzYW1lIHRpbWUsXG4gICAqIGFuZCB0aGUgY2hhbmdlIG5lZWRzIHRvIGJlIHJvbGxlZCBiYWNrIGJ1dCBpdCBjYW4ndCxcbiAgICogaXQncyBwb3NzaWJsZSBmb3IgdGhlIHN0YWNrIHRvIGdvIGludG8gdGhlIFVQREFURV9ST0xMQkFDS19GQUlMRUQgc3RhdGUuXG4gICAqIFlvdSBjYW4ndCB1cGRhdGUgYSBzdGFjayB0aGF0IGlzIGluIHRoZSBVUERBVEVfUk9MTEJBQ0tfRkFJTEVEIHN0YXRlLlxuICAgKiBIb3dldmVyLCBpZiB5b3UgY2FuIGNvbnRpbnVlIHRvIHJvbGwgaXQgYmFjayxcbiAgICogeW91IGNhbiByZXR1cm4gdGhlIHN0YWNrIHRvIGl0cyBvcmlnaW5hbCBzZXR0aW5ncyBhbmQgdGhlbiB0cnkgdG8gdXBkYXRlIGl0IGFnYWluLlxuICAgKlxuICAgKiBUaGUgcHJvcGVydGllcyB3aGljaCByZXF1aXJlIGEgcmVwbGFjZW1lbnQgb2YgdGhlIENvbXB1dGUgRW52aXJvbm1lbnQgYXJlOlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BV1NDbG91ZEZvcm1hdGlvbi9sYXRlc3QvVXNlckd1aWRlL2F3cy1yZXNvdXJjZS1iYXRjaC1jb21wdXRlZW52aXJvbm1lbnQuaHRtbCNjZm4tYmF0Y2gtY29tcHV0ZWVudmlyb25tZW50LXJlcGxhY2Vjb21wdXRlZW52aXJvbm1lbnRcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTQ2xvdWRGb3JtYXRpb24vbGF0ZXN0L1VzZXJHdWlkZS91c2luZy1jZm4tdXBkYXRpbmctc3RhY2tzLWNvbnRpbnVldXBkYXRlcm9sbGJhY2suaHRtbFxuICAgKi9cbiAgcmVhZG9ubHkgcmVwbGFjZUNvbXB1dGVFbnZpcm9ubWVudD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRvIHVzZSBzcG90IGluc3RhbmNlcy5cbiAgICogU3BvdCBpbnN0YW5jZXMgYXJlIGxlc3MgZXhwZW5zaXZlIEVDMiBpbnN0YW5jZXMgdGhhdCBjYW4gYmVcbiAgICogcmVjbGFpbWVkIGJ5IEVDMiBhdCBhbnkgdGltZTsgeW91ciBqb2Igd2lsbCBiZSBnaXZlbiB0d28gbWludXRlc1xuICAgKiBvZiBub3RpY2UgYmVmb3JlIHJlY2xhbWF0aW9uLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgc3BvdD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE9ubHkgbWVhbmluZ2Z1bCBpZiBgdGVybWluYXRlT25VcGRhdGVgIGlzIGBmYWxzZWAuIElmIHNvLFxuICAgKiB3aGVuIGFuIGluZnJhc3RydWN0dXJlIHVwZGF0ZSBpcyB0cmlnZ2VyZWQsIGFueSBydW5uaW5nIGpvYnNcbiAgICogd2lsbCBiZSBhbGxvd2VkIHRvIHJ1biB1bnRpbCBgdXBkYXRlVGltZW91dGAgaGFzIGV4cGlyZWQuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2JhdGNoL2xhdGVzdC91c2VyZ3VpZGUvdXBkYXRpbmctY29tcHV0ZS1lbnZpcm9ubWVudHMuaHRtbFxuICAgKiBAZGVmYXVsdCAzMCBtaW51dGVzXG4gICAqL1xuICByZWFkb25seSB1cGRhdGVUaW1lb3V0PzogRHVyYXRpb247XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IGFueSBydW5uaW5nIGpvYnMgd2lsbCBiZSBpbW1lZGlhdGVseSB0ZXJtaW5hdGVkIHdoZW4gYW4gaW5mcmFzdHJ1Y3R1cmUgdXBkYXRlXG4gICAqIG9jY3Vycy4gSWYgdGhpcyBpcyBlbmFibGVkLCBhbnkgdGVybWluYXRlZCBqb2JzIG1heSBiZSByZXRyaWVkLCBkZXBlbmRpbmcgb24gdGhlIGpvYidzXG4gICAqIHJldHJ5IHBvbGljeS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmF0Y2gvbGF0ZXN0L3VzZXJndWlkZS91cGRhdGluZy1jb21wdXRlLWVudmlyb25tZW50cy5odG1sXG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICByZWFkb25seSB0ZXJtaW5hdGVPblVwZGF0ZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBzZWN1cml0eSBncm91cHMgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IHdpbGwgbGF1bmNoIGluc3RhbmNlcyBpbi5cbiAgICovXG4gIHJlYWRvbmx5IHNlY3VyaXR5R3JvdXBzOiBlYzIuSVNlY3VyaXR5R3JvdXBbXTtcblxuICAvKipcbiAgICogVGhlIFZQQyBTdWJuZXRzIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCB3aWxsIGxhdW5jaCBpbnN0YW5jZXMgaW4uXG4gICAqL1xuICByZWFkb25seSB2cGNTdWJuZXRzPzogZWMyLlN1Ym5ldFNlbGVjdGlvbjtcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhlIEFNSSBpcyB1cGRhdGVkIHRvIHRoZSBsYXRlc3Qgb25lIHN1cHBvcnRlZCBieSBCYXRjaFxuICAgKiB3aGVuIGFuIGluZnJhc3RydWN0dXJlIHVwZGF0ZSBvY2N1cnMuXG4gICAqXG4gICAqIElmIHlvdSBzcGVjaWZ5IGEgc3BlY2lmaWMgQU1JLCB0aGlzIHByb3BlcnR5IHdpbGwgYmUgaWdub3JlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgcmVhZG9ubHkgdXBkYXRlVG9MYXRlc3RJbWFnZVZlcnNpb24/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFByb3BzIGZvciBhIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50UHJvcHMgZXh0ZW5kcyBDb21wdXRlRW52aXJvbm1lbnRQcm9wcyB7XG4gIC8qKlxuICAqIFRoZSBtYXhpbXVtIHZDcHVzIHRoaXMgYE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRgIGNhbiBzY2FsZSB1cCB0by5cbiAgKiBFYWNoIHZDUFUgaXMgZXF1aXZhbGVudCB0byAxMDI0IENQVSBzaGFyZXMuXG4gICpcbiAgKiAqTm90ZSo6IGlmIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCB1c2VzIEVDMiByZXNvdXJjZXMgKG5vdCBGYXJnYXRlKSB3aXRoIGVpdGhlciBgQWxsb2NhdGlvblN0cmF0ZWd5LkJFU1RfRklUX1BST0dSRVNTSVZFYCBvclxuICAqIGBBbGxvY2F0aW9uU3RyYXRlZ3kuU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRURgLCBvciBgQWxsb2NhdGlvblN0cmF0ZWd5LkJFU1RfRklUYCB3aXRoIFNwb3QgaW5zdGFuY2VzLFxuICAqIFRoZSBzY2hlZHVsZXIgbWF5IGV4Y2VlZCB0aGlzIG51bWJlciBieSBhdCBtb3N0IG9uZSBvZiB0aGUgaW5zdGFuY2VzIHNwZWNpZmllZCBpbiBgaW5zdGFuY2VUeXBlc2BcbiAgKiBvciBgaW5zdGFuY2VDbGFzc2VzYC5cbiAgKlxuICAqIEBkZWZhdWx0IDI1NlxuICAqL1xuICByZWFkb25seSBtYXh2Q3B1cz86IG51bWJlcjtcblxuICAvKipcbiAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgaXMgcmVwbGFjZWQgaWYgYW4gdXBkYXRlIGlzIG1hZGUgdGhhdCByZXF1aXJlc1xuICAqIHJlcGxhY2luZyBpdHMgaW5zdGFuY2VzLiBUbyBlbmFibGUgbW9yZSBwcm9wZXJ0aWVzIHRvIGJlIHVwZGF0ZWQsXG4gICogc2V0IHRoaXMgcHJvcGVydHkgdG8gYGZhbHNlYC4gV2hlbiBjaGFuZ2luZyB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eSB0byBmYWxzZSxcbiAgKiBkbyBub3QgY2hhbmdlIGFueSBvdGhlciBwcm9wZXJ0aWVzIGF0IHRoZSBzYW1lIHRpbWUuXG4gICogSWYgb3RoZXIgcHJvcGVydGllcyBhcmUgY2hhbmdlZCBhdCB0aGUgc2FtZSB0aW1lLFxuICAqIGFuZCB0aGUgY2hhbmdlIG5lZWRzIHRvIGJlIHJvbGxlZCBiYWNrIGJ1dCBpdCBjYW4ndCxcbiAgKiBpdCdzIHBvc3NpYmxlIGZvciB0aGUgc3RhY2sgdG8gZ28gaW50byB0aGUgVVBEQVRFX1JPTExCQUNLX0ZBSUxFRCBzdGF0ZS5cbiAgKiBZb3UgY2FuJ3QgdXBkYXRlIGEgc3RhY2sgdGhhdCBpcyBpbiB0aGUgVVBEQVRFX1JPTExCQUNLX0ZBSUxFRCBzdGF0ZS5cbiAgKiBIb3dldmVyLCBpZiB5b3UgY2FuIGNvbnRpbnVlIHRvIHJvbGwgaXQgYmFjayxcbiAgKiB5b3UgY2FuIHJldHVybiB0aGUgc3RhY2sgdG8gaXRzIG9yaWdpbmFsIHNldHRpbmdzIGFuZCB0aGVuIHRyeSB0byB1cGRhdGUgaXQgYWdhaW4uXG4gICpcbiAgKiBUaGUgcHJvcGVydGllcyB3aGljaCByZXF1aXJlIGEgcmVwbGFjZW1lbnQgb2YgdGhlIENvbXB1dGUgRW52aXJvbm1lbnQgYXJlOlxuICAqXG4gICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTQ2xvdWRGb3JtYXRpb24vbGF0ZXN0L1VzZXJHdWlkZS9hd3MtcmVzb3VyY2UtYmF0Y2gtY29tcHV0ZWVudmlyb25tZW50Lmh0bWwjY2ZuLWJhdGNoLWNvbXB1dGVlbnZpcm9ubWVudC1yZXBsYWNlY29tcHV0ZWVudmlyb25tZW50XG4gICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTQ2xvdWRGb3JtYXRpb24vbGF0ZXN0L1VzZXJHdWlkZS91c2luZy1jZm4tdXBkYXRpbmctc3RhY2tzLWNvbnRpbnVldXBkYXRlcm9sbGJhY2suaHRtbFxuICAqXG4gICogQGRlZmF1bHQgZmFsc2VcbiAgKi9cbiAgcmVhZG9ubHkgcmVwbGFjZUNvbXB1dGVFbnZpcm9ubWVudD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRvIHVzZSBzcG90IGluc3RhbmNlcy5cbiAgICogU3BvdCBpbnN0YW5jZXMgYXJlIGxlc3MgZXhwZW5zaXZlIEVDMiBpbnN0YW5jZXMgdGhhdCBjYW4gYmVcbiAgICogcmVjbGFpbWVkIGJ5IEVDMiBhdCBhbnkgdGltZTsgeW91ciBqb2Igd2lsbCBiZSBnaXZlbiB0d28gbWludXRlc1xuICAgKiBvZiBub3RpY2UgYmVmb3JlIHJlY2xhbWF0aW9uLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgc3BvdD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE9ubHkgbWVhbmluZ2Z1bCBpZiBgdGVybWluYXRlT25VcGRhdGVgIGlzIGBmYWxzZWAuIElmIHNvLFxuICAgKiB3aGVuIGFuIGluZnJhc3RydWN0dXJlIHVwZGF0ZSBpcyB0cmlnZ2VyZWQsIGFueSBydW5uaW5nIGpvYnNcbiAgICogd2lsbCBiZSBhbGxvd2VkIHRvIHJ1biB1bnRpbCBgdXBkYXRlVGltZW91dGAgaGFzIGV4cGlyZWQuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2JhdGNoL2xhdGVzdC91c2VyZ3VpZGUvdXBkYXRpbmctY29tcHV0ZS1lbnZpcm9ubWVudHMuaHRtbFxuICAgKlxuICAgKiBAZGVmYXVsdCAzMCBtaW51dGVzXG4gICAqL1xuICByZWFkb25seSB1cGRhdGVUaW1lb3V0PzogRHVyYXRpb247XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IGFueSBydW5uaW5nIGpvYnMgd2lsbCBiZSBpbW1lZGlhdGVseSB0ZXJtaW5hdGVkIHdoZW4gYW4gaW5mcmFzdHJ1Y3R1cmUgdXBkYXRlXG4gICAqIG9jY3Vycy4gSWYgdGhpcyBpcyBlbmFibGVkLCBhbnkgdGVybWluYXRlZCBqb2JzIG1heSBiZSByZXRyaWVkLCBkZXBlbmRpbmcgb24gdGhlIGpvYidzXG4gICAqIHJldHJ5IHBvbGljeS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmF0Y2gvbGF0ZXN0L3VzZXJndWlkZS91cGRhdGluZy1jb21wdXRlLWVudmlyb25tZW50cy5odG1sXG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICByZWFkb25seSB0ZXJtaW5hdGVPblVwZGF0ZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFZQQyBpbiB3aGljaCB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgd2lsbCBsYXVuY2ggSW5zdGFuY2VzXG4gICAqL1xuICByZWFkb25seSB2cGM6IGVjMi5JVnBjO1xuXG4gIC8qKlxuICAqIFRoZSBzZWN1cml0eSBncm91cHMgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IHdpbGwgbGF1bmNoIGluc3RhbmNlcyBpbi5cbiAgKlxuICAqIEBkZWZhdWx0IG5ldyBzZWN1cml0eSBncm91cHMgd2lsbCBiZSBjcmVhdGVkXG4gICovXG4gIHJlYWRvbmx5IHNlY3VyaXR5R3JvdXBzPzogZWMyLklTZWN1cml0eUdyb3VwW107XG5cbiAgLyoqXG4gICogVGhlIFZQQyBTdWJuZXRzIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCB3aWxsIGxhdW5jaCBpbnN0YW5jZXMgaW4uXG4gICpcbiAgKiBAZGVmYXVsdCBuZXcgc3VibmV0cyB3aWxsIGJlIGNyZWF0ZWRcbiAgKi9cbiAgcmVhZG9ubHkgdnBjU3VibmV0cz86IGVjMi5TdWJuZXRTZWxlY3Rpb247XG5cbiAgLyoqXG4gICogV2hldGhlciBvciBub3QgdGhlIEFNSSBpcyB1cGRhdGVkIHRvIHRoZSBsYXRlc3Qgb25lIHN1cHBvcnRlZCBieSBCYXRjaFxuICAqIHdoZW4gYW4gaW5mcmFzdHJ1Y3R1cmUgdXBkYXRlIG9jY3Vycy5cbiAgKlxuICAqIElmIHlvdSBzcGVjaWZ5IGEgc3BlY2lmaWMgQU1JLCB0aGlzIHByb3BlcnR5IHdpbGwgYmUgaWdub3JlZC5cbiAgKlxuICAqIEBkZWZhdWx0IHRydWVcbiAgKi9cbiAgcmVhZG9ubHkgdXBkYXRlVG9MYXRlc3RJbWFnZVZlcnNpb24/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRCYXNlIGV4dGVuZHMgQ29tcHV0ZUVudmlyb25tZW50QmFzZSBpbXBsZW1lbnRzIElNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50IHtcbiAgcHVibGljIHJlYWRvbmx5IG1heHZDcHVzOiBudW1iZXI7XG4gIHB1YmxpYyByZWFkb25seSByZXBsYWNlQ29tcHV0ZUVudmlyb25tZW50PzogYm9vbGVhbjtcbiAgcHVibGljIHJlYWRvbmx5IHNwb3Q/OiBib29sZWFuO1xuICBwdWJsaWMgcmVhZG9ubHkgdXBkYXRlVGltZW91dD86IER1cmF0aW9uO1xuICBwdWJsaWMgcmVhZG9ubHkgdGVybWluYXRlT25VcGRhdGU/OiBib29sZWFuO1xuICBwdWJsaWMgcmVhZG9ubHkgc2VjdXJpdHlHcm91cHM6IGVjMi5JU2VjdXJpdHlHcm91cFtdO1xuICBwdWJsaWMgcmVhZG9ubHkgdXBkYXRlVG9MYXRlc3RJbWFnZVZlcnNpb24/OiBib29sZWFuO1xuICBwdWJsaWMgcmVhZG9ubHkgdGFnczogVGFnTWFuYWdlciA9IG5ldyBUYWdNYW5hZ2VyKFRhZ1R5cGUuTUFQLCAnQVdTOjpCYXRjaDo6Q29tcHV0ZUVudmlyb25tZW50Jyk7XG5cbiAgcHVibGljIHJlYWRvbmx5IGNvbm5lY3Rpb25zOiBlYzIuQ29ubmVjdGlvbnM7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRQcm9wcykge1xuICAgIHN1cGVyKHNjb3BlLCBpZCwgcHJvcHMpO1xuXG4gICAgdGhpcy5tYXh2Q3B1cyA9IHByb3BzLm1heHZDcHVzID8/IERFRkFVTFRfTUFYX1ZDUFVTO1xuICAgIHRoaXMucmVwbGFjZUNvbXB1dGVFbnZpcm9ubWVudCA9IHByb3BzLnJlcGxhY2VDb21wdXRlRW52aXJvbm1lbnQgPz8gZmFsc2U7XG4gICAgdGhpcy5zcG90ID0gcHJvcHMuc3BvdDtcbiAgICB0aGlzLnVwZGF0ZVRpbWVvdXQgPSBwcm9wcy51cGRhdGVUaW1lb3V0O1xuICAgIHRoaXMudGVybWluYXRlT25VcGRhdGUgPSBwcm9wcy50ZXJtaW5hdGVPblVwZGF0ZTtcbiAgICB0aGlzLnVwZGF0ZVRvTGF0ZXN0SW1hZ2VWZXJzaW9uID0gcHJvcHMudXBkYXRlVG9MYXRlc3RJbWFnZVZlcnNpb24gPz8gdHJ1ZTtcbiAgICB0aGlzLnNlY3VyaXR5R3JvdXBzID0gcHJvcHMuc2VjdXJpdHlHcm91cHMgPz8gW1xuICAgICAgbmV3IGVjMi5TZWN1cml0eUdyb3VwKHRoaXMsICdTZWN1cml0eUdyb3VwJywge1xuICAgICAgICB2cGM6IHByb3BzLnZwYyxcbiAgICAgIH0pLFxuICAgIF07XG4gICAgdGhpcy5jb25uZWN0aW9ucyA9IG5ldyBlYzIuQ29ubmVjdGlvbnMoe1xuICAgICAgc2VjdXJpdHlHcm91cHM6IHRoaXMuc2VjdXJpdHlHcm91cHMsXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnQgdGhhdCB1c2VzIEVDUyBvcmNoZXN0cmF0aW9uIG9uIEVDMiBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU1hbmFnZWRFYzJFY3NDb21wdXRlRW52aXJvbm1lbnQgZXh0ZW5kcyBJTWFuYWdlZENvbXB1dGVFbnZpcm9ubWVudCB7XG4gIC8qKlxuICAgKiBDb25maWd1cmUgd2hpY2ggQU1JcyB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgY2FuIGxhdW5jaC5cbiAgICpcbiAgICogTGVhdmUgdGhpcyBgdW5kZWZpbmVkYCB0byBhbGxvdyBCYXRjaCB0byBjaG9vc2UgdGhlIGxhdGVzdCBBTUlzIGl0IHN1cHBvcnRzIGZvciBlYWNoIGluc3RhbmNlIHRoYXQgaXQgbGF1bmNoZXMuXG4gICAqXG4gICAqIEBkZWZhdWx0XG4gICAqIC0gRUNTX0FMMiBjb21wYXRpYmxlIEFNSSBpZHMgZm9yIG5vbi1HUFUgaW5zdGFuY2VzLCBFQ1NfQUwyX05WSURJQSBjb21wYXRpYmxlIEFNSSBpZHMgZm9yIEdQVSBpbnN0YW5jZXNcbiAgICovXG4gIHJlYWRvbmx5IGltYWdlcz86IEVjc01hY2hpbmVJbWFnZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgYWxsb2NhdGlvbiBzdHJhdGVneSB0byB1c2UgaWYgbm90IGVub3VnaCBpbnN0YW5jZXMgb2ZcbiAgICogdGhlIGJlc3QgZml0dGluZyBpbnN0YW5jZSB0eXBlIGNhbiBiZSBhbGxvY2F0ZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gYEJFU1RfRklUX1BST0dSRVNTSVZFYCBpZiBub3QgdXNpbmcgU3BvdCBpbnN0YW5jZXMsXG4gICAqIGBTUE9UX0NBUEFDSVRZX09QVElNSVpFRGAgaWYgdXNpbmcgU3BvdCBpbnN0YW5jZXMuXG4gICAqL1xuICByZWFkb25seSBhbGxvY2F0aW9uU3RyYXRlZ3k/OiBBbGxvY2F0aW9uU3RyYXRlZ3k7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIHBlcmNlbnRhZ2UgdGhhdCBhIFNwb3QgSW5zdGFuY2UgcHJpY2UgY2FuIGJlIHdoZW4gY29tcGFyZWQgd2l0aCB0aGVcbiAgICogT24tRGVtYW5kIHByaWNlIGZvciB0aGF0IGluc3RhbmNlIHR5cGUgYmVmb3JlIGluc3RhbmNlcyBhcmUgbGF1bmNoZWQuXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3VyIG1heGltdW0gcGVyY2VudGFnZSBpcyAyMCUsIHRoZSBTcG90IHByaWNlIG11c3QgYmVcbiAgICogbGVzcyB0aGFuIDIwJSBvZiB0aGUgY3VycmVudCBPbi1EZW1hbmQgcHJpY2UgZm9yIHRoYXQgSW5zdGFuY2UuXG4gICAqIFlvdSBhbHdheXMgcGF5IHRoZSBsb3dlc3QgbWFya2V0IHByaWNlIGFuZCBuZXZlciBtb3JlIHRoYW4geW91ciBtYXhpbXVtIHBlcmNlbnRhZ2UuXG4gICAqIEZvciBtb3N0IHVzZSBjYXNlcywgQmF0Y2ggcmVjb21tZW5kcyBsZWF2aW5nIHRoaXMgZmllbGQgZW1wdHkuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gMTAwJVxuICAgKi9cbiAgcmVhZG9ubHkgc3BvdEJpZFBlcmNlbnRhZ2U/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBzZXJ2aWNlLWxpbmtlZCByb2xlIHRoYXQgU3BvdCBGbGVldCBuZWVkcyB0byBsYXVuY2ggaW5zdGFuY2VzIG9uIHlvdXIgYmVoYWxmLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9iYXRjaC9sYXRlc3QvdXNlcmd1aWRlL3Nwb3RfZmxlZXRfSUFNX3JvbGUuaHRtbFxuICAgKlxuICAgKiBAZGVmYXVsdCAtIGEgbmV3IFJvbGUgd2lsbCBiZSBjcmVhdGVkXG4gICAqL1xuICByZWFkb25seSBzcG90RmxlZXRSb2xlPzogaWFtLklSb2xlO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5zdGFuY2UgdHlwZXMgdGhhdCB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgY2FuIGxhdW5jaC5cbiAgICogV2hpY2ggb25lIGlzIGNob3NlbiBkZXBlbmRzIG9uIHRoZSBgQWxsb2NhdGlvblN0cmF0ZWd5YCB1c2VkLlxuICAgKi9cbiAgcmVhZG9ubHkgaW5zdGFuY2VUeXBlczogZWMyLkluc3RhbmNlVHlwZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5zdGFuY2UgY2xhc3NlcyB0aGF0IHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCBjYW4gbGF1bmNoLlxuICAgKiBXaGljaCBvbmUgaXMgY2hvc2VuIGRlcGVuZHMgb24gdGhlIGBBbGxvY2F0aW9uU3RyYXRlZ3lgIHVzZWQuXG4gICAqIEJhdGNoIHdpbGwgYXV0b21hdGljYWxseSBjaG9vc2UgdGhlIHNpemUuXG4gICAqL1xuICByZWFkb25seSBpbnN0YW5jZUNsYXNzZXM6IGVjMi5JbnN0YW5jZUNsYXNzW107XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRvIHVzZSBiYXRjaCdzIG9wdGltYWwgaW5zdGFuY2UgdHlwZS5cbiAgICogVGhlIG9wdGltYWwgaW5zdGFuY2UgdHlwZSBpcyBlcXVpdmFsZW50IHRvIGFkZGluZyB0aGVcbiAgICogQzQsIE00LCBhbmQgUjQgaW5zdGFuY2UgY2xhc3Nlcy4gWW91IGNhbiBzcGVjaWZ5IG90aGVyIGluc3RhbmNlIGNsYXNzZXNcbiAgICogKG9mIHRoZSBzYW1lIGFyY2hpdGVjdHVyZSkgaW4gYWRkaXRpb24gdG8gdGhlIG9wdGltYWwgaW5zdGFuY2UgY2xhc3Nlcy5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgcmVhZG9ubHkgdXNlT3B0aW1hbEluc3RhbmNlQ2xhc3Nlcz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBleGVjdXRpb24gUm9sZSB0aGF0IGluc3RhbmNlcyBsYXVuY2hlZCBieSB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgd2lsbCB1c2UuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gYSByb2xlIHdpbGwgYmUgY3JlYXRlZFxuICAgKi9cbiAgcmVhZG9ubHkgaW5zdGFuY2VSb2xlPzogaWFtLklSb2xlO1xuXG4gIC8qKlxuICAgKiBUaGUgTGF1bmNoIFRlbXBsYXRlIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50XG4gICAqIHdpbGwgdXNlIHRvIHByb3Zpc2lvbiBFQzIgSW5zdGFuY2VzLlxuICAgKlxuICAgKiAqTm90ZSo6IGlmIGBzZWN1cml0eUdyb3Vwc2AgaXMgc3BlY2lmaWVkIG9uIGJvdGggeW91clxuICAgKiBsYXVuY2ggdGVtcGxhdGUgYW5kIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCwgKip0aGVcbiAgICogYHNlY3VyaXR5R3JvdXBgcyBvbiB0aGUgQ29tcHV0ZSBFbnZpcm9ubWVudCBvdmVycmlkZSB0aGVcbiAgICogb25lcyBvbiB0aGUgbGF1bmNoIHRlbXBsYXRlLlxuICAgKlxuICAgKiBAZGVmYXVsdCBubyBsYXVuY2ggdGVtcGxhdGVcbiAgICovXG4gIHJlYWRvbmx5IGxhdW5jaFRlbXBsYXRlPzogZWMyLklMYXVuY2hUZW1wbGF0ZTtcblxuICAvKipcbiAgICogVGhlIG1pbmltdW0gdkNQVXMgdGhhdCBhbiBlbnZpcm9ubWVudCBzaG91bGQgbWFpbnRhaW4sXG4gICAqIGV2ZW4gaWYgdGhlIGNvbXB1dGUgZW52aXJvbm1lbnQgaXMgRElTQUJMRUQuXG4gICAqXG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIHJlYWRvbmx5IG1pbnZDcHVzPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgRUMyIHBsYWNlbWVudCBncm91cCB0byBhc3NvY2lhdGUgd2l0aCB5b3VyIGNvbXB1dGUgcmVzb3VyY2VzLlxuICAgKiBJZiB5b3UgaW50ZW5kIHRvIHN1Ym1pdCBtdWx0aS1ub2RlIHBhcmFsbGVsIGpvYnMgdG8gdGhpcyBDb21wdXRlIEVudmlyb25tZW50LFxuICAgKiB5b3Ugc2hvdWxkIGNvbnNpZGVyIGNyZWF0aW5nIGEgY2x1c3RlciBwbGFjZW1lbnQgZ3JvdXAgYW5kIGFzc29jaWF0ZSBpdCB3aXRoIHlvdXIgY29tcHV0ZSByZXNvdXJjZXMuXG4gICAqIFRoaXMga2VlcHMgeW91ciBtdWx0aS1ub2RlIHBhcmFsbGVsIGpvYiBvbiBhIGxvZ2ljYWwgZ3JvdXBpbmcgb2YgaW5zdGFuY2VzXG4gICAqIHdpdGhpbiBhIHNpbmdsZSBBdmFpbGFiaWxpdHkgWm9uZSB3aXRoIGhpZ2ggbmV0d29yayBmbG93IHBvdGVudGlhbC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTRUMyL2xhdGVzdC9Vc2VyR3VpZGUvcGxhY2VtZW50LWdyb3Vwcy5odG1sXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gbm8gcGxhY2VtZW50IGdyb3VwXG4gICAqL1xuICByZWFkb25seSBwbGFjZW1lbnRHcm91cD86IGVjMi5JUGxhY2VtZW50R3JvdXA7XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBpbnN0YW5jZSB0eXBlIHRvIHRoaXMgY29tcHV0ZSBlbnZpcm9ubWVudFxuICAgKi9cbiAgYWRkSW5zdGFuY2VUeXBlKGluc3RhbmNlVHlwZTogZWMyLkluc3RhbmNlVHlwZSk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBpbnN0YW5jZSBjbGFzcyB0byB0aGlzIGNvbXB1dGUgZW52aXJvbm1lbnRcbiAgICovXG4gIGFkZEluc3RhbmNlQ2xhc3MoaW5zdGFuY2VDbGFzczogZWMyLkluc3RhbmNlQ2xhc3MpOiB2b2lkO1xufVxuXG4vKipcbiAqIEJhc2UgaW50ZXJmYWNlIGZvciBjb250YWluaW5nIGFsbCBpbmZvcm1hdGlvbiBuZWVkZWQgdG9cbiAqIGNvbmZpZ3VyZSBhIE1hY2hpbmVJbWFnZSBpbiBCYXRjaFxuICovXG5pbnRlcmZhY2UgTWFjaGluZUltYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBtYWNoaW5lIGltYWdlIHRvIHVzZVxuICAgKlxuICAgKiBAZGVmYXVsdCAtIGNob3NlbiBieSBiYXRjaFxuICAgKi9cbiAgcmVhZG9ubHkgaW1hZ2U/OiBlYzIuSU1hY2hpbmVJbWFnZTtcbn1cblxuLyoqXG4gKiBBIEJhdGNoIE1hY2hpbmVJbWFnZSB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBFQ1NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFY3NNYWNoaW5lSW1hZ2UgZXh0ZW5kcyBNYWNoaW5lSW1hZ2Uge1xuICAvKipcbiAgICogVGVsbHMgQmF0Y2ggd2hpY2ggaW5zdGFuY2UgdHlwZSB0byBsYXVuY2ggdGhpcyBpbWFnZSBvblxuICAgKlxuICAgKiBAZGVmYXVsdCAtICdFQ1NfQUwyJyBmb3Igbm9uLWdwdSBpbnN0YW5jZXMsICdFQ1NfQUwyX05WSURJQScgZm9yIGdwdSBpbnN0YW5jZXNcbiAgICovXG4gIHJlYWRvbmx5IGltYWdlVHlwZT86IEVjc01hY2hpbmVJbWFnZVR5cGU7XG59XG5cbi8qKlxuICogQSBCYXRjaCBNYWNoaW5lSW1hZ2UgdGhhdCBpcyBjb21wYXRpYmxlIHdpdGggRUtTXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRWtzTWFjaGluZUltYWdlIGV4dGVuZHMgTWFjaGluZUltYWdle1xuICAvKipcbiAgICogVGVsbHMgQmF0Y2ggd2hpY2ggaW5zdGFuY2UgdHlwZSB0byBsYXVuY2ggdGhpcyBpbWFnZSBvblxuICAgKlxuICAgKiBAZGVmYXVsdCAtICdFS1NfQUwyJyBmb3Igbm9uLWdwdSBpbnN0YW5jZXMsICdFS1NfQUwyX05WSURJQScgZm9yIGdwdSBpbnN0YW5jZXNcbiAgICovXG4gIHJlYWRvbmx5IGltYWdlVHlwZT86IEVrc01hY2hpbmVJbWFnZVR5cGU7XG59XG5cbi8qKlxuICogTWFwcyB0aGUgaW1hZ2UgdG8gaW5zdGFuY2UgdHlwZXNcbiAqL1xuZXhwb3J0IGVudW0gRWNzTWFjaGluZUltYWdlVHlwZSB7XG4gIC8qKlxuICAgKiBUZWxscyBCYXRjaCB0aGF0IHRoaXMgbWFjaGluZSBpbWFnZSBydW5zIG9uIG5vbi1HUFUgaW5zdGFuY2VzXG4gICAqL1xuICBFQ1NfQUwyID0gJ0VDU19BTDInLFxuXG4gIC8qKlxuICAgKiBUZWxscyBCYXRjaCB0aGF0IHRoaXMgbWFjaGluZSBpbWFnZSBydW5zIG9uIEdQVSBpbnN0YW5jZXNcbiAgICovXG4gIEVDU19BTDJfTlZJRElBID0gJ0VDU19BTDJfTlZJRElBJyxcbn1cblxuLyoqXG4gKiBNYXBzIHRoZSBpbWFnZSB0byBpbnN0YW5jZSB0eXBlc1xuICovXG5leHBvcnQgZW51bSBFa3NNYWNoaW5lSW1hZ2VUeXBlIHtcbiAgLyoqXG4gICAqIFRlbGxzIEJhdGNoIHRoYXQgdGhpcyBtYWNoaW5lIGltYWdlIHJ1bnMgb24gbm9uLUdQVSBpbnN0YW5jZXNcbiAgICovXG4gIEVLU19BTDIgPSAnRUtTX0FMMicsXG5cbiAgLyoqXG4gICAqIFRlbGxzIEJhdGNoIHRoYXQgdGhpcyBtYWNoaW5lIGltYWdlIHJ1bnMgb24gR1BVIGluc3RhbmNlc1xuICAgKi9cbiAgRUtTX0FMMl9OVklESUEgPSAnRUtTX0FMMl9OVklESUEnLFxufVxuXG4vKipcbiAqIERldGVybWluZXMgaG93IHRoaXMgY29tcHV0ZSBlbnZpcm9ubWVudCBjaG9vc2VzIGluc3RhbmNlcyB0byBzcGF3blxuICpcbiAqIEBzZWUgaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9ibG9ncy9jb21wdXRlL29wdGltaXppbmctZm9yLWNvc3QtYXZhaWxhYmlsaXR5LWFuZC10aHJvdWdocHV0LWJ5LXNlbGVjdGluZy15b3VyLWF3cy1iYXRjaC1hbGxvY2F0aW9uLXN0cmF0ZWd5L1xuICovXG5leHBvcnQgZW51bSBBbGxvY2F0aW9uU3RyYXRlZ3kge1xuICAvKipcbiAgICogQmF0Y2ggY2hvb3NlcyB0aGUgbG93ZXN0LWNvc3QgaW5zdGFuY2UgdHlwZSB0aGF0IGZpdHMgYWxsIHRoZSBqb2JzIGluIHRoZSBxdWV1ZS5cbiAgICogSWYgaW5zdGFuY2VzIG9mIHRoYXQgdHlwZSBhcmUgbm90IGF2YWlsYWJsZSwgdGhlIHF1ZXVlIHdpbGwgbm90IGNob29zZSBhIG5ldyB0eXBlO1xuICAgKiBpbnN0ZWFkLCBpdCB3aWxsIHdhaXQgZm9yIHRoZSBpbnN0YW5jZSB0byBiZWNvbWUgYXZhaWxhYmxlLlxuICAgKiBUaGlzIGNhbiBzdGFsbCB5b3VyIGBRdWV1ZWAsIHdpdGggeW91ciBjb21wdXRlIGVudmlyb25tZW50IG9ubHkgdXNpbmcgcGFydCBvZiBpdHMgbWF4IGNhcGFjaXR5XG4gICAqIChvciBub25lIGF0IGFsbCkgdW50aWwgdGhlIGBCRVNUX0ZJVGAgaW5zdGFuY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFRoaXMgYWxsb2NhdGlvbiBzdHJhdGVneSBrZWVwcyBjb3N0cyBsb3dlciBidXQgY2FuIGxpbWl0IHNjYWxpbmcuXG4gICAqIGBCRVNUX0ZJVGAgaXNuJ3Qgc3VwcG9ydGVkIHdoZW4gdXBkYXRpbmcgY29tcHV0ZSBlbnZpcm9ubWVudHNcbiAgICovXG4gIEJFU1RfRklUID0gJ0JFU1RfRklUJyxcblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgZGVmYXVsdCBBbGxvY2F0aW9uIFN0cmF0ZWd5IGlmIGBzcG90YCBpcyBgZmFsc2VgIG9yIHVuc3BlY2lmaWVkLlxuICAgKiBUaGlzIHN0cmF0ZWd5IHdpbGwgZXhhbWluZSB0aGUgSm9icyBpbiB0aGUgcXVldWUgYW5kIGNob29zZSB3aGljaGV2ZXIgaW5zdGFuY2UgdHlwZSBtZWV0cyB0aGUgcmVxdWlyZW1lbnRzXG4gICAqIG9mIHRoZSBqb2JzIGluIHRoZSBxdWV1ZSBhbmQgd2l0aCB0aGUgbG93ZXN0IGNvc3QgcGVyIHZDUFUsIGp1c3QgYXMgYEJFU1RfRklUYC5cbiAgICogSG93ZXZlciwgaWYgbm90IGFsbCBvZiB0aGUgY2FwYWNpdHkgY2FuIGJlIGZpbGxlZCB3aXRoIHRoaXMgaW5zdGFuY2UgdHlwZSxcbiAgICogaXQgd2lsbCBjaG9vc2UgYSBuZXcgbmV4dC1iZXN0IGluc3RhbmNlIHR5cGUgdG8gcnVuIGFueSBqb2JzIHRoYXQgY291bGRu4oCZdCBmaXQgaW50byB0aGUgYEJFU1RfRklUYCBjYXBhY2l0eS5cbiAgICogVG8gbWFrZSB0aGUgbW9zdCB1c2Ugb2YgdGhpcyBhbGxvY2F0aW9uIHN0cmF0ZWd5LFxuICAgKiBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgYXMgbWFueSBpbnN0YW5jZSBjbGFzc2VzIGFzIGlzIGZlYXNpYmxlIGZvciB5b3VyIHdvcmtsb2FkLlxuICAgKi9cbiAgQkVTVF9GSVRfUFJPR1JFU1NJVkUgPSAnQkVTVF9GSVRfUFJPR1JFU1NJVkUnLFxuXG4gIC8qKlxuICAgKiBJZiB5b3VyIHdvcmtmbG93IHRvbGVyYXRlcyBpbnRlcnJ1cHRpb25zLCB5b3Ugc2hvdWxkIGVuYWJsZSBgc3BvdGAgb24geW91ciBgQ29tcHV0ZUVudmlyb25tZW50YFxuICAgKiBhbmQgdXNlIGBTUE9UX0NBUEFDSVRZX09QVElNSVpFRGAgKHRoaXMgaXMgdGhlIGRlZmF1bHQgaWYgYHNwb3RgIGlzIGVuYWJsZWQpLlxuICAgKiBUaGlzIHdpbGwgdGVsbCBCYXRjaCB0byBjaG9vc2UgdGhlIGluc3RhbmNlIHR5cGVzIGZyb20gdGhlIG9uZXMgeW914oCZdmUgc3BlY2lmaWVkIHRoYXQgaGF2ZVxuICAgKiB0aGUgbW9zdCBzcG90IGNhcGFjaXR5IGF2YWlsYWJsZSB0byBtaW5pbWl6ZSB0aGUgY2hhbmNlIG9mIGludGVycnVwdGlvbi5cbiAgICogVG8gZ2V0IHRoZSBtb3N0IGJlbmVmaXQgZnJvbSB5b3VyIHNwb3QgaW5zdGFuY2VzLFxuICAgKiB5b3Ugc2hvdWxkIGFsbG93IEJhdGNoIHRvIGNob29zZSBmcm9tIGFzIG1hbnkgZGlmZmVyZW50IGluc3RhbmNlIHR5cGVzIGFzIHBvc3NpYmxlLlxuICAgKi9cbiAgU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRUQgPSAnU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRUQnLFxuXG4gIC8qKlxuICAgKiBUaGUgcHJpY2UgYW5kIGNhcGFjaXR5IG9wdGltaXplZCBhbGxvY2F0aW9uIHN0cmF0ZWd5IGxvb2tzIGF0IGJvdGggcHJpY2UgYW5kIGNhcGFjaXR5XG4gICAqIHRvIHNlbGVjdCB0aGUgU3BvdCBJbnN0YW5jZSBwb29scyB0aGF0IGFyZSB0aGUgbGVhc3QgbGlrZWx5IHRvIGJlIGludGVycnVwdGVkXG4gICAqIGFuZCBoYXZlIHRoZSBsb3dlc3QgcG9zc2libGUgcHJpY2UuXG4gICAqXG4gICAqIFRoZSBCYXRjaCB0ZWFtIHJlY29tbWVuZHMgdGhpcyBvdmVyIGBTUE9UX0NBUEFDSVRZX09QVElNSVpFRGAgaW4gbW9zdCBpbnN0YW5jZXMuXG4gICAqL1xuICBTUE9UX1BSSUNFX0NBUEFDSVRZX09QVElNSVpFRCA9ICdTUE9UX1BSSUNFX0NBUEFDSVRZX09QVElNSVpFRCcsXG59XG5cbi8qKlxuICogUHJvcHMgZm9yIGEgTWFuYWdlZEVjMkVjc0NvbXB1dGVFbnZpcm9ubWVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1hbmFnZWRFYzJFY3NDb21wdXRlRW52aXJvbm1lbnRQcm9wcyBleHRlbmRzIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRQcm9wcyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byB1c2UgYmF0Y2gncyBvcHRpbWFsIGluc3RhbmNlIHR5cGUuXG4gICAqIFRoZSBvcHRpbWFsIGluc3RhbmNlIHR5cGUgaXMgZXF1aXZhbGVudCB0byBhZGRpbmcgdGhlXG4gICAqIEM0LCBNNCwgYW5kIFI0IGluc3RhbmNlIGNsYXNzZXMuIFlvdSBjYW4gc3BlY2lmeSBvdGhlciBpbnN0YW5jZSBjbGFzc2VzXG4gICAqIChvZiB0aGUgc2FtZSBhcmNoaXRlY3R1cmUpIGluIGFkZGl0aW9uIHRvIHRoZSBvcHRpbWFsIGluc3RhbmNlIGNsYXNzZXMuXG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHJlYWRvbmx5IHVzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgd2hpY2ggQU1JcyB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgY2FuIGxhdW5jaC5cbiAgICogSWYgeW91IHNwZWNpZnkgdGhpcyBwcm9wZXJ0eSB3aXRoIG9ubHkgYGltYWdlYCBzcGVjaWZpZWQsIHRoZW4gdGhlXG4gICAqIGBpbWFnZVR5cGVgIHdpbGwgZGVmYXVsdCB0byBgRUNTX0FMMmAuICpJZiB5b3VyIGltYWdlIG5lZWRzIEdQVSByZXNvdXJjZXMsXG4gICAqIHNwZWNpZnkgYEVDU19BTDJfTlZJRElBYDsgb3RoZXJ3aXNlLCB0aGUgaW5zdGFuY2VzIHdpbGwgbm90IGJlIGFibGUgdG8gcHJvcGVybHlcbiAgICogam9pbiB0aGUgQ29tcHV0ZUVudmlyb25tZW50Ki5cbiAgICpcbiAgICogQGRlZmF1bHRcbiAgICogLSBFQ1NfQUwyIGZvciBub24tR1BVIGluc3RhbmNlcywgRUNTX0FMMl9OVklESUEgZm9yIEdQVSBpbnN0YW5jZXNcbiAgICovXG4gIHJlYWRvbmx5IGltYWdlcz86IEVjc01hY2hpbmVJbWFnZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgYWxsb2NhdGlvbiBzdHJhdGVneSB0byB1c2UgaWYgbm90IGVub3VnaCBpbnN0YW5jZXMgb2ZcbiAgICogdGhlIGJlc3QgZml0dGluZyBpbnN0YW5jZSB0eXBlIGNhbiBiZSBhbGxvY2F0ZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gYEJFU1RfRklUX1BST0dSRVNTSVZFYCBpZiBub3QgdXNpbmcgU3BvdCBpbnN0YW5jZXMsXG4gICAqIGBTUE9UX0NBUEFDSVRZX09QVElNSVpFRGAgaWYgdXNpbmcgU3BvdCBpbnN0YW5jZXMuXG4gICAqL1xuICByZWFkb25seSBhbGxvY2F0aW9uU3RyYXRlZ3k/OiBBbGxvY2F0aW9uU3RyYXRlZ3k7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIHBlcmNlbnRhZ2UgdGhhdCBhIFNwb3QgSW5zdGFuY2UgcHJpY2UgY2FuIGJlIHdoZW4gY29tcGFyZWQgd2l0aCB0aGVcbiAgICogT24tRGVtYW5kIHByaWNlIGZvciB0aGF0IGluc3RhbmNlIHR5cGUgYmVmb3JlIGluc3RhbmNlcyBhcmUgbGF1bmNoZWQuXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3VyIG1heGltdW0gcGVyY2VudGFnZSBpcyAyMCUsIHRoZSBTcG90IHByaWNlIG11c3QgYmVcbiAgICogbGVzcyB0aGFuIDIwJSBvZiB0aGUgY3VycmVudCBPbi1EZW1hbmQgcHJpY2UgZm9yIHRoYXQgSW5zdGFuY2UuXG4gICAqIFlvdSBhbHdheXMgcGF5IHRoZSBsb3dlc3QgbWFya2V0IHByaWNlIGFuZCBuZXZlciBtb3JlIHRoYW4geW91ciBtYXhpbXVtIHBlcmNlbnRhZ2UuXG4gICAqIEZvciBtb3N0IHVzZSBjYXNlcywgQmF0Y2ggcmVjb21tZW5kcyBsZWF2aW5nIHRoaXMgZmllbGQgZW1wdHkuXG4gICAqXG4gICAqIEltcGxpZXMgYHNwb3QgPT0gdHJ1ZWAgaWYgc2V0XG4gICAqXG4gICAqIEBkZWZhdWx0IDEwMCVcbiAgICovXG4gIHJlYWRvbmx5IHNwb3RCaWRQZXJjZW50YWdlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgc2VydmljZS1saW5rZWQgcm9sZSB0aGF0IFNwb3QgRmxlZXQgbmVlZHMgdG8gbGF1bmNoIGluc3RhbmNlcyBvbiB5b3VyIGJlaGFsZi5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmF0Y2gvbGF0ZXN0L3VzZXJndWlkZS9zcG90X2ZsZWV0X0lBTV9yb2xlLmh0bWxcbiAgICpcbiAgICogQGRlZmF1bHQgLSBhIG5ldyByb2xlIHdpbGwgYmUgY3JlYXRlZFxuICAgKi9cbiAgcmVhZG9ubHkgc3BvdEZsZWV0Um9sZT86IGlhbS5JUm9sZTtcblxuICAvKipcbiAgICogVGhlIGluc3RhbmNlIHR5cGVzIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IGNhbiBsYXVuY2guXG4gICAqIFdoaWNoIG9uZSBpcyBjaG9zZW4gZGVwZW5kcyBvbiB0aGUgYEFsbG9jYXRpb25TdHJhdGVneWAgdXNlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSB0aGUgaW5zdGFuY2VzIEJhdGNoIGNvbnNpZGVycyB3aWxsIGJlIHVzZWQgKGN1cnJlbnRseSBDNCwgTTQsIGFuZCBSNClcbiAgICovXG4gIHJlYWRvbmx5IGluc3RhbmNlVHlwZXM/OiBlYzIuSW5zdGFuY2VUeXBlW107XG5cbiAgLyoqXG4gICAqIFRoZSBpbnN0YW5jZSBjbGFzc2VzIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IGNhbiBsYXVuY2guXG4gICAqIFdoaWNoIG9uZSBpcyBjaG9zZW4gZGVwZW5kcyBvbiB0aGUgYEFsbG9jYXRpb25TdHJhdGVneWAgdXNlZC5cbiAgICogQmF0Y2ggd2lsbCBhdXRvbWF0aWNhbGx5IGNob29zZSB0aGUgaW5zdGFuY2Ugc2l6ZS5cbiAgICpcbiAgICogQGRlZmF1bHQgLSB0aGUgaW5zdGFuY2VzIEJhdGNoIGNvbnNpZGVycyB3aWxsIGJlIHVzZWQgKGN1cnJlbnRseSBDNCwgTTQsIGFuZCBSNClcbiAgICovXG4gIHJlYWRvbmx5IGluc3RhbmNlQ2xhc3Nlcz86IGVjMi5JbnN0YW5jZUNsYXNzW107XG5cbiAgLyoqXG4gICAqIFRoZSBleGVjdXRpb24gUm9sZSB0aGF0IGluc3RhbmNlcyBsYXVuY2hlZCBieSB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgd2lsbCB1c2UuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gYSByb2xlIHdpbGwgYmUgY3JlYXRlZFxuICAgKi9cbiAgcmVhZG9ubHkgaW5zdGFuY2VSb2xlPzogaWFtLklSb2xlO1xuXG4gIC8qKlxuICAgKiBUaGUgTGF1bmNoIFRlbXBsYXRlIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50XG4gICAqIHdpbGwgdXNlIHRvIHByb3Zpc2lvbiBFQzIgSW5zdGFuY2VzLlxuICAgKlxuICAgKiAqTm90ZSo6IGlmIGBzZWN1cml0eUdyb3Vwc2AgaXMgc3BlY2lmaWVkIG9uIGJvdGggeW91clxuICAgKiBsYXVuY2ggdGVtcGxhdGUgYW5kIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCwgKip0aGVcbiAgICogYHNlY3VyaXR5R3JvdXBgcyBvbiB0aGUgQ29tcHV0ZSBFbnZpcm9ubWVudCBvdmVycmlkZSB0aGVcbiAgICogb25lcyBvbiB0aGUgbGF1bmNoIHRlbXBsYXRlLlxuICAgKlxuICAgKiBAZGVmYXVsdCBubyBsYXVuY2ggdGVtcGxhdGVcbiAgICovXG4gIHJlYWRvbmx5IGxhdW5jaFRlbXBsYXRlPzogZWMyLklMYXVuY2hUZW1wbGF0ZTtcblxuICAvKipcbiAgICogVGhlIG1pbmltdW0gdkNQVXMgdGhhdCBhbiBlbnZpcm9ubWVudCBzaG91bGQgbWFpbnRhaW4sXG4gICAqIGV2ZW4gaWYgdGhlIGNvbXB1dGUgZW52aXJvbm1lbnQgaXMgRElTQUJMRUQuXG4gICAqXG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIHJlYWRvbmx5IG1pbnZDcHVzPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgRUMyIHBsYWNlbWVudCBncm91cCB0byBhc3NvY2lhdGUgd2l0aCB5b3VyIGNvbXB1dGUgcmVzb3VyY2VzLlxuICAgKiBJZiB5b3UgaW50ZW5kIHRvIHN1Ym1pdCBtdWx0aS1ub2RlIHBhcmFsbGVsIGpvYnMgdG8gdGhpcyBDb21wdXRlIEVudmlyb25tZW50LFxuICAgKiB5b3Ugc2hvdWxkIGNvbnNpZGVyIGNyZWF0aW5nIGEgY2x1c3RlciBwbGFjZW1lbnQgZ3JvdXAgYW5kIGFzc29jaWF0ZSBpdCB3aXRoIHlvdXIgY29tcHV0ZSByZXNvdXJjZXMuXG4gICAqIFRoaXMga2VlcHMgeW91ciBtdWx0aS1ub2RlIHBhcmFsbGVsIGpvYiBvbiBhIGxvZ2ljYWwgZ3JvdXBpbmcgb2YgaW5zdGFuY2VzXG4gICAqIHdpdGhpbiBhIHNpbmdsZSBBdmFpbGFiaWxpdHkgWm9uZSB3aXRoIGhpZ2ggbmV0d29yayBmbG93IHBvdGVudGlhbC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTRUMyL2xhdGVzdC9Vc2VyR3VpZGUvcGxhY2VtZW50LWdyb3Vwcy5odG1sXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gbm8gcGxhY2VtZW50IGdyb3VwXG4gICAqL1xuICByZWFkb25seSBwbGFjZW1lbnRHcm91cD86IGVjMi5JUGxhY2VtZW50R3JvdXA7XG59XG5cbi8qKlxuICogQSBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50IHRoYXQgdXNlcyBFQ1Mgb3JjaGVzdHJhdGlvbiBvbiBFQzIgaW5zdGFuY2VzLlxuICpcbiAqIEByZXNvdXJjZSBBV1M6OkJhdGNoOjpDb21wdXRlRW52aXJvbm1lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIE1hbmFnZWRFYzJFY3NDb21wdXRlRW52aXJvbm1lbnQgZXh0ZW5kcyBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50QmFzZSBpbXBsZW1lbnRzIElNYW5hZ2VkRWMyRWNzQ29tcHV0ZUVudmlyb25tZW50IHtcbiAgLyoqXG4gICAqIHJlZmVyIHRvIGFuIGV4aXN0aW5nIENvbXB1dGVFbnZpcm9ubWVudCBieSBpdHMgYXJuLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tTWFuYWdlZEVjMkVjc0NvbXB1dGVFbnZpcm9ubWVudEFybihcbiAgICBzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nLCBtYW5hZ2VkRWMyRWNzQ29tcHV0ZUVudmlyb25tZW50QXJuOiBzdHJpbmcsXG4gICk6IElNYW5hZ2VkRWMyRWNzQ29tcHV0ZUVudmlyb25tZW50IHtcbiAgICBjb25zdCBzdGFjayA9IFN0YWNrLm9mKHNjb3BlKTtcbiAgICBjb25zdCBjb21wdXRlRW52aXJvbm1lbnROYW1lID0gc3RhY2suc3BsaXRBcm4obWFuYWdlZEVjMkVjc0NvbXB1dGVFbnZpcm9ubWVudEFybiwgQXJuRm9ybWF0LlNMQVNIX1JFU09VUkNFX05BTUUpLnJlc291cmNlTmFtZSE7XG5cbiAgICBjbGFzcyBJbXBvcnQgZXh0ZW5kcyBSZXNvdXJjZSBpbXBsZW1lbnRzIElNYW5hZ2VkRWMyRWNzQ29tcHV0ZUVudmlyb25tZW50IHtcbiAgICAgIHB1YmxpYyByZWFkb25seSBjb21wdXRlRW52aXJvbm1lbnRBcm4gPSBtYW5hZ2VkRWMyRWNzQ29tcHV0ZUVudmlyb25tZW50QXJuO1xuICAgICAgcHVibGljIHJlYWRvbmx5IGNvbXB1dGVFbnZpcm9ubWVudE5hbWUgPSBjb21wdXRlRW52aXJvbm1lbnROYW1lO1xuICAgICAgcHVibGljIHJlYWRvbmx5IGVuYWJsZWQgPSB0cnVlO1xuICAgICAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlQ2xhc3NlcyA9IFtdO1xuICAgICAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlVHlwZXMgPSBbXTtcbiAgICAgIHB1YmxpYyByZWFkb25seSBtYXh2Q3B1cyA9IDE7XG4gICAgICBwdWJsaWMgcmVhZG9ubHkgY29ubmVjdGlvbnMgPSB7IH0gYXMgYW55O1xuICAgICAgcHVibGljIHJlYWRvbmx5IHNlY3VyaXR5R3JvdXBzID0gW107XG4gICAgICBwdWJsaWMgcmVhZG9ubHkgdGFnczogVGFnTWFuYWdlciA9IG5ldyBUYWdNYW5hZ2VyKFRhZ1R5cGUuTUFQLCAnQVdTOjpCYXRjaDo6Q29tcHV0ZUVudmlyb25tZW50Jyk7XG5cbiAgICAgIHB1YmxpYyBhZGRJbnN0YW5jZUNsYXNzKF9pbnN0YW5jZUNsYXNzOiBlYzIuSW5zdGFuY2VDbGFzcyk6IHZvaWQge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCBhZGQgaW5zdGFuY2UgY2xhc3MgdG8gaW1wb3J0ZWQgQ29tcHV0ZUVudmlyb25tZW50ICcke2lkfSdgKTtcbiAgICAgIH1cbiAgICAgIHB1YmxpYyBhZGRJbnN0YW5jZVR5cGUoX2luc3RhbmNlVHlwZTogZWMyLkluc3RhbmNlVHlwZSk6IHZvaWQge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCBhZGQgaW5zdGFuY2UgdHlwZSB0byBpbXBvcnRlZCBDb21wdXRlRW52aXJvbm1lbnQgJyR7aWR9J2ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgSW1wb3J0KHNjb3BlLCBpZCk7XG4gIH1cbiAgcHVibGljIHJlYWRvbmx5IGNvbXB1dGVFbnZpcm9ubWVudEFybjogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgY29tcHV0ZUVudmlyb25tZW50TmFtZTogc3RyaW5nO1xuXG4gIHB1YmxpYyByZWFkb25seSBpbWFnZXM/OiBFY3NNYWNoaW5lSW1hZ2VbXTtcbiAgcHVibGljIHJlYWRvbmx5IGFsbG9jYXRpb25TdHJhdGVneT86IEFsbG9jYXRpb25TdHJhdGVneTtcbiAgcHVibGljIHJlYWRvbmx5IHNwb3RCaWRQZXJjZW50YWdlPzogbnVtYmVyO1xuICBwdWJsaWMgcmVhZG9ubHkgc3BvdEZsZWV0Um9sZT86IGlhbS5JUm9sZTtcbiAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlVHlwZXM6IGVjMi5JbnN0YW5jZVR5cGVbXTtcbiAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlQ2xhc3NlczogZWMyLkluc3RhbmNlQ2xhc3NbXTtcbiAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlUm9sZT86IGlhbS5JUm9sZTtcbiAgcHVibGljIHJlYWRvbmx5IGxhdW5jaFRlbXBsYXRlPzogZWMyLklMYXVuY2hUZW1wbGF0ZTtcbiAgcHVibGljIHJlYWRvbmx5IG1pbnZDcHVzPzogbnVtYmVyO1xuICBwdWJsaWMgcmVhZG9ubHkgcGxhY2VtZW50R3JvdXA/OiBlYzIuSVBsYWNlbWVudEdyb3VwO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaW5zdGFuY2VQcm9maWxlOiBpYW0uQ2ZuSW5zdGFuY2VQcm9maWxlO1xuXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBNYW5hZ2VkRWMyRWNzQ29tcHV0ZUVudmlyb25tZW50UHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcblxuICAgIHRoaXMuaW1hZ2VzID0gcHJvcHMuaW1hZ2VzO1xuICAgIHRoaXMuYWxsb2NhdGlvblN0cmF0ZWd5ID0gZGV0ZXJtaW5lQWxsb2NhdGlvblN0cmF0ZWd5KGlkLCBwcm9wcy5hbGxvY2F0aW9uU3RyYXRlZ3ksIHRoaXMuc3BvdCk7XG4gICAgdGhpcy5zcG90QmlkUGVyY2VudGFnZSA9IHByb3BzLnNwb3RCaWRQZXJjZW50YWdlO1xuXG4gICAgdGhpcy5zcG90RmxlZXRSb2xlID0gcHJvcHMuc3BvdEZsZWV0Um9sZSA/PyAoXG4gICAgICB0aGlzLnNwb3QgJiYgdGhpcy5hbGxvY2F0aW9uU3RyYXRlZ3kgPT09IEFsbG9jYXRpb25TdHJhdGVneS5CRVNUX0ZJVFxuICAgICAgICA/IGNyZWF0ZVNwb3RGbGVldFJvbGUodGhpcylcbiAgICAgICAgOiB1bmRlZmluZWRcbiAgICApO1xuXG4gICAgdGhpcy5pbnN0YW5jZVR5cGVzID0gcHJvcHMuaW5zdGFuY2VUeXBlcyA/PyBbXTtcbiAgICB0aGlzLmluc3RhbmNlQ2xhc3NlcyA9IHByb3BzLmluc3RhbmNlQ2xhc3NlcyA/PyBbXTtcblxuICAgIGNvbnN0IHsgaW5zdGFuY2VSb2xlLCBpbnN0YW5jZVByb2ZpbGUgfSA9IGNyZWF0ZUluc3RhbmNlUm9sZUFuZFByb2ZpbGUodGhpcywgcHJvcHMuaW5zdGFuY2VSb2xlKTtcbiAgICB0aGlzLmluc3RhbmNlUm9sZSA9IGluc3RhbmNlUm9sZTtcbiAgICB0aGlzLmluc3RhbmNlUHJvZmlsZSA9IGluc3RhbmNlUHJvZmlsZTtcblxuICAgIHRoaXMubGF1bmNoVGVtcGxhdGUgPSBwcm9wcy5sYXVuY2hUZW1wbGF0ZTtcbiAgICB0aGlzLm1pbnZDcHVzID0gcHJvcHMubWludkNwdXMgPz8gREVGQVVMVF9NSU5fVkNQVVM7XG4gICAgdGhpcy5wbGFjZW1lbnRHcm91cCA9IHByb3BzLnBsYWNlbWVudEdyb3VwO1xuXG4gICAgdmFsaWRhdGVWQ3B1cyhpZCwgdGhpcy5taW52Q3B1cywgdGhpcy5tYXh2Q3B1cyk7XG4gICAgdmFsaWRhdGVTcG90Q29uZmlnKGlkLCB0aGlzLnNwb3QsIHRoaXMuc3BvdEJpZFBlcmNlbnRhZ2UsIHRoaXMuc3BvdEZsZWV0Um9sZSk7XG5cbiAgICBjb25zdCB7IHN1Ym5ldElkcyB9ID0gcHJvcHMudnBjLnNlbGVjdFN1Ym5ldHMocHJvcHMudnBjU3VibmV0cyk7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBuZXcgQ2ZuQ29tcHV0ZUVudmlyb25tZW50KHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgIC4uLmJhc2VNYW5hZ2VkUmVzb3VyY2VQcm9wZXJ0aWVzKHRoaXMsIHN1Ym5ldElkcyksXG4gICAgICBjb21wdXRlRW52aXJvbm1lbnROYW1lOiBwcm9wcy5jb21wdXRlRW52aXJvbm1lbnROYW1lLFxuICAgICAgY29tcHV0ZVJlc291cmNlczoge1xuICAgICAgICAuLi5iYXNlTWFuYWdlZFJlc291cmNlUHJvcGVydGllcyh0aGlzLCBzdWJuZXRJZHMpLmNvbXB1dGVSZXNvdXJjZXMgYXMgQ2ZuQ29tcHV0ZUVudmlyb25tZW50LkNvbXB1dGVSZXNvdXJjZXNQcm9wZXJ0eSxcbiAgICAgICAgbWludkNwdXM6IHRoaXMubWludkNwdXMsXG4gICAgICAgIGluc3RhbmNlUm9sZTogdGhpcy5pbnN0YW5jZVByb2ZpbGUuYXR0ckFybiwgLy8gdGhpcyBpcyBub3QgYSB0eXBvOyB0aGlzIHByb3BlcnR5IGFjdHVhbGx5IHRha2VzIGEgcHJvZmlsZSwgbm90IGEgc3RhbmRhcmQgcm9sZVxuICAgICAgICBpbnN0YW5jZVR5cGVzOiBMYXp5Lmxpc3Qoe1xuICAgICAgICAgIHByb2R1Y2U6ICgpID0+IHJlbmRlckluc3RhbmNlcyh0aGlzLmluc3RhbmNlVHlwZXMsIHRoaXMuaW5zdGFuY2VDbGFzc2VzLCBwcm9wcy51c2VPcHRpbWFsSW5zdGFuY2VDbGFzc2VzKSxcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IHRoaXMuc3BvdCA/ICdTUE9UJyA6ICdFQzInLFxuICAgICAgICBzcG90SWFtRmxlZXRSb2xlOiB0aGlzLnNwb3RGbGVldFJvbGU/LnJvbGVBcm4sXG4gICAgICAgIGFsbG9jYXRpb25TdHJhdGVneTogdGhpcy5hbGxvY2F0aW9uU3RyYXRlZ3ksXG4gICAgICAgIGJpZFBlcmNlbnRhZ2U6IHRoaXMuc3BvdEJpZFBlcmNlbnRhZ2UsXG4gICAgICAgIGxhdW5jaFRlbXBsYXRlOiB0aGlzLmxhdW5jaFRlbXBsYXRlID8ge1xuICAgICAgICAgIGxhdW5jaFRlbXBsYXRlSWQ6IHRoaXMubGF1bmNoVGVtcGxhdGU/LmxhdW5jaFRlbXBsYXRlSWQsXG4gICAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICAgIGVjMkNvbmZpZ3VyYXRpb246IHRoaXMuaW1hZ2VzPy5tYXAoKGltYWdlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGltYWdlSWRPdmVycmlkZTogaW1hZ2UuaW1hZ2U/LmdldEltYWdlKHRoaXMpLmltYWdlSWQsXG4gICAgICAgICAgICBpbWFnZVR5cGU6IGltYWdlLmltYWdlVHlwZSA/PyBFY3NNYWNoaW5lSW1hZ2VUeXBlLkVDU19BTDIsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIHBsYWNlbWVudEdyb3VwOiB0aGlzLnBsYWNlbWVudEdyb3VwPy5wbGFjZW1lbnRHcm91cE5hbWUsXG4gICAgICAgIHRhZ3M6IHRoaXMudGFncy5yZW5kZXJlZFRhZ3MgYXMgYW55LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuY29tcHV0ZUVudmlyb25tZW50TmFtZSA9IHRoaXMuZ2V0UmVzb3VyY2VOYW1lQXR0cmlidXRlKHJlc291cmNlLnJlZik7XG4gICAgdGhpcy5jb21wdXRlRW52aXJvbm1lbnRBcm4gPSB0aGlzLmdldFJlc291cmNlQXJuQXR0cmlidXRlKHJlc291cmNlLmF0dHJDb21wdXRlRW52aXJvbm1lbnRBcm4sIHtcbiAgICAgIHNlcnZpY2U6ICdiYXRjaCcsXG4gICAgICByZXNvdXJjZTogJ2NvbXB1dGUtZW52aXJvbm1lbnQnLFxuICAgICAgcmVzb3VyY2VOYW1lOiB0aGlzLnBoeXNpY2FsTmFtZSxcbiAgICB9KTtcblxuICAgIHRoaXMubm9kZS5hZGRWYWxpZGF0aW9uKHsgdmFsaWRhdGU6ICgpID0+IHZhbGlkYXRlSW5zdGFuY2VzKHRoaXMuaW5zdGFuY2VUeXBlcywgdGhpcy5pbnN0YW5jZUNsYXNzZXMsIHByb3BzLnVzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXMpIH0pO1xuICB9XG5cbiAgcHVibGljIGFkZEluc3RhbmNlVHlwZShpbnN0YW5jZVR5cGU6IGVjMi5JbnN0YW5jZVR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLmluc3RhbmNlVHlwZXMucHVzaChpbnN0YW5jZVR5cGUpO1xuICB9XG5cbiAgcHVibGljIGFkZEluc3RhbmNlQ2xhc3MoaW5zdGFuY2VDbGFzczogZWMyLkluc3RhbmNlQ2xhc3MpOiB2b2lkIHtcbiAgICB0aGlzLmluc3RhbmNlQ2xhc3Nlcy5wdXNoKGluc3RhbmNlQ2xhc3MpO1xuICB9XG59XG5cbi8qKlxuICogQSBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50IHRoYXQgdXNlcyBFS1Mgb3JjaGVzdHJhdGlvbiBvbiBFQzIgaW5zdGFuY2VzLlxuICovXG5pbnRlcmZhY2UgSU1hbmFnZWRFYzJFa3NDb21wdXRlRW52aXJvbm1lbnQgZXh0ZW5kcyBJTWFuYWdlZENvbXB1dGVFbnZpcm9ubWVudCB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZXNwYWNlIG9mIHRoZSBDbHVzdGVyXG4gICAqXG4gICAqIENhbm5vdCBiZSAnZGVmYXVsdCcsIHN0YXJ0IHdpdGggJ2t1YmUtJywgb3IgYmUgbG9uZ2VyIHRoYW4gNjQgY2hhcmFjdGVycy5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2t1YmVybmV0ZXMuaW8vZG9jcy9jb25jZXB0cy9vdmVydmlldy93b3JraW5nLXdpdGgtb2JqZWN0cy9uYW1lc3BhY2VzL1xuICAgKi9cbiAgcmVhZG9ubHkga3ViZXJuZXRlc05hbWVzcGFjZT86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGNsdXN0ZXIgdGhhdCBiYWNrcyB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQuIFJlcXVpcmVkXG4gICAqIGZvciBDb21wdXRlIEVudmlyb25tZW50cyBydW5uaW5nIEt1YmVybmV0ZXMgam9icy5cbiAgICpcbiAgICogUGxlYXNlIGVuc3VyZSB0aGF0IHlvdSBoYXZlIGZvbGxvd2VkIHRoZSBzdGVwcyBhdFxuICAgKlxuICAgKiBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmF0Y2gvbGF0ZXN0L3VzZXJndWlkZS9nZXR0aW5nLXN0YXJ0ZWQtZWtzLmh0bWxcbiAgICpcbiAgICogYmVmb3JlIGF0dGVtcHRpbmcgdG8gZGVwbG95IGEgYE1hbmFnZWRFYzJFa3NDb21wdXRlRW52aXJvbm1lbnRgIHRoYXQgdXNlcyB0aGlzIGNsdXN0ZXIuXG4gICAqIElmIHlvdSBkbyBub3QgZm9sbG93IHRoZSBzdGVwcyBpbiB0aGUgbGluaywgdGhlIGRlcGxveW1lbnQgZmFpbCB3aXRoIGEgbWVzc2FnZSB0aGF0IHRoZVxuICAgKiBjb21wdXRlIGVudmlyb25tZW50IGRpZCBub3Qgc3RhYmlsaXplLlxuICAgKi9cbiAgcmVhZG9ubHkgZWtzQ2x1c3RlcjogZWtzLklDbHVzdGVyO1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgd2hpY2ggQU1JcyB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgY2FuIGxhdW5jaC5cbiAgICpcbiAgICogQGRlZmF1bHRcbiAgICogRUtTX0FMMiBmb3Igbm9uLUdQVSBpbnN0YW5jZXMsIEVLU19BTDJfTlZJRElBIGZvciBHUFUgaW5zdGFuY2VzLFxuICAgKi9cbiAgcmVhZG9ubHkgaW1hZ2VzPzogRWtzTWFjaGluZUltYWdlW107XG5cbiAgLyoqXG4gICAqIFRoZSBhbGxvY2F0aW9uIHN0cmF0ZWd5IHRvIHVzZSBpZiBub3QgZW5vdWdoIGluc3RhbmNlcyBvZlxuICAgKiB0aGUgYmVzdCBmaXR0aW5nIGluc3RhbmNlIHR5cGUgY2FuIGJlIGFsbG9jYXRlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBgQkVTVF9GSVRfUFJPR1JFU1NJVkVgIGlmIG5vdCB1c2luZyBTcG90IGluc3RhbmNlcyxcbiAgICogYFNQT1RfQ0FQQUNJVFlfT1BUSU1JWkVEYCBpZiB1c2luZyBTcG90IGluc3RhbmNlcy5cbiAgICovXG4gIHJlYWRvbmx5IGFsbG9jYXRpb25TdHJhdGVneT86IEFsbG9jYXRpb25TdHJhdGVneTtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gcGVyY2VudGFnZSB0aGF0IGEgU3BvdCBJbnN0YW5jZSBwcmljZSBjYW4gYmUgd2hlbiBjb21wYXJlZCB3aXRoIHRoZVxuICAgKiBPbi1EZW1hbmQgcHJpY2UgZm9yIHRoYXQgaW5zdGFuY2UgdHlwZSBiZWZvcmUgaW5zdGFuY2VzIGFyZSBsYXVuY2hlZC5cbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdXIgbWF4aW11bSBwZXJjZW50YWdlIGlzIDIwJSwgdGhlIFNwb3QgcHJpY2UgbXVzdCBiZVxuICAgKiBsZXNzIHRoYW4gMjAlIG9mIHRoZSBjdXJyZW50IE9uLURlbWFuZCBwcmljZSBmb3IgdGhhdCBJbnN0YW5jZS5cbiAgICogWW91IGFsd2F5cyBwYXkgdGhlIGxvd2VzdCBtYXJrZXQgcHJpY2UgYW5kIG5ldmVyIG1vcmUgdGhhbiB5b3VyIG1heGltdW0gcGVyY2VudGFnZS5cbiAgICogRm9yIG1vc3QgdXNlIGNhc2VzLCBCYXRjaCByZWNvbW1lbmRzIGxlYXZpbmcgdGhpcyBmaWVsZCBlbXB0eS5cbiAgICpcbiAgICogSW1wbGllcyBgc3BvdCA9PSB0cnVlYCBpZiBzZXRcbiAgICpcbiAgICogQGRlZmF1bHQgLSAxMDAlXG4gICAqL1xuICByZWFkb25seSBzcG90QmlkUGVyY2VudGFnZT86IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIGluc3RhbmNlIHR5cGVzIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IGNhbiBsYXVuY2guXG4gICAqIFdoaWNoIG9uZSBpcyBjaG9zZW4gZGVwZW5kcyBvbiB0aGUgYEFsbG9jYXRpb25TdHJhdGVneWAgdXNlZC5cbiAgICovXG4gIHJlYWRvbmx5IGluc3RhbmNlVHlwZXM6IGVjMi5JbnN0YW5jZVR5cGVbXTtcblxuICAvKipcbiAgICogVGhlIGluc3RhbmNlIHR5cGVzIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IGNhbiBsYXVuY2guXG4gICAqIFdoaWNoIG9uZSBpcyBjaG9zZW4gZGVwZW5kcyBvbiB0aGUgYEFsbG9jYXRpb25TdHJhdGVneWAgdXNlZC5cbiAgICovXG4gIHJlYWRvbmx5IGluc3RhbmNlQ2xhc3NlczogZWMyLkluc3RhbmNlQ2xhc3NbXTtcblxuICAvKipcbiAgICogVGhlIGV4ZWN1dGlvbiBSb2xlIHRoYXQgaW5zdGFuY2VzIGxhdW5jaGVkIGJ5IHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCB3aWxsIHVzZS5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBhIHJvbGUgd2lsbCBiZSBjcmVhdGVkXG4gICAqL1xuICByZWFkb25seSBpbnN0YW5jZVJvbGU/OiBpYW0uSVJvbGU7XG5cbiAgLyoqXG4gICAqIFRoZSBMYXVuY2ggVGVtcGxhdGUgdGhhdCB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnRcbiAgICogd2lsbCB1c2UgdG8gcHJvdmlzaW9uIEVDMiBJbnN0YW5jZXMuXG4gICAqXG4gICAqICpOb3RlKjogaWYgYHNlY3VyaXR5R3JvdXBzYCBpcyBzcGVjaWZpZWQgb24gYm90aCB5b3VyXG4gICAqIGxhdW5jaCB0ZW1wbGF0ZSBhbmQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50LCAqKnRoZVxuICAgKiBgc2VjdXJpdHlHcm91cGBzIG9uIHRoZSBDb21wdXRlIEVudmlyb25tZW50IG92ZXJyaWRlIHRoZVxuICAgKiBvbmVzIG9uIHRoZSBsYXVuY2ggdGVtcGxhdGUuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gbm8gbGF1bmNoIHRlbXBsYXRlXG4gICAqL1xuICByZWFkb25seSBsYXVuY2hUZW1wbGF0ZT86IGVjMi5JTGF1bmNoVGVtcGxhdGU7XG5cbiAgLyoqXG4gICAqIFRoZSBtaW5pbXVtIHZDUFVzIHRoYXQgYW4gZW52aXJvbm1lbnQgc2hvdWxkIG1haW50YWluLFxuICAgKiBldmVuIGlmIHRoZSBjb21wdXRlIGVudmlyb25tZW50IGlzIERJU0FCTEVELlxuICAgKlxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICByZWFkb25seSBtaW52Q3B1cz86IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIEVDMiBwbGFjZW1lbnQgZ3JvdXAgdG8gYXNzb2NpYXRlIHdpdGggeW91ciBjb21wdXRlIHJlc291cmNlcy5cbiAgICogSWYgeW91IGludGVuZCB0byBzdWJtaXQgbXVsdGktbm9kZSBwYXJhbGxlbCBqb2JzIHRvIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCxcbiAgICogeW91IHNob3VsZCBjb25zaWRlciBjcmVhdGluZyBhIGNsdXN0ZXIgcGxhY2VtZW50IGdyb3VwIGFuZCBhc3NvY2lhdGUgaXQgd2l0aCB5b3VyIGNvbXB1dGUgcmVzb3VyY2VzLlxuICAgKiBUaGlzIGtlZXBzIHlvdXIgbXVsdGktbm9kZSBwYXJhbGxlbCBqb2Igb24gYSBsb2dpY2FsIGdyb3VwaW5nIG9mIGluc3RhbmNlc1xuICAgKiB3aXRoaW4gYSBzaW5nbGUgQXZhaWxhYmlsaXR5IFpvbmUgd2l0aCBoaWdoIG5ldHdvcmsgZmxvdyBwb3RlbnRpYWwuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0FXU0VDMi9sYXRlc3QvVXNlckd1aWRlL3BsYWNlbWVudC1ncm91cHMuaHRtbFxuICAgKlxuICAgKiBAZGVmYXVsdCAtIG5vIHBsYWNlbWVudCBncm91cFxuICAgKi9cbiAgcmVhZG9ubHkgcGxhY2VtZW50R3JvdXA/OiBlYzIuSVBsYWNlbWVudEdyb3VwO1xuXG4gIC8qKlxuICAgKiBBZGQgYW4gaW5zdGFuY2UgdHlwZSB0byB0aGlzIGNvbXB1dGUgZW52aXJvbm1lbnRcbiAgICovXG4gIGFkZEluc3RhbmNlVHlwZShpbnN0YW5jZVR5cGU6IGVjMi5JbnN0YW5jZVR5cGUpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBBZGQgYW4gaW5zdGFuY2UgY2xhc3MgdG8gdGhpcyBjb21wdXRlIGVudmlyb25tZW50XG4gICAqL1xuICBhZGRJbnN0YW5jZUNsYXNzKGluc3RhbmNlQ2xhc3M6IGVjMi5JbnN0YW5jZUNsYXNzKTogdm9pZDtcbn1cblxuLyoqXG4gKiBQcm9wcyBmb3IgYSBNYW5hZ2VkRWMyRWtzQ29tcHV0ZUVudmlyb25tZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWFuYWdlZEVjMkVrc0NvbXB1dGVFbnZpcm9ubWVudFByb3BzIGV4dGVuZHMgTWFuYWdlZENvbXB1dGVFbnZpcm9ubWVudFByb3BzIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lc3BhY2Ugb2YgdGhlIENsdXN0ZXJcbiAgICovXG4gIHJlYWRvbmx5IGt1YmVybmV0ZXNOYW1lc3BhY2U6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGNsdXN0ZXIgdGhhdCBiYWNrcyB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQuIFJlcXVpcmVkXG4gICAqIGZvciBDb21wdXRlIEVudmlyb25tZW50cyBydW5uaW5nIEt1YmVybmV0ZXMgam9icy5cbiAgICpcbiAgICogUGxlYXNlIGVuc3VyZSB0aGF0IHlvdSBoYXZlIGZvbGxvd2VkIHRoZSBzdGVwcyBhdFxuICAgKlxuICAgKiBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vYmF0Y2gvbGF0ZXN0L3VzZXJndWlkZS9nZXR0aW5nLXN0YXJ0ZWQtZWtzLmh0bWxcbiAgICpcbiAgICogYmVmb3JlIGF0dGVtcHRpbmcgdG8gZGVwbG95IGEgYE1hbmFnZWRFYzJFa3NDb21wdXRlRW52aXJvbm1lbnRgIHRoYXQgdXNlcyB0aGlzIGNsdXN0ZXIuXG4gICAqIElmIHlvdSBkbyBub3QgZm9sbG93IHRoZSBzdGVwcyBpbiB0aGUgbGluaywgdGhlIGRlcGxveW1lbnQgZmFpbCB3aXRoIGEgbWVzc2FnZSB0aGF0IHRoZVxuICAgKiBjb21wdXRlIGVudmlyb25tZW50IGRpZCBub3Qgc3RhYmlsaXplLlxuICAgKi9cbiAgcmVhZG9ubHkgZWtzQ2x1c3RlcjogZWtzLklDbHVzdGVyO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byB1c2UgYmF0Y2gncyBvcHRpbWFsIGluc3RhbmNlIHR5cGUuXG4gICAqIFRoZSBvcHRpbWFsIGluc3RhbmNlIHR5cGUgaXMgZXF1aXZhbGVudCB0byBhZGRpbmcgdGhlXG4gICAqIEM0LCBNNCwgYW5kIFI0IGluc3RhbmNlIGNsYXNzZXMuIFlvdSBjYW4gc3BlY2lmeSBvdGhlciBpbnN0YW5jZSBjbGFzc2VzXG4gICAqIChvZiB0aGUgc2FtZSBhcmNoaXRlY3R1cmUpIGluIGFkZGl0aW9uIHRvIHRoZSBvcHRpbWFsIGluc3RhbmNlIGNsYXNzZXMuXG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHJlYWRvbmx5IHVzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgd2hpY2ggQU1JcyB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgY2FuIGxhdW5jaC5cbiAgICpcbiAgICogQGRlZmF1bHRcbiAgICogSWYgYGltYWdlS3ViZXJuZXRlc1ZlcnNpb25gIGlzIHNwZWNpZmllZCxcbiAgICogLSBFS1NfQUwyIGZvciBub24tR1BVIGluc3RhbmNlcywgRUtTX0FMMl9OVklESUEgZm9yIEdQVSBpbnN0YW5jZXMsXG4gICAqIE90aGVyd2lzZSxcbiAgICogLSBFQ1NfQUwyIGZvciBub24tR1BVIGluc3RhbmNlcywgRUNTX0FMMl9OVklESUEgZm9yIEdQVSBpbnN0YW5jZXMsXG4gICAqL1xuICByZWFkb25seSBpbWFnZXM/OiBFa3NNYWNoaW5lSW1hZ2VbXTtcblxuICAvKipcbiAgICogVGhlIGFsbG9jYXRpb24gc3RyYXRlZ3kgdG8gdXNlIGlmIG5vdCBlbm91Z2ggaW5zdGFuY2VzIG9mXG4gICAqIHRoZSBiZXN0IGZpdHRpbmcgaW5zdGFuY2UgdHlwZSBjYW4gYmUgYWxsb2NhdGVkLlxuICAgKlxuICAgKiBAZGVmYXVsdCAtIGBCRVNUX0ZJVF9QUk9HUkVTU0lWRWAgaWYgbm90IHVzaW5nIFNwb3QgaW5zdGFuY2VzLFxuICAgKiBgU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRURgIGlmIHVzaW5nIFNwb3QgaW5zdGFuY2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgYWxsb2NhdGlvblN0cmF0ZWd5PzogQWxsb2NhdGlvblN0cmF0ZWd5O1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBwZXJjZW50YWdlIHRoYXQgYSBTcG90IEluc3RhbmNlIHByaWNlIGNhbiBiZSB3aGVuIGNvbXBhcmVkIHdpdGggdGhlXG4gICAqIE9uLURlbWFuZCBwcmljZSBmb3IgdGhhdCBpbnN0YW5jZSB0eXBlIGJlZm9yZSBpbnN0YW5jZXMgYXJlIGxhdW5jaGVkLlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91ciBtYXhpbXVtIHBlcmNlbnRhZ2UgaXMgMjAlLCB0aGUgU3BvdCBwcmljZSBtdXN0IGJlXG4gICAqIGxlc3MgdGhhbiAyMCUgb2YgdGhlIGN1cnJlbnQgT24tRGVtYW5kIHByaWNlIGZvciB0aGF0IEluc3RhbmNlLlxuICAgKiBZb3UgYWx3YXlzIHBheSB0aGUgbG93ZXN0IG1hcmtldCBwcmljZSBhbmQgbmV2ZXIgbW9yZSB0aGFuIHlvdXIgbWF4aW11bSBwZXJjZW50YWdlLlxuICAgKiBGb3IgbW9zdCB1c2UgY2FzZXMsIEJhdGNoIHJlY29tbWVuZHMgbGVhdmluZyB0aGlzIGZpZWxkIGVtcHR5LlxuICAgKlxuICAgKiBJbXBsaWVzIGBzcG90ID09IHRydWVgIGlmIHNldFxuICAgKlxuICAgKiBAZGVmYXVsdCAtIDEwMCVcbiAgICovXG4gIHJlYWRvbmx5IHNwb3RCaWRQZXJjZW50YWdlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5zdGFuY2UgdHlwZXMgdGhhdCB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgY2FuIGxhdW5jaC5cbiAgICogV2hpY2ggb25lIGlzIGNob3NlbiBkZXBlbmRzIG9uIHRoZSBgQWxsb2NhdGlvblN0cmF0ZWd5YCB1c2VkLlxuICAgKlxuICAgKiBAZGVmYXVsdCAtIHRoZSBpbnN0YW5jZXMgQmF0Y2ggY29uc2lkZXJzIHdpbGwgYmUgdXNlZCAoY3VycmVudGx5IEM0LCBNNCwgYW5kIFI0KVxuICAgKi9cbiAgcmVhZG9ubHkgaW5zdGFuY2VUeXBlcz86IGVjMi5JbnN0YW5jZVR5cGVbXTtcblxuICAvKipcbiAgICogVGhlIGluc3RhbmNlIHR5cGVzIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50IGNhbiBsYXVuY2guXG4gICAqIFdoaWNoIG9uZSBpcyBjaG9zZW4gZGVwZW5kcyBvbiB0aGUgYEFsbG9jYXRpb25TdHJhdGVneWAgdXNlZC5cbiAgICogQmF0Y2ggd2lsbCBhdXRvbWF0aWNhbGx5IGNob29zZSB0aGUgaW5zdGFuY2Ugc2l6ZS5cbiAgICpcbiAgICogQGRlZmF1bHQgLSB0aGUgaW5zdGFuY2VzIEJhdGNoIGNvbnNpZGVycyB3aWxsIGJlIHVzZWQgKGN1cnJlbnRseSBDNCwgTTQsIGFuZCBSNClcbiAgICovXG4gIHJlYWRvbmx5IGluc3RhbmNlQ2xhc3Nlcz86IGVjMi5JbnN0YW5jZUNsYXNzW107XG5cbiAgLyoqXG4gICAqIFRoZSBleGVjdXRpb24gUm9sZSB0aGF0IGluc3RhbmNlcyBsYXVuY2hlZCBieSB0aGlzIENvbXB1dGUgRW52aXJvbm1lbnQgd2lsbCB1c2UuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gYSByb2xlIHdpbGwgYmUgY3JlYXRlZFxuICAgKi9cbiAgcmVhZG9ubHkgaW5zdGFuY2VSb2xlPzogaWFtLklSb2xlO1xuXG4gIC8qKlxuICAgKiBUaGUgTGF1bmNoIFRlbXBsYXRlIHRoYXQgdGhpcyBDb21wdXRlIEVudmlyb25tZW50XG4gICAqIHdpbGwgdXNlIHRvIHByb3Zpc2lvbiBFQzIgSW5zdGFuY2VzLlxuICAgKlxuICAgKiAqTm90ZSo6IGlmIGBzZWN1cml0eUdyb3Vwc2AgaXMgc3BlY2lmaWVkIG9uIGJvdGggeW91clxuICAgKiBsYXVuY2ggdGVtcGxhdGUgYW5kIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCwgKip0aGVcbiAgICogYHNlY3VyaXR5R3JvdXBgcyBvbiB0aGUgQ29tcHV0ZSBFbnZpcm9ubWVudCBvdmVycmlkZSB0aGVcbiAgICogb25lcyBvbiB0aGUgbGF1bmNoIHRlbXBsYXRlLioqXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gbm8gbGF1bmNoIHRlbXBsYXRlXG4gICAqL1xuICByZWFkb25seSBsYXVuY2hUZW1wbGF0ZT86IGVjMi5JTGF1bmNoVGVtcGxhdGU7XG5cbiAgLyoqXG4gICAqIFRoZSBtaW5pbXVtIHZDUFVzIHRoYXQgYW4gZW52aXJvbm1lbnQgc2hvdWxkIG1haW50YWluLFxuICAgKiBldmVuIGlmIHRoZSBjb21wdXRlIGVudmlyb25tZW50IGlzIERJU0FCTEVELlxuICAgKlxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICByZWFkb25seSBtaW52Q3B1cz86IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIEVDMiBwbGFjZW1lbnQgZ3JvdXAgdG8gYXNzb2NpYXRlIHdpdGggeW91ciBjb21wdXRlIHJlc291cmNlcy5cbiAgICogSWYgeW91IGludGVuZCB0byBzdWJtaXQgbXVsdGktbm9kZSBwYXJhbGxlbCBqb2JzIHRvIHRoaXMgQ29tcHV0ZSBFbnZpcm9ubWVudCxcbiAgICogeW91IHNob3VsZCBjb25zaWRlciBjcmVhdGluZyBhIGNsdXN0ZXIgcGxhY2VtZW50IGdyb3VwIGFuZCBhc3NvY2lhdGUgaXQgd2l0aCB5b3VyIGNvbXB1dGUgcmVzb3VyY2VzLlxuICAgKiBUaGlzIGtlZXBzIHlvdXIgbXVsdGktbm9kZSBwYXJhbGxlbCBqb2Igb24gYSBsb2dpY2FsIGdyb3VwaW5nIG9mIGluc3RhbmNlc1xuICAgKiB3aXRoaW4gYSBzaW5nbGUgQXZhaWxhYmlsaXR5IFpvbmUgd2l0aCBoaWdoIG5ldHdvcmsgZmxvdyBwb3RlbnRpYWwuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0FXU0VDMi9sYXRlc3QvVXNlckd1aWRlL3BsYWNlbWVudC1ncm91cHMuaHRtbFxuICAgKlxuICAgKiBAZGVmYXVsdCAtIG5vIHBsYWNlbWVudCBncm91cFxuICAgKi9cbiAgcmVhZG9ubHkgcGxhY2VtZW50R3JvdXA/OiBlYzIuSVBsYWNlbWVudEdyb3VwO1xufVxuXG4vKipcbiAqIEEgTWFuYWdlZENvbXB1dGVFbnZpcm9ubWVudCB0aGF0IHVzZXMgRUNTIG9yY2hlc3RyYXRpb24gb24gRUMyIGluc3RhbmNlcy5cbiAqXG4gKiBAcmVzb3VyY2UgQVdTOjpCYXRjaDo6Q29tcHV0ZUVudmlyb25tZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBNYW5hZ2VkRWMyRWtzQ29tcHV0ZUVudmlyb25tZW50IGV4dGVuZHMgTWFuYWdlZENvbXB1dGVFbnZpcm9ubWVudEJhc2UgaW1wbGVtZW50cyBJTWFuYWdlZEVjMkVrc0NvbXB1dGVFbnZpcm9ubWVudCB7XG4gIHB1YmxpYyByZWFkb25seSBrdWJlcm5ldGVzTmFtZXNwYWNlPzogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgZWtzQ2x1c3RlcjogZWtzLklDbHVzdGVyO1xuXG4gIHB1YmxpYyByZWFkb25seSBjb21wdXRlRW52aXJvbm1lbnROYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyByZWFkb25seSBjb21wdXRlRW52aXJvbm1lbnRBcm46IHN0cmluZztcblxuICBwdWJsaWMgcmVhZG9ubHkgaW1hZ2VzPzogRWtzTWFjaGluZUltYWdlW107XG4gIHB1YmxpYyByZWFkb25seSBhbGxvY2F0aW9uU3RyYXRlZ3k/OiBBbGxvY2F0aW9uU3RyYXRlZ3k7XG4gIHB1YmxpYyByZWFkb25seSBzcG90QmlkUGVyY2VudGFnZT86IG51bWJlcjtcbiAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlVHlwZXM6IGVjMi5JbnN0YW5jZVR5cGVbXTtcbiAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlQ2xhc3NlczogZWMyLkluc3RhbmNlQ2xhc3NbXTtcbiAgcHVibGljIHJlYWRvbmx5IGluc3RhbmNlUm9sZT86IGlhbS5JUm9sZTtcbiAgcHVibGljIHJlYWRvbmx5IGxhdW5jaFRlbXBsYXRlPzogZWMyLklMYXVuY2hUZW1wbGF0ZTtcbiAgcHVibGljIHJlYWRvbmx5IG1pbnZDcHVzPzogbnVtYmVyO1xuICBwdWJsaWMgcmVhZG9ubHkgcGxhY2VtZW50R3JvdXA/OiBlYzIuSVBsYWNlbWVudEdyb3VwO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaW5zdGFuY2VQcm9maWxlOiBpYW0uQ2ZuSW5zdGFuY2VQcm9maWxlO1xuXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBNYW5hZ2VkRWMyRWtzQ29tcHV0ZUVudmlyb25tZW50UHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcblxuICAgIHRoaXMua3ViZXJuZXRlc05hbWVzcGFjZSA9IHByb3BzLmt1YmVybmV0ZXNOYW1lc3BhY2U7XG4gICAgdGhpcy5la3NDbHVzdGVyID0gcHJvcHMuZWtzQ2x1c3RlcjtcblxuICAgIHRoaXMuaW1hZ2VzID0gcHJvcHMuaW1hZ2VzO1xuICAgIHRoaXMuYWxsb2NhdGlvblN0cmF0ZWd5ID0gZGV0ZXJtaW5lQWxsb2NhdGlvblN0cmF0ZWd5KGlkLCBwcm9wcy5hbGxvY2F0aW9uU3RyYXRlZ3ksIHRoaXMuc3BvdCk7XG4gICAgaWYgKHRoaXMuYWxsb2NhdGlvblN0cmF0ZWd5ID09PSBBbGxvY2F0aW9uU3RyYXRlZ3kuQkVTVF9GSVQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWFuYWdlZEVjMkVrc0NvbXB1dGVFbnZpcm9ubWVudCAnJHtpZH0nIHVzZXMgaW52YWxpZCBhbGxvY2F0aW9uIHN0cmF0ZWd5ICdBbGxvY2F0aW9uU3RyYXRlZ3kuQkVTVF9GSVQnYCk7XG4gICAgfVxuICAgIHRoaXMuc3BvdEJpZFBlcmNlbnRhZ2UgPSBwcm9wcy5zcG90QmlkUGVyY2VudGFnZTtcbiAgICB0aGlzLmluc3RhbmNlVHlwZXMgPSBwcm9wcy5pbnN0YW5jZVR5cGVzID8/IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VDbGFzc2VzID0gcHJvcHMuaW5zdGFuY2VDbGFzc2VzID8/IFtdO1xuXG4gICAgY29uc3QgeyBpbnN0YW5jZVJvbGUsIGluc3RhbmNlUHJvZmlsZSB9ID0gY3JlYXRlSW5zdGFuY2VSb2xlQW5kUHJvZmlsZSh0aGlzLCBwcm9wcy5pbnN0YW5jZVJvbGUpO1xuICAgIHRoaXMuaW5zdGFuY2VSb2xlID0gaW5zdGFuY2VSb2xlO1xuICAgIHRoaXMuaW5zdGFuY2VQcm9maWxlID0gaW5zdGFuY2VQcm9maWxlO1xuXG4gICAgdGhpcy5sYXVuY2hUZW1wbGF0ZSA9IHByb3BzLmxhdW5jaFRlbXBsYXRlO1xuICAgIHRoaXMubWludkNwdXMgPSBwcm9wcy5taW52Q3B1cyA/PyBERUZBVUxUX01JTl9WQ1BVUztcbiAgICB0aGlzLnBsYWNlbWVudEdyb3VwID0gcHJvcHMucGxhY2VtZW50R3JvdXA7XG5cbiAgICB2YWxpZGF0ZVZDcHVzKGlkLCB0aGlzLm1pbnZDcHVzLCB0aGlzLm1heHZDcHVzKTtcbiAgICB2YWxpZGF0ZVNwb3RDb25maWcoaWQsIHRoaXMuc3BvdCwgdGhpcy5zcG90QmlkUGVyY2VudGFnZSk7XG5cbiAgICBjb25zdCB7IHN1Ym5ldElkcyB9ID0gcHJvcHMudnBjLnNlbGVjdFN1Ym5ldHMocHJvcHMudnBjU3VibmV0cyk7XG4gICAgY29uc3QgcmVzb3VyY2UgPSBuZXcgQ2ZuQ29tcHV0ZUVudmlyb25tZW50KHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgIC4uLmJhc2VNYW5hZ2VkUmVzb3VyY2VQcm9wZXJ0aWVzKHRoaXMsIHN1Ym5ldElkcyksXG4gICAgICBjb21wdXRlRW52aXJvbm1lbnROYW1lOiBwcm9wcy5jb21wdXRlRW52aXJvbm1lbnROYW1lLFxuICAgICAgZWtzQ29uZmlndXJhdGlvbjoge1xuICAgICAgICBla3NDbHVzdGVyQXJuOiB0aGlzLmVrc0NsdXN0ZXIuY2x1c3RlckFybixcbiAgICAgICAga3ViZXJuZXRlc05hbWVzcGFjZTogdGhpcy5rdWJlcm5ldGVzTmFtZXNwYWNlLFxuICAgICAgfSxcbiAgICAgIGNvbXB1dGVSZXNvdXJjZXM6IHtcbiAgICAgICAgLi4uYmFzZU1hbmFnZWRSZXNvdXJjZVByb3BlcnRpZXModGhpcywgc3VibmV0SWRzKS5jb21wdXRlUmVzb3VyY2VzIGFzIENmbkNvbXB1dGVFbnZpcm9ubWVudC5Db21wdXRlUmVzb3VyY2VzUHJvcGVydHksXG4gICAgICAgIG1pbnZDcHVzOiB0aGlzLm1pbnZDcHVzLFxuICAgICAgICBpbnN0YW5jZVJvbGU6IHRoaXMuaW5zdGFuY2VQcm9maWxlLmF0dHJBcm4sIC8vIHRoaXMgaXMgbm90IGEgdHlwbzsgdGhpcyBwcm9wZXJ0eSBhY3R1YWxseSB0YWtlcyBhIHByb2ZpbGUsIG5vdCBhIHN0YW5kYXJkIHJvbGVcbiAgICAgICAgaW5zdGFuY2VUeXBlczogTGF6eS5saXN0KHsgcHJvZHVjZTogKCkgPT4gcmVuZGVySW5zdGFuY2VzKHRoaXMuaW5zdGFuY2VUeXBlcywgdGhpcy5pbnN0YW5jZUNsYXNzZXMsIHByb3BzLnVzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXMpIH0pLFxuICAgICAgICB0eXBlOiB0aGlzLnNwb3QgPyAnU1BPVCcgOiAnRUMyJyxcbiAgICAgICAgYWxsb2NhdGlvblN0cmF0ZWd5OiB0aGlzLmFsbG9jYXRpb25TdHJhdGVneSxcbiAgICAgICAgYmlkUGVyY2VudGFnZTogdGhpcy5zcG90QmlkUGVyY2VudGFnZSxcbiAgICAgICAgbGF1bmNoVGVtcGxhdGU6IHRoaXMubGF1bmNoVGVtcGxhdGUgPyB7XG4gICAgICAgICAgbGF1bmNoVGVtcGxhdGVJZDogdGhpcy5sYXVuY2hUZW1wbGF0ZT8ubGF1bmNoVGVtcGxhdGVJZCxcbiAgICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZWMyQ29uZmlndXJhdGlvbjogdGhpcy5pbWFnZXM/Lm1hcCgoaW1hZ2UpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW1hZ2VJZE92ZXJyaWRlOiBpbWFnZS5pbWFnZT8uZ2V0SW1hZ2UodGhpcykuaW1hZ2VJZCxcbiAgICAgICAgICAgIGltYWdlVHlwZTogaW1hZ2UuaW1hZ2VUeXBlID8/IEVrc01hY2hpbmVJbWFnZVR5cGUuRUtTX0FMMixcbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgcGxhY2VtZW50R3JvdXA6IHRoaXMucGxhY2VtZW50R3JvdXA/LnBsYWNlbWVudEdyb3VwTmFtZSxcbiAgICAgICAgdGFnczogdGhpcy50YWdzLnJlbmRlcmVkVGFncyBhcyBhbnksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb21wdXRlRW52aXJvbm1lbnROYW1lID0gdGhpcy5nZXRSZXNvdXJjZU5hbWVBdHRyaWJ1dGUocmVzb3VyY2UucmVmKTtcbiAgICB0aGlzLmNvbXB1dGVFbnZpcm9ubWVudEFybiA9IHRoaXMuZ2V0UmVzb3VyY2VBcm5BdHRyaWJ1dGUocmVzb3VyY2UuYXR0ckNvbXB1dGVFbnZpcm9ubWVudEFybiwge1xuICAgICAgc2VydmljZTogJ2JhdGNoJyxcbiAgICAgIHJlc291cmNlOiAnY29tcHV0ZS1lbnZpcm9ubWVudCcsXG4gICAgICByZXNvdXJjZU5hbWU6IHRoaXMucGh5c2ljYWxOYW1lLFxuICAgIH0pO1xuXG4gICAgdGhpcy5ub2RlLmFkZFZhbGlkYXRpb24oeyB2YWxpZGF0ZTogKCkgPT4gdmFsaWRhdGVJbnN0YW5jZXModGhpcy5pbnN0YW5jZVR5cGVzLCB0aGlzLmluc3RhbmNlQ2xhc3NlcywgcHJvcHMudXNlT3B0aW1hbEluc3RhbmNlQ2xhc3NlcykgfSk7XG4gIH1cblxuICBwdWJsaWMgYWRkSW5zdGFuY2VUeXBlKGluc3RhbmNlVHlwZTogZWMyLkluc3RhbmNlVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuaW5zdGFuY2VUeXBlcy5wdXNoKGluc3RhbmNlVHlwZSk7XG4gIH1cblxuICBwdWJsaWMgYWRkSW5zdGFuY2VDbGFzcyhpbnN0YW5jZUNsYXNzOiBlYzIuSW5zdGFuY2VDbGFzcyk6IHZvaWQge1xuICAgIHRoaXMuaW5zdGFuY2VDbGFzc2VzLnB1c2goaW5zdGFuY2VDbGFzcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnQgdGhhdCB1c2VzIEVDUyBvcmNoZXN0cmF0aW9uIG9uIEZhcmdhdGUgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElGYXJnYXRlQ29tcHV0ZUVudmlyb25tZW50IGV4dGVuZHMgSU1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnQgeyB9XG5cbi8qKlxuICogUHJvcHMgZm9yIGEgRmFyZ2F0ZUNvbXB1dGVFbnZpcm9ubWVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnRQcm9wcyBleHRlbmRzIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnRQcm9wcyB7IH1cblxuLyoqXG4gKiBBIE1hbmFnZWRDb21wdXRlRW52aXJvbm1lbnQgdGhhdCB1c2VzIEVDUyBvcmNoZXN0cmF0aW9uIG9uIEZhcmdhdGUgaW5zdGFuY2VzLlxuICpcbiAqIEByZXNvdXJjZSBBV1M6OkJhdGNoOjpDb21wdXRlRW52aXJvbm1lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnQgZXh0ZW5kcyBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50QmFzZSBpbXBsZW1lbnRzIElGYXJnYXRlQ29tcHV0ZUVudmlyb25tZW50IHtcbiAgLyoqXG4gICAqIFJlZmVyZW5jZSBhbiBleGlzdGluZyBGYXJnYXRlQ29tcHV0ZUVudmlyb25tZW50IGJ5IGl0cyBhcm5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnRBcm4oc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgZmFyZ2F0ZUNvbXB1dGVFbnZpcm9ubWVudEFybjogc3RyaW5nKTogSUZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnQge1xuICAgIGNvbnN0IHN0YWNrID0gU3RhY2sub2Yoc2NvcGUpO1xuICAgIGNvbnN0IGNvbXB1dGVFbnZpcm9ubWVudE5hbWUgPSBzdGFjay5zcGxpdEFybihmYXJnYXRlQ29tcHV0ZUVudmlyb25tZW50QXJuLCBBcm5Gb3JtYXQuU0xBU0hfUkVTT1VSQ0VfTkFNRSkucmVzb3VyY2VOYW1lITtcblxuICAgIGNsYXNzIEltcG9ydCBleHRlbmRzIFJlc291cmNlIGltcGxlbWVudHMgSUZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnQge1xuICAgICAgcHVibGljIHJlYWRvbmx5IGNvbXB1dGVFbnZpcm9ubWVudEFybiA9IGZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnRBcm47XG4gICAgICBwdWJsaWMgcmVhZG9ubHkgY29tcHV0ZUVudmlyb25tZW50TmFtZSA9IGNvbXB1dGVFbnZpcm9ubWVudE5hbWU7XG4gICAgICBwdWJsaWMgcmVhZG9ubHkgZW5hYmxlZCA9IHRydWU7XG4gICAgICBwdWJsaWMgcmVhZG9ubHkgbWF4dkNwdXMgPSAxO1xuICAgICAgcHVibGljIHJlYWRvbmx5IGNvbm5lY3Rpb25zID0geyB9IGFzIGFueTtcbiAgICAgIHB1YmxpYyByZWFkb25seSBzZWN1cml0eUdyb3VwcyA9IFtdO1xuICAgICAgcHVibGljIHJlYWRvbmx5IHRhZ3M6IFRhZ01hbmFnZXIgPSBuZXcgVGFnTWFuYWdlcihUYWdUeXBlLk1BUCwgJ0FXUzo6QmF0Y2g6OkNvbXB1dGVFbnZpcm9ubWVudCcpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgSW1wb3J0KHNjb3BlLCBpZCk7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgY29tcHV0ZUVudmlyb25tZW50TmFtZTogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgY29tcHV0ZUVudmlyb25tZW50QXJuOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IEZhcmdhdGVDb21wdXRlRW52aXJvbm1lbnRQcm9wcykge1xuICAgIHN1cGVyKHNjb3BlLCBpZCwgcHJvcHMpO1xuXG4gICAgY29uc3QgeyBzdWJuZXRJZHMgfSA9IHByb3BzLnZwYy5zZWxlY3RTdWJuZXRzKHByb3BzLnZwY1N1Ym5ldHMpO1xuICAgIGNvbnN0IHJlc291cmNlID0gbmV3IENmbkNvbXB1dGVFbnZpcm9ubWVudCh0aGlzLCAnUmVzb3VyY2UnLCB7XG4gICAgICAuLi5iYXNlTWFuYWdlZFJlc291cmNlUHJvcGVydGllcyh0aGlzLCBzdWJuZXRJZHMpLFxuICAgICAgY29tcHV0ZUVudmlyb25tZW50TmFtZTogcHJvcHMuY29tcHV0ZUVudmlyb25tZW50TmFtZSxcbiAgICAgIGNvbXB1dGVSZXNvdXJjZXM6IHtcbiAgICAgICAgLi4uYmFzZU1hbmFnZWRSZXNvdXJjZVByb3BlcnRpZXModGhpcywgc3VibmV0SWRzKS5jb21wdXRlUmVzb3VyY2VzIGFzIENmbkNvbXB1dGVFbnZpcm9ubWVudC5Db21wdXRlUmVzb3VyY2VzUHJvcGVydHksXG4gICAgICAgIHR5cGU6IHRoaXMuc3BvdCA/ICdGQVJHQVRFX1NQT1QnIDogJ0ZBUkdBVEUnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICB0aGlzLmNvbXB1dGVFbnZpcm9ubWVudE5hbWUgPSB0aGlzLmdldFJlc291cmNlTmFtZUF0dHJpYnV0ZShyZXNvdXJjZS5yZWYpO1xuICAgIHRoaXMuY29tcHV0ZUVudmlyb25tZW50QXJuID0gdGhpcy5nZXRSZXNvdXJjZUFybkF0dHJpYnV0ZShyZXNvdXJjZS5hdHRyQ29tcHV0ZUVudmlyb25tZW50QXJuLCB7XG4gICAgICBzZXJ2aWNlOiAnYmF0Y2gnLFxuICAgICAgcmVzb3VyY2U6ICdjb21wdXRlLWVudmlyb25tZW50JyxcbiAgICAgIHJlc291cmNlTmFtZTogdGhpcy5waHlzaWNhbE5hbWUsXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVySW5zdGFuY2VzKHR5cGVzPzogZWMyLkluc3RhbmNlVHlwZVtdLCBjbGFzc2VzPzogZWMyLkluc3RhbmNlQ2xhc3NbXSwgdXNlT3B0aW1hbEluc3RhbmNlQ2xhc3Nlcz86IGJvb2xlYW4pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGluc3RhbmNlcyA9IFtdO1xuXG4gIGZvciAoY29uc3QgaW5zdGFuY2VUeXBlIG9mIHR5cGVzID8/IFtdKSB7XG4gICAgaW5zdGFuY2VzLnB1c2goaW5zdGFuY2VUeXBlLnRvU3RyaW5nKCkpO1xuICB9XG4gIGZvciAoY29uc3QgaW5zdGFuY2VDbGFzcyBvZiBjbGFzc2VzID8/IFtdKSB7XG4gICAgaW5zdGFuY2VzLnB1c2goaW5zdGFuY2VDbGFzcyk7XG4gIH1cbiAgaWYgKHVzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXMgfHwgdXNlT3B0aW1hbEluc3RhbmNlQ2xhc3NlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaW5zdGFuY2VzLnB1c2goJ29wdGltYWwnKTtcbiAgfVxuXG4gIHJldHVybiBpbnN0YW5jZXM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlUm9sZUFuZFByb2ZpbGUoc2NvcGU6IENvbnN0cnVjdCwgaW5zdGFuY2VSb2xlPzogaWFtLklSb2xlKSB7XG4gIGNvbnN0IHJlc3VsdDogYW55ID0ge307XG5cbiAgcmVzdWx0Lmluc3RhbmNlUm9sZSA9IGluc3RhbmNlUm9sZSA/PyBuZXcgaWFtLlJvbGUoc2NvcGUsICdJbnN0YW5jZVByb2ZpbGVSb2xlJywge1xuICAgIGFzc3VtZWRCeTogbmV3IGlhbS5TZXJ2aWNlUHJpbmNpcGFsKCdlYzIuYW1hem9uYXdzLmNvbScpLFxuICAgIG1hbmFnZWRQb2xpY2llczogW2lhbS5NYW5hZ2VkUG9saWN5LmZyb21Bd3NNYW5hZ2VkUG9saWN5TmFtZSgnc2VydmljZS1yb2xlL0FtYXpvbkVDMkNvbnRhaW5lclNlcnZpY2Vmb3JFQzJSb2xlJyldLFxuICB9KTtcblxuICByZXN1bHQuaW5zdGFuY2VQcm9maWxlID0gbmV3IGlhbS5DZm5JbnN0YW5jZVByb2ZpbGUoc2NvcGUsICdJbnN0YW5jZVByb2ZpbGUnLCB7XG4gICAgcm9sZXM6IFtyZXN1bHQuaW5zdGFuY2VSb2xlLnJvbGVOYW1lXSxcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3BvdEZsZWV0Um9sZShzY29wZTogQ29uc3RydWN0KTogSVJvbGUge1xuICByZXR1cm4gbmV3IGlhbS5Sb2xlKHNjb3BlLCAnU3BvdEZsZWV0Um9sZScsIHtcbiAgICBhc3N1bWVkQnk6IG5ldyBpYW0uU2VydmljZVByaW5jaXBhbCgnc3BvdGZsZWV0LmFtYXpvbmF3cy5jb20nKSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRldGVybWluZUFsbG9jYXRpb25TdHJhdGVneShpZDogc3RyaW5nLCBhbGxvY2F0aW9uU3RyYXRlZ3k/OiBBbGxvY2F0aW9uU3RyYXRlZ3ksIHNwb3Q/OiBib29sZWFuKTogQWxsb2NhdGlvblN0cmF0ZWd5IHwgdW5kZWZpbmVkIHtcbiAgbGV0IHJlc3VsdCA9IGFsbG9jYXRpb25TdHJhdGVneTtcbiAgaWYgKCFhbGxvY2F0aW9uU3RyYXRlZ3kpIHtcbiAgICByZXN1bHQgPSBzcG90ID8gQWxsb2NhdGlvblN0cmF0ZWd5LlNQT1RfUFJJQ0VfQ0FQQUNJVFlfT1BUSU1JWkVEIDogQWxsb2NhdGlvblN0cmF0ZWd5LkJFU1RfRklUX1BST0dSRVNTSVZFO1xuICB9IGVsc2UgaWYgKGFsbG9jYXRpb25TdHJhdGVneSA9PT0gQWxsb2NhdGlvblN0cmF0ZWd5LlNQT1RfUFJJQ0VfQ0FQQUNJVFlfT1BUSU1JWkVEICYmICFzcG90KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNYW5hZ2VkIENvbXB1dGVFbnZpcm9ubWVudCAnJHtpZH0nIHNwZWNpZmllcyAnQWxsb2NhdGlvblN0cmF0ZWd5LlNQT1RfUFJJQ0VfQ0FQQUNJVFlfT1BUSU1JWkVEJyB3aXRob3V0IHVzaW5nIHNwb3QgaW5zdGFuY2VzYCk7XG4gIH0gZWxzZSBpZiAoYWxsb2NhdGlvblN0cmF0ZWd5ID09PSBBbGxvY2F0aW9uU3RyYXRlZ3kuU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRUQgJiYgIXNwb3QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbmFnZWQgQ29tcHV0ZUVudmlyb25tZW50ICcke2lkfScgc3BlY2lmaWVzICdBbGxvY2F0aW9uU3RyYXRlZ3kuU1BPVF9DQVBBQ0lUWV9PUFRJTUlaRUQnIHdpdGhvdXQgdXNpbmcgc3BvdCBpbnN0YW5jZXNgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW5zdGFuY2VzKHR5cGVzPzogZWMyLkluc3RhbmNlVHlwZVtdLCBjbGFzc2VzPzogZWMyLkluc3RhbmNlQ2xhc3NbXSwgdXNlT3B0aW1hbEluc3RhbmNlQ2xhc3Nlcz86IGJvb2xlYW4pOiBzdHJpbmdbXSB7XG4gIGlmIChyZW5kZXJJbnN0YW5jZXModHlwZXMsIGNsYXNzZXMsIHVzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXCJTcGVjaWZpZXMgJ3VzZU9wdGltYWxJbnN0YW5jZUNsYXNzZXM6IGZhbHNlJyB3aXRob3V0IHNwZWNpZnlpbmcgYW55IGluc3RhbmNlIHR5cGVzIG9yIGNsYXNzZXNcIl07XG4gIH1cblxuICByZXR1cm4gW107XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3BvdENvbmZpZyhpZDogc3RyaW5nLCBzcG90PzogYm9vbGVhbiwgc3BvdEJpZFBlcmNlbnRhZ2U/OiBudW1iZXIsIHNwb3RGbGVldFJvbGU/OiBpYW0uSVJvbGUpOiB2b2lkIHtcbiAgaWYgKHNwb3RCaWRQZXJjZW50YWdlKSB7XG4gICAgaWYgKCFzcG90KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbmFnZWQgQ29tcHV0ZUVudmlyb25tZW50ICcke2lkfScgc3BlY2lmaWVzICdzcG90QmlkUGVyY2VudGFnZScgd2l0aG91dCBzcGVjaWZ5aW5nICdzcG90J2ApO1xuICAgIH0gZWxzZSBpZiAoc3BvdEJpZFBlcmNlbnRhZ2UgPiAxMDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWFuYWdlZCBDb21wdXRlRW52aXJvbm1lbnQgJyR7aWR9JyBzcGVjaWZpZXMgJ3Nwb3RCaWRQZXJjZW50YWdlJyA+IDEwMGApO1xuICAgIH0gZWxzZSBpZiAoc3BvdEJpZFBlcmNlbnRhZ2UgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbmFnZWQgQ29tcHV0ZUVudmlyb25tZW50ICcke2lkfScgc3BlY2lmaWVzICdzcG90QmlkUGVyY2VudGFnZScgPCAwYCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHNwb3RGbGVldFJvbGUpIHtcbiAgICBpZiAoIXNwb3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWFuYWdlZCBDb21wdXRlRW52aXJvbm1lbnQgJyR7aWR9JyBzcGVjaWZpZXMgJ3Nwb3RGbGVldFJvbGUnIHdpdGhvdXQgc3BlY2lmeWluZyAnc3BvdCdgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVWQ3B1cyhpZDogc3RyaW5nLCBtaW52Q3B1czogbnVtYmVyLCBtYXh2Q3B1czogbnVtYmVyKTogdm9pZCB7XG4gIGlmIChtaW52Q3B1cyA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbmFnZWQgQ29tcHV0ZUVudmlyb25tZW50ICcke2lkfScgaGFzICdtaW52Q3B1cycgPSAke21pbnZDcHVzfSA8IDA7ICdtaW52Q3B1cycgY2Fubm90IGJlIGxlc3MgdGhhbiB6ZXJvYCk7XG4gIH1cbiAgaWYgKG1pbnZDcHVzID4gbWF4dkNwdXMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbmFnZWQgQ29tcHV0ZUVudmlyb25tZW50ICcke2lkfScgaGFzICdtaW52Q3B1cycgPSAke21pbnZDcHVzfSA+ICdtYXh2Q3B1cycgPSAke21heHZDcHVzfTsgJ21pbnZDcHVzJyBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuICdtYXh2Q3B1cydgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlTWFuYWdlZFJlc291cmNlUHJvcGVydGllcyhiYXNlQ29tcHV0ZUVudmlyb25tZW50OiBNYW5hZ2VkQ29tcHV0ZUVudmlyb25tZW50QmFzZSwgc3VibmV0SWRzOiBzdHJpbmdbXSkge1xuICByZXR1cm4ge1xuICAgIHNlcnZpY2VSb2xlOiBiYXNlQ29tcHV0ZUVudmlyb25tZW50LnNlcnZpY2VSb2xlPy5yb2xlQXJuLFxuICAgIHN0YXRlOiBiYXNlQ29tcHV0ZUVudmlyb25tZW50LmVuYWJsZWQgPyAnRU5BQkxFRCcgOiAnRElTQUJMRUQnLFxuICAgIGNvbXB1dGVSZXNvdXJjZXM6IHtcbiAgICAgIG1heHZDcHVzOiBiYXNlQ29tcHV0ZUVudmlyb25tZW50Lm1heHZDcHVzLFxuICAgICAgdHlwZTogJ21hbmFnZWQnLFxuICAgICAgdXBkYXRlVG9MYXRlc3RJbWFnZVZlcnNpb246IGJhc2VDb21wdXRlRW52aXJvbm1lbnQudXBkYXRlVG9MYXRlc3RJbWFnZVZlcnNpb24sXG4gICAgICBzZWN1cml0eUdyb3VwSWRzOiBiYXNlQ29tcHV0ZUVudmlyb25tZW50LnNlY3VyaXR5R3JvdXBzLm1hcCgoc2VjdXJpdHlHcm91cCkgPT4gc2VjdXJpdHlHcm91cC5zZWN1cml0eUdyb3VwSWQpLFxuICAgICAgc3VibmV0czogc3VibmV0SWRzLFxuICAgIH0sXG4gICAgdXBkYXRlUG9saWN5OiB7XG4gICAgICB0ZXJtaW5hdGVKb2JzT25VcGRhdGU6IGJhc2VDb21wdXRlRW52aXJvbm1lbnQudGVybWluYXRlT25VcGRhdGUsXG4gICAgICBqb2JFeGVjdXRpb25UaW1lb3V0TWludXRlczogYmFzZUNvbXB1dGVFbnZpcm9ubWVudC51cGRhdGVUaW1lb3V0Py50b01pbnV0ZXMoKSxcbiAgICB9LFxuICAgIHJlcGxhY2VDb21wdXRlRW52aXJvbm1lbnQ6IGJhc2VDb21wdXRlRW52aXJvbm1lbnQucmVwbGFjZUNvbXB1dGVFbnZpcm9ubWVudCxcbiAgICB0eXBlOiAnbWFuYWdlZCcsXG4gIH07XG59XG5cbmNvbnN0IERFRkFVTFRfTUlOX1ZDUFVTID0gMDtcbmNvbnN0IERFRkFVTFRfTUFYX1ZDUFVTID0gMjU2O1xuIl19