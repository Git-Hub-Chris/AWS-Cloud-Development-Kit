{
  "Resources": {
    "Service1EDCC8134": {
      "Type": "AWS::AppRunner::Service",
      "Properties": {
        "SourceConfiguration": {
          "AuthenticationConfiguration": {},
          "ImageRepository": {
            "ImageConfiguration": {
              "Port": "80"
            },
            "ImageIdentifier": "public.ecr.aws/aws-containers/hello-app-runner:latest",
            "ImageRepositoryType": "ECR_PUBLIC"
          }
        }
      }
    },
    "Service2DefaultRole68B4B2E9": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "build.apprunner.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "Service2DefaultRoleDefaultPolicyB5D2F2C0": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "ecr:GetAuthorizationToken",
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":ecr:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":repository/nginx"
                  ]
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "Service2DefaultRoleDefaultPolicyB5D2F2C0",
        "Roles": [
          {
            "Ref": "Service2DefaultRole68B4B2E9"
          }
        ]
      }
    },
    "Service2AB4D14D8": {
      "Type": "AWS::AppRunner::Service",
      "Properties": {
        "SourceConfiguration": {
          "AuthenticationConfiguration": {
            "AccessRoleArn": {
              "Fn::GetAtt": [
                "Service2DefaultRole68B4B2E9",
                "Arn"
              ]
            }
          },
          "ImageRepository": {
            "ImageConfiguration": {
              "Port": "80"
            },
            "ImageIdentifier": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ".dkr.ecr.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/nginx:latest"
                ]
              ]
            },
            "ImageRepositoryType": "ECR"
          }
        }
      }
    },
    "Service3DefaultRole85B65BAE": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "build.apprunner.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "Service3DefaultRoleDefaultPolicy836C4E15": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "ecr:GetAuthorizationToken",
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":ecr:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":repository/aws-cdk/assets"
                  ]
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "Service3DefaultRoleDefaultPolicy836C4E15",
        "Roles": [
          {
            "Ref": "Service3DefaultRole85B65BAE"
          }
        ]
      }
    },
    "Service342D067F2": {
      "Type": "AWS::AppRunner::Service",
      "Properties": {
        "SourceConfiguration": {
          "AuthenticationConfiguration": {
            "AccessRoleArn": {
              "Fn::GetAtt": [
                "Service3DefaultRole85B65BAE",
                "Arn"
              ]
            }
          },
          "ImageRepository": {
            "ImageConfiguration": {
              "Port": "80"
            },
            "ImageIdentifier": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "AWS::AccountId"
                  },
                  ".dkr.ecr.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/aws-cdk/assets:1a52954aaab70e22b54d6af37d52f7a5d72696d579a226a67372879c31cde134"
                ]
              ]
            },
            "ImageRepositoryType": "ECR"
          }
        }
      }
    },
    "Service429949929": {
      "Type": "AWS::AppRunner::Service",
      "Properties": {
        "SourceConfiguration": {
          "AuthenticationConfiguration": {
            "ConnectionArn": "MOCK"
          },
          "CodeRepository": {
            "CodeConfiguration": {
              "ConfigurationSource": "REPOSITORY"
            },
            "RepositoryUrl": "https://github.com/aws-containers/hello-app-runner",
            "SourceCodeVersion": {
              "Type": "BRANCH",
              "Value": "main"
            }
          }
        }
      }
    }
  },
  "Outputs": {
    "URL1": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Fn::GetAtt": [
                "Service1EDCC8134",
                "ServiceUrl"
              ]
            }
          ]
        ]
      }
    },
    "URL2": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Fn::GetAtt": [
                "Service2AB4D14D8",
                "ServiceUrl"
              ]
            }
          ]
        ]
      }
    },
    "URL3": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Fn::GetAtt": [
                "Service342D067F2",
                "ServiceUrl"
              ]
            }
          ]
        ]
      }
    },
    "URL4": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Fn::GetAtt": [
                "Service429949929",
                "ServiceUrl"
              ]
            }
          ]
        ]
      }
    }
  }
}