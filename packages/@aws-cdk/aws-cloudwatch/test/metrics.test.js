"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assertions_1 = require("@aws-cdk/assertions");
const iam = require("@aws-cdk/aws-iam");
const cdk_build_tools_1 = require("@aws-cdk/cdk-build-tools");
const cdk = require("@aws-cdk/core");
const lib_1 = require("../lib");
const statistic_1 = require("../lib/private/statistic");
describe('Metrics', () => {
    test('metric grant', () => {
        // GIVEN
        const stack = new cdk.Stack();
        const role = new iam.Role(stack, 'SomeRole', {
            assumedBy: new iam.AnyPrincipal(),
        });
        // WHEN
        lib_1.Metric.grantPutMetricData(role);
        // THEN
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::IAM::Policy', {
            PolicyDocument: {
                Version: '2012-10-17',
                Statement: [
                    {
                        Action: 'cloudwatch:PutMetricData',
                        Effect: 'Allow',
                        Resource: '*',
                    },
                ],
            },
        });
    });
    test('can not use invalid period in Metric', () => {
        expect(() => {
            new lib_1.Metric({ namespace: 'Test', metricName: 'ACount', period: cdk.Duration.seconds(20) });
        }).toThrow(/'period' must be 1, 5, 10, 30, or a multiple of 60 seconds, received 20/);
    });
    test('Metric optimization: "with" with the same period returns the same object', () => {
        const m = new lib_1.Metric({ namespace: 'Test', metricName: 'Metric', period: cdk.Duration.minutes(10) });
        // Note: object equality, NOT deep equality on purpose
        expect(m.with({})).toEqual(m);
        expect(m.with({ period: cdk.Duration.minutes(10) })).toEqual(m);
        expect(m.with({ period: cdk.Duration.minutes(5) })).not.toEqual(m);
    });
    cdk_build_tools_1.testDeprecated('cannot use null dimension value', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    DimensionWithNull: null,
                },
            });
        }).toThrow(/Dimension value of 'null' is invalid/);
    });
    cdk_build_tools_1.testDeprecated('cannot use undefined dimension value', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    DimensionWithUndefined: undefined,
                },
            });
        }).toThrow(/Dimension value of 'undefined' is invalid/);
    });
    cdk_build_tools_1.testDeprecated('cannot use long dimension values', () => {
        const arr = new Array(256);
        const invalidDimensionValue = arr.fill('A', 0).join('');
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    DimensionWithLongValue: invalidDimensionValue,
                },
            });
        }).toThrow(`Dimension value must be at least 1 and no more than 255 characters; received ${invalidDimensionValue}`);
    });
    test('cannot use long dimension values in dimensionsMap', () => {
        const arr = new Array(256);
        const invalidDimensionValue = arr.fill('A', 0).join('');
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensionsMap: {
                    DimensionWithLongValue: invalidDimensionValue,
                },
            });
        }).toThrow(`Dimension value must be at least 1 and no more than 255 characters; received ${invalidDimensionValue}`);
    });
    cdk_build_tools_1.testDeprecated('throws error when there are more than 10 dimensions', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensions: {
                    dimensionA: 'value1',
                    dimensionB: 'value2',
                    dimensionC: 'value3',
                    dimensionD: 'value4',
                    dimensionE: 'value5',
                    dimensionF: 'value6',
                    dimensionG: 'value7',
                    dimensionH: 'value8',
                    dimensionI: 'value9',
                    dimensionJ: 'value10',
                    dimensionK: 'value11',
                },
            });
        }).toThrow(/The maximum number of dimensions is 10, received 11/);
    });
    test('throws error when there are more than 10 dimensions in dimensionsMap', () => {
        expect(() => {
            new lib_1.Metric({
                namespace: 'Test',
                metricName: 'ACount',
                period: cdk.Duration.minutes(10),
                dimensionsMap: {
                    dimensionA: 'value1',
                    dimensionB: 'value2',
                    dimensionC: 'value3',
                    dimensionD: 'value4',
                    dimensionE: 'value5',
                    dimensionF: 'value6',
                    dimensionG: 'value7',
                    dimensionH: 'value8',
                    dimensionI: 'value9',
                    dimensionJ: 'value10',
                    dimensionK: 'value11',
                },
            });
        }).toThrow(/The maximum number of dimensions is 10, received 11/);
    });
    test('can create metric with dimensionsMap property', () => {
        const stack = new cdk.Stack();
        const metric = new lib_1.Metric({
            namespace: 'Test',
            metricName: 'Metric',
            dimensionsMap: {
                dimensionA: 'value1',
                dimensionB: 'value2',
            },
        });
        new lib_1.Alarm(stack, 'Alarm', {
            metric: metric,
            threshold: 10,
            evaluationPeriods: 1,
        });
        expect(metric.dimensions).toEqual({
            dimensionA: 'value1',
            dimensionB: 'value2',
        });
        assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::CloudWatch::Alarm', {
            Namespace: 'Test',
            MetricName: 'Metric',
            Dimensions: [
                {
                    Name: 'dimensionA',
                    Value: 'value1',
                },
                {
                    Name: 'dimensionB',
                    Value: 'value2',
                },
            ],
            Threshold: 10,
            EvaluationPeriods: 1,
        });
    });
    test('"with" with a different dimensions property', () => {
        const dims = {
            dimensionA: 'value1',
        };
        const metric = new lib_1.Metric({
            namespace: 'Test',
            metricName: 'Metric',
            period: cdk.Duration.minutes(10),
            dimensionsMap: dims,
        });
        const newDims = {
            dimensionB: 'value2',
        };
        expect(metric.with({
            dimensionsMap: newDims,
        }).dimensions).toEqual(newDims);
    });
    test('metric accepts a variety of statistics', () => {
        const customStat = 'myCustomStatistic';
        const metric = new lib_1.Metric({
            namespace: 'Test',
            metricName: 'Metric',
            statistic: customStat,
        });
        expect(metric.statistic).toEqual(customStat);
    });
    test('statistic is properly parsed', () => {
        const checkParsingSingle = (statistic, statPrefix, statName, value) => {
            const parsed = statistic_1.parseStatistic(statistic);
            expect(parsed.type).toEqual('single');
            expect(parsed.value).toEqual(value);
            expect(parsed.statPrefix).toEqual(statPrefix);
            expect(parsed.statName).toEqual(statName);
        };
        const checkParsingPair = (statistic, statPrefix, statName, isPercent, canBeSingleStat, asSingleStatStr, lower, upper) => {
            const parsed = statistic_1.parseStatistic(statistic);
            expect(parsed.type).toEqual('pair');
            expect(parsed.isPercent).toEqual(isPercent);
            expect(parsed.lower).toEqual(lower);
            expect(parsed.upper).toEqual(upper);
            expect(parsed.canBeSingleStat).toEqual(canBeSingleStat);
            expect(parsed.asSingleStatStr).toEqual(asSingleStatStr);
            expect(parsed.statPrefix).toEqual(statPrefix);
            expect(parsed.statName).toEqual(statName);
        };
        expect(statistic_1.parseStatistic(lib_1.Stats.SAMPLE_COUNT).type).toEqual('simple');
        expect(statistic_1.parseStatistic(lib_1.Stats.AVERAGE).type).toEqual('simple');
        expect(statistic_1.parseStatistic(lib_1.Stats.SUM).type).toEqual('simple');
        expect(statistic_1.parseStatistic(lib_1.Stats.MINIMUM).type).toEqual('simple');
        expect(statistic_1.parseStatistic(lib_1.Stats.MAXIMUM).type).toEqual('simple');
        expect(statistic_1.parseStatistic(lib_1.Stats.IQM).type).toEqual('simple');
        /* eslint-disable no-multi-spaces */
        // Check single statistics
        checkParsingSingle('p9', 'p', 'percentile', 9);
        checkParsingSingle('p99', 'p', 'percentile', 99);
        checkParsingSingle('P99', 'p', 'percentile', 99);
        checkParsingSingle('p99.99', 'p', 'percentile', 99.99);
        checkParsingSingle('tm99', 'tm', 'trimmedMean', 99);
        checkParsingSingle('wm99', 'wm', 'winsorizedMean', 99);
        checkParsingSingle('tc99', 'tc', 'trimmedCount', 99);
        checkParsingSingle('ts99', 'ts', 'trimmedSum', 99);
        // Check all pair statistics
        checkParsingPair('TM(10%:90%)', 'TM', 'trimmedMean', true, false, undefined, 10, 90);
        checkParsingPair('TM(10.99%:90.99%)', 'TM', 'trimmedMean', true, false, undefined, 10.99, 90.99);
        checkParsingPair('WM(10%:90%)', 'WM', 'winsorizedMean', true, false, undefined, 10, 90);
        checkParsingPair('TC(10%:90%)', 'TC', 'trimmedCount', true, false, undefined, 10, 90);
        checkParsingPair('TS(10%:90%)', 'TS', 'trimmedSum', true, false, undefined, 10, 90);
        // Check can be represented as a single statistic
        checkParsingPair('TM(:90%)', 'TM', 'trimmedMean', true, true, 'tm90', undefined, 90);
        // Check every case
        checkParsingPair('tm(10%:90%)', 'TM', 'trimmedMean', true, false, undefined, 10, 90);
        checkParsingPair('TM(10%:90%)', 'TM', 'trimmedMean', true, false, undefined, 10, 90);
        checkParsingPair('TM(:90%)', 'TM', 'trimmedMean', true, true, 'tm90', undefined, 90);
        checkParsingPair('TM(10%:)', 'TM', 'trimmedMean', true, false, undefined, 10, undefined);
        checkParsingPair('TM(10:1500)', 'TM', 'trimmedMean', false, false, undefined, 10, 1500);
        checkParsingPair('TM(10:)', 'TM', 'trimmedMean', false, false, undefined, 10, undefined);
        checkParsingPair('TM(:5000)', 'TM', 'trimmedMean', false, false, undefined, undefined, 5000);
        checkParsingPair('TM(0.123456789:)', 'TM', 'trimmedMean', false, false, undefined, 0.123456789, undefined);
        checkParsingPair('TM(0.123456789:)', 'TM', 'trimmedMean', false, false, undefined, 0.123456789, undefined);
        checkParsingPair('TM(:0.123456789)', 'TM', 'trimmedMean', false, false, undefined, undefined, 0.123456789);
        checkParsingPair('TM(0.123456789%:)', 'TM', 'trimmedMean', true, false, undefined, 0.123456789, undefined);
        checkParsingPair('TM(:0.123456789%)', 'TM', 'trimmedMean', true, true, 'tm0.123456789', undefined, 0.123456789);
        checkParsingPair('TM(0.123:0.4543)', 'TM', 'trimmedMean', false, false, undefined, 0.123, 0.4543);
        checkParsingPair('TM(0.123%:0.4543%)', 'TM', 'trimmedMean', true, false, undefined, 0.123, 0.4543);
        checkParsingPair('TM(0.1000%:0.1000%)', 'TM', 'trimmedMean', true, false, undefined, 0.1, 0.1);
        checkParsingPair('TM(0.9999:100.9999)', 'TM', 'trimmedMean', false, false, undefined, 0.9999, 100.9999);
        /* eslint-enable no-multi-spaces */
        // Check invalid statistics
        expect(statistic_1.parseStatistic('p99.99.99').type).toEqual('generic');
        expect(statistic_1.parseStatistic('p200').type).toEqual('generic');
        expect(statistic_1.parseStatistic('pa99').type).toEqual('generic');
        expect(statistic_1.parseStatistic('99').type).toEqual('generic');
        expect(statistic_1.parseStatistic('tm1.').type).toEqual('generic');
        expect(statistic_1.parseStatistic('tm12.').type).toEqual('generic');
        expect(statistic_1.parseStatistic('tm123').type).toEqual('generic');
        expect(statistic_1.parseStatistic('tm123.123456789').type).toEqual('generic');
        expect(statistic_1.parseStatistic('tm.123456789').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(10:90%)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(10%:1500)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(10)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM()').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(0.:)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(:0.)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('()').type).toEqual('generic');
        expect(statistic_1.parseStatistic('(:)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(:)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(0.123456789%:%)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(0.123:0.4543%)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(0.123%:0.4543)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(1000%:)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(:1000%)').type).toEqual('generic');
        expect(statistic_1.parseStatistic('TM(1000%:1000%)').type).toEqual('generic');
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0cmljcy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWV0cmljcy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsb0RBQStDO0FBQy9DLHdDQUF3QztBQUN4Qyw4REFBMEQ7QUFDMUQscUNBQXFDO0FBQ3JDLGdDQUE4QztBQUM5Qyx3REFBMEY7QUFFMUYsUUFBUSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7SUFDdkIsSUFBSSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDeEIsUUFBUTtRQUNSLE1BQU0sS0FBSyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzlCLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFO1lBQzNDLFNBQVMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxZQUFZLEVBQUU7U0FDbEMsQ0FBQyxDQUFDO1FBRUgsT0FBTztRQUNQLFlBQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVoQyxPQUFPO1FBQ1AscUJBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMscUJBQXFCLENBQUMsa0JBQWtCLEVBQUU7WUFDbEUsY0FBYyxFQUFFO2dCQUNkLE9BQU8sRUFBRSxZQUFZO2dCQUNyQixTQUFTLEVBQUU7b0JBQ1Q7d0JBQ0UsTUFBTSxFQUFFLDBCQUEwQjt3QkFDbEMsTUFBTSxFQUFFLE9BQU87d0JBQ2YsUUFBUSxFQUFFLEdBQUc7cUJBQ2Q7aUJBQ0Y7YUFDRjtTQUNGLENBQUMsQ0FBQztJQUdMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtRQUNoRCxNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ1YsSUFBSSxZQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxRQUFR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LE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN0RCxNQUFNLENBQUMsMEJBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLDBCQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3RELE1BQU0sQ0FBQywwQkFBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN0RCxNQUFNLENBQUMsMEJBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNyRSxNQUFNLENBQUMsMEJBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsMEJBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsMEJBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0QsTUFBTSxDQUFDLDBCQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sQ0FBQywwQkFBYyxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3BFLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJ0Bhd3MtY2RrL2Fzc2VydGlvbnMnO1xuaW1wb3J0ICogYXMgaWFtIGZyb20gJ0Bhd3MtY2RrL2F3cy1pYW0nO1xuaW1wb3J0IHsgdGVzdERlcHJlY2F0ZWQgfSBmcm9tICdAYXdzLWNkay9jZGstYnVpbGQtdG9vbHMnO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0IHsgQWxhcm0sIE1ldHJpYywgU3RhdHMgfSBmcm9tICcuLi9saWInO1xuaW1wb3J0IHsgUGFpclN0YXRpc3RpYywgcGFyc2VTdGF0aXN0aWMsIFNpbmdsZVN0YXRpc3RpYyB9IGZyb20gJy4uL2xpYi9wcml2YXRlL3N0YXRpc3RpYyc7XG5cbmRlc2NyaWJlKCdNZXRyaWNzJywgKCkgPT4ge1xuICB0ZXN0KCdtZXRyaWMgZ3JhbnQnLCAoKSA9PiB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICBjb25zdCByb2xlID0gbmV3IGlhbS5Sb2xlKHN0YWNrLCAnU29tZVJvbGUnLCB7XG4gICAgICBhc3N1bWVkQnk6IG5ldyBpYW0uQW55UHJpbmNpcGFsKCksXG4gICAgfSk7XG5cbiAgICAvLyBXSEVOXG4gICAgTWV0cmljLmdyYW50UHV0TWV0cmljRGF0YShyb2xlKTtcblxuICAgIC8vIFRIRU5cbiAgICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpJQU06OlBvbGljeScsIHtcbiAgICAgIFBvbGljeURvY3VtZW50OiB7XG4gICAgICAgIFZlcnNpb246ICcyMDEyLTEwLTE3JyxcbiAgICAgICAgU3RhdGVtZW50OiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgQWN0aW9uOiAnY2xvdWR3YXRjaDpQdXRNZXRyaWNEYXRhJyxcbiAgICAgICAgICAgIEVmZmVjdDogJ0FsbG93JyxcbiAgICAgICAgICAgIFJlc291cmNlOiAnKicsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdjYW4gbm90IHVzZSBpbnZhbGlkIHBlcmlvZCBpbiBNZXRyaWMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIG5ldyBNZXRyaWMoeyBuYW1lc3BhY2U6ICdUZXN0JywgbWV0cmljTmFtZTogJ0FDb3VudCcsIHBlcmlvZDogY2RrLkR1cmF0aW9uLnNlY29uZHMoMjApIH0pO1xuICAgIH0pLnRvVGhyb3coLydwZXJpb2QnIG11c3QgYmUgMSwgNSwgMTAsIDMwLCBvciBhIG11bHRpcGxlIG9mIDYwIHNlY29uZHMsIHJlY2VpdmVkIDIwLyk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdNZXRyaWMgb3B0aW1pemF0aW9uOiBcIndpdGhcIiB3aXRoIHRoZSBzYW1lIHBlcmlvZCByZXR1cm5zIHRoZSBzYW1lIG9iamVjdCcsICgpID0+IHtcbiAgICBjb25zdCBtID0gbmV3IE1ldHJpYyh7IG5hbWVzcGFjZTogJ1Rlc3QnLCBtZXRyaWNOYW1lOiAnTWV0cmljJywgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcygxMCkgfSk7XG5cbiAgICAvLyBOb3RlOiBvYmplY3QgZXF1YWxpdHksIE5PVCBkZWVwIGVxdWFsaXR5IG9uIHB1cnBvc2VcbiAgICBleHBlY3QobS53aXRoKHt9KSkudG9FcXVhbChtKTtcbiAgICBleHBlY3QobS53aXRoKHsgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcygxMCkgfSkpLnRvRXF1YWwobSk7XG5cbiAgICBleHBlY3QobS53aXRoKHsgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcyg1KSB9KSkubm90LnRvRXF1YWwobSk7XG5cblxuICB9KTtcblxuICB0ZXN0RGVwcmVjYXRlZCgnY2Fubm90IHVzZSBudWxsIGRpbWVuc2lvbiB2YWx1ZScsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgbmV3IE1ldHJpYyh7XG4gICAgICAgIG5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgICBtZXRyaWNOYW1lOiAnQUNvdW50JyxcbiAgICAgICAgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcygxMCksXG4gICAgICAgIGRpbWVuc2lvbnM6IHtcbiAgICAgICAgICBEaW1lbnNpb25XaXRoTnVsbDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLnRvVGhyb3coL0RpbWVuc2lvbiB2YWx1ZSBvZiAnbnVsbCcgaXMgaW52YWxpZC8pO1xuXG5cbiAgfSk7XG5cbiAgdGVzdERlcHJlY2F0ZWQoJ2Nhbm5vdCB1c2UgdW5kZWZpbmVkIGRpbWVuc2lvbiB2YWx1ZScsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgbmV3IE1ldHJpYyh7XG4gICAgICAgIG5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgICBtZXRyaWNOYW1lOiAnQUNvdW50JyxcbiAgICAgICAgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcygxMCksXG4gICAgICAgIGRpbWVuc2lvbnM6IHtcbiAgICAgICAgICBEaW1lbnNpb25XaXRoVW5kZWZpbmVkOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KS50b1Rocm93KC9EaW1lbnNpb24gdmFsdWUgb2YgJ3VuZGVmaW5lZCcgaXMgaW52YWxpZC8pO1xuXG5cbiAgfSk7XG5cbiAgdGVzdERlcHJlY2F0ZWQoJ2Nhbm5vdCB1c2UgbG9uZyBkaW1lbnNpb24gdmFsdWVzJywgKCkgPT4ge1xuICAgIGNvbnN0IGFyciA9IG5ldyBBcnJheSgyNTYpO1xuICAgIGNvbnN0IGludmFsaWREaW1lbnNpb25WYWx1ZSA9IGFyci5maWxsKCdBJywgMCkuam9pbignJyk7XG5cbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgbmV3IE1ldHJpYyh7XG4gICAgICAgIG5hbWVzcGFjZTogJ1Rlc3QnLFxuICAgICAgICBtZXRyaWNOYW1lOiAnQUNvdW50JyxcbiAgICAgICAgcGVyaW9kOiBjZGsuRHVyYXRpb24ubWludXRlcygxMCksXG4gICAgICAgIGRpbWVuc2lvbnM6IHtcbiAgICAgICAgICBEaW1lbnNpb25XaXRoTG9uZ1ZhbHVlOiBpbnZhbGlkRGltZW5zaW9uVmFsdWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KS50b1Rocm93KGBEaW1lbnNpb24gdmFsdWUgbXVzdCBiZSBhdCBsZWFzdCAxIGFuZCBubyBtb3JlIHRoYW4gMjU1IGNoYXJhY3RlcnM7IHJlY2VpdmVkICR7aW52YWxpZERpbWVuc2lvblZhbHVlfWApO1xuXG5cbiAgfSk7XG5cbiAgdGVzdCgnY2Fubm90IHVzZSBsb25nIGRpbWVuc2lvbiB2YWx1ZXMgaW4gZGltZW5zaW9uc01hcCcsICgpID0+IHtcbiAgICBjb25zdCBhcnIgPSBuZXcgQXJyYXkoMjU2KTtcbiAgICBjb25zdCBpbnZhbGlkRGltZW5zaW9uVmFsdWUgPSBhcnIuZmlsbCgnQScsIDApLmpvaW4oJycpO1xuXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIG5ldyBNZXRyaWMoe1xuICAgICAgICBuYW1lc3BhY2U6ICdUZXN0JyxcbiAgICAgICAgbWV0cmljTmFtZTogJ0FDb3VudCcsXG4gICAgICAgIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApLFxuICAgICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgICAgRGltZW5zaW9uV2l0aExvbmdWYWx1ZTogaW52YWxpZERpbWVuc2lvblZhbHVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSkudG9UaHJvdyhgRGltZW5zaW9uIHZhbHVlIG11c3QgYmUgYXQgbGVhc3QgMSBhbmQgbm8gbW9yZSB0aGFuIDI1NSBjaGFyYWN0ZXJzOyByZWNlaXZlZCAke2ludmFsaWREaW1lbnNpb25WYWx1ZX1gKTtcblxuXG4gIH0pO1xuXG4gIHRlc3REZXByZWNhdGVkKCd0aHJvd3MgZXJyb3Igd2hlbiB0aGVyZSBhcmUgbW9yZSB0aGFuIDEwIGRpbWVuc2lvbnMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIG5ldyBNZXRyaWMoe1xuICAgICAgICBuYW1lc3BhY2U6ICdUZXN0JyxcbiAgICAgICAgbWV0cmljTmFtZTogJ0FDb3VudCcsXG4gICAgICAgIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApLFxuICAgICAgICBkaW1lbnNpb25zOiB7XG4gICAgICAgICAgZGltZW5zaW9uQTogJ3ZhbHVlMScsXG4gICAgICAgICAgZGltZW5zaW9uQjogJ3ZhbHVlMicsXG4gICAgICAgICAgZGltZW5zaW9uQzogJ3ZhbHVlMycsXG4gICAgICAgICAgZGltZW5zaW9uRDogJ3ZhbHVlNCcsXG4gICAgICAgICAgZGltZW5zaW9uRTogJ3ZhbHVlNScsXG4gICAgICAgICAgZGltZW5zaW9uRjogJ3ZhbHVlNicsXG4gICAgICAgICAgZGltZW5zaW9uRzogJ3ZhbHVlNycsXG4gICAgICAgICAgZGltZW5zaW9uSDogJ3ZhbHVlOCcsXG4gICAgICAgICAgZGltZW5zaW9uSTogJ3ZhbHVlOScsXG4gICAgICAgICAgZGltZW5zaW9uSjogJ3ZhbHVlMTAnLFxuICAgICAgICAgIGRpbWVuc2lvbks6ICd2YWx1ZTExJyxcbiAgICAgICAgfSxcbiAgICAgIH0gKTtcbiAgICB9KS50b1Rocm93KC9UaGUgbWF4aW11bSBudW1iZXIgb2YgZGltZW5zaW9ucyBpcyAxMCwgcmVjZWl2ZWQgMTEvKTtcblxuXG4gIH0pO1xuXG4gIHRlc3QoJ3Rocm93cyBlcnJvciB3aGVuIHRoZXJlIGFyZSBtb3JlIHRoYW4gMTAgZGltZW5zaW9ucyBpbiBkaW1lbnNpb25zTWFwJywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBuZXcgTWV0cmljKHtcbiAgICAgICAgbmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICAgIG1ldHJpY05hbWU6ICdBQ291bnQnLFxuICAgICAgICBwZXJpb2Q6IGNkay5EdXJhdGlvbi5taW51dGVzKDEwKSxcbiAgICAgICAgZGltZW5zaW9uc01hcDoge1xuICAgICAgICAgIGRpbWVuc2lvbkE6ICd2YWx1ZTEnLFxuICAgICAgICAgIGRpbWVuc2lvbkI6ICd2YWx1ZTInLFxuICAgICAgICAgIGRpbWVuc2lvbkM6ICd2YWx1ZTMnLFxuICAgICAgICAgIGRpbWVuc2lvbkQ6ICd2YWx1ZTQnLFxuICAgICAgICAgIGRpbWVuc2lvbkU6ICd2YWx1ZTUnLFxuICAgICAgICAgIGRpbWVuc2lvbkY6ICd2YWx1ZTYnLFxuICAgICAgICAgIGRpbWVuc2lvbkc6ICd2YWx1ZTcnLFxuICAgICAgICAgIGRpbWVuc2lvbkg6ICd2YWx1ZTgnLFxuICAgICAgICAgIGRpbWVuc2lvbkk6ICd2YWx1ZTknLFxuICAgICAgICAgIGRpbWVuc2lvbko6ICd2YWx1ZTEwJyxcbiAgICAgICAgICBkaW1lbnNpb25LOiAndmFsdWUxMScsXG4gICAgICAgIH0sXG4gICAgICB9ICk7XG4gICAgfSkudG9UaHJvdygvVGhlIG1heGltdW0gbnVtYmVyIG9mIGRpbWVuc2lvbnMgaXMgMTAsIHJlY2VpdmVkIDExLyk7XG5cblxuICB9KTtcblxuICB0ZXN0KCdjYW4gY3JlYXRlIG1ldHJpYyB3aXRoIGRpbWVuc2lvbnNNYXAgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gICAgY29uc3QgbWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdUZXN0JyxcbiAgICAgIG1ldHJpY05hbWU6ICdNZXRyaWMnLFxuICAgICAgZGltZW5zaW9uc01hcDoge1xuICAgICAgICBkaW1lbnNpb25BOiAndmFsdWUxJyxcbiAgICAgICAgZGltZW5zaW9uQjogJ3ZhbHVlMicsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgbmV3IEFsYXJtKHN0YWNrLCAnQWxhcm0nLCB7XG4gICAgICBtZXRyaWM6IG1ldHJpYyxcbiAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICBldmFsdWF0aW9uUGVyaW9kczogMSxcbiAgICB9KTtcblxuICAgIGV4cGVjdChtZXRyaWMuZGltZW5zaW9ucykudG9FcXVhbCh7XG4gICAgICBkaW1lbnNpb25BOiAndmFsdWUxJyxcbiAgICAgIGRpbWVuc2lvbkI6ICd2YWx1ZTInLFxuICAgIH0pO1xuICAgIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6OkNsb3VkV2F0Y2g6OkFsYXJtJywge1xuICAgICAgTmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICBNZXRyaWNOYW1lOiAnTWV0cmljJyxcbiAgICAgIERpbWVuc2lvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIE5hbWU6ICdkaW1lbnNpb25BJyxcbiAgICAgICAgICBWYWx1ZTogJ3ZhbHVlMScsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiAnZGltZW5zaW9uQicsXG4gICAgICAgICAgVmFsdWU6ICd2YWx1ZTInLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIFRocmVzaG9sZDogMTAsXG4gICAgICBFdmFsdWF0aW9uUGVyaW9kczogMSxcbiAgICB9KTtcblxuXG4gIH0pO1xuXG4gIHRlc3QoJ1wid2l0aFwiIHdpdGggYSBkaWZmZXJlbnQgZGltZW5zaW9ucyBwcm9wZXJ0eScsICgpID0+IHtcbiAgICBjb25zdCBkaW1zID0ge1xuICAgICAgZGltZW5zaW9uQTogJ3ZhbHVlMScsXG4gICAgfTtcblxuICAgIGNvbnN0IG1ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICBtZXRyaWNOYW1lOiAnTWV0cmljJyxcbiAgICAgIHBlcmlvZDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMTApLFxuICAgICAgZGltZW5zaW9uc01hcDogZGltcyxcbiAgICB9KTtcblxuICAgIGNvbnN0IG5ld0RpbXMgPSB7XG4gICAgICBkaW1lbnNpb25COiAndmFsdWUyJyxcbiAgICB9O1xuXG4gICAgZXhwZWN0KG1ldHJpYy53aXRoKHtcbiAgICAgIGRpbWVuc2lvbnNNYXA6IG5ld0RpbXMsXG4gICAgfSkuZGltZW5zaW9ucykudG9FcXVhbChuZXdEaW1zKTtcblxuXG4gIH0pO1xuXG4gIHRlc3QoJ21ldHJpYyBhY2NlcHRzIGEgdmFyaWV0eSBvZiBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbVN0YXQgPSAnbXlDdXN0b21TdGF0aXN0aWMnO1xuICAgIGNvbnN0IG1ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnVGVzdCcsXG4gICAgICBtZXRyaWNOYW1lOiAnTWV0cmljJyxcbiAgICAgIHN0YXRpc3RpYzogY3VzdG9tU3RhdCxcbiAgICB9KTtcblxuICAgIGV4cGVjdChtZXRyaWMuc3RhdGlzdGljKS50b0VxdWFsKGN1c3RvbVN0YXQpO1xuICB9KTtcblxuICB0ZXN0KCdzdGF0aXN0aWMgaXMgcHJvcGVybHkgcGFyc2VkJywgKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrUGFyc2luZ1NpbmdsZSA9IChzdGF0aXN0aWM6IHN0cmluZywgc3RhdFByZWZpeDogc3RyaW5nLCBzdGF0TmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVN0YXRpc3RpYyhzdGF0aXN0aWMpO1xuICAgICAgZXhwZWN0KHBhcnNlZC50eXBlKS50b0VxdWFsKCdzaW5nbGUnKTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFNpbmdsZVN0YXRpc3RpYykudmFsdWUpLnRvRXF1YWwodmFsdWUpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgU2luZ2xlU3RhdGlzdGljKS5zdGF0UHJlZml4KS50b0VxdWFsKHN0YXRQcmVmaXgpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgU2luZ2xlU3RhdGlzdGljKS5zdGF0TmFtZSkudG9FcXVhbChzdGF0TmFtZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNoZWNrUGFyc2luZ1BhaXIgPSAoXG4gICAgICBzdGF0aXN0aWM6IHN0cmluZyxcbiAgICAgIHN0YXRQcmVmaXg6IHN0cmluZyxcbiAgICAgIHN0YXROYW1lOiBzdHJpbmcsXG4gICAgICBpc1BlcmNlbnQ6IGJvb2xlYW4sXG4gICAgICBjYW5CZVNpbmdsZVN0YXQ6IGJvb2xlYW4sXG4gICAgICBhc1NpbmdsZVN0YXRTdHI/OiBzdHJpbmcsXG4gICAgICBsb3dlcj86IG51bWJlcixcbiAgICAgIHVwcGVyPzogbnVtYmVyLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VTdGF0aXN0aWMoc3RhdGlzdGljKTtcbiAgICAgIGV4cGVjdChwYXJzZWQudHlwZSkudG9FcXVhbCgncGFpcicpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgUGFpclN0YXRpc3RpYykuaXNQZXJjZW50KS50b0VxdWFsKGlzUGVyY2VudCk7XG4gICAgICBleHBlY3QoKHBhcnNlZCBhcyBQYWlyU3RhdGlzdGljKS5sb3dlcikudG9FcXVhbChsb3dlcik7XG4gICAgICBleHBlY3QoKHBhcnNlZCBhcyBQYWlyU3RhdGlzdGljKS51cHBlcikudG9FcXVhbCh1cHBlcik7XG4gICAgICBleHBlY3QoKHBhcnNlZCBhcyBQYWlyU3RhdGlzdGljKS5jYW5CZVNpbmdsZVN0YXQpLnRvRXF1YWwoY2FuQmVTaW5nbGVTdGF0KTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFBhaXJTdGF0aXN0aWMpLmFzU2luZ2xlU3RhdFN0cikudG9FcXVhbChhc1NpbmdsZVN0YXRTdHIpO1xuICAgICAgZXhwZWN0KChwYXJzZWQgYXMgUGFpclN0YXRpc3RpYykuc3RhdFByZWZpeCkudG9FcXVhbChzdGF0UHJlZml4KTtcbiAgICAgIGV4cGVjdCgocGFyc2VkIGFzIFBhaXJTdGF0aXN0aWMpLnN0YXROYW1lKS50b0VxdWFsKHN0YXROYW1lKTtcbiAgICB9O1xuXG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKFN0YXRzLlNBTVBMRV9DT1VOVCkudHlwZSkudG9FcXVhbCgnc2ltcGxlJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKFN0YXRzLkFWRVJBR0UpLnR5cGUpLnRvRXF1YWwoJ3NpbXBsZScpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYyhTdGF0cy5TVU0pLnR5cGUpLnRvRXF1YWwoJ3NpbXBsZScpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYyhTdGF0cy5NSU5JTVVNKS50eXBlKS50b0VxdWFsKCdzaW1wbGUnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoU3RhdHMuTUFYSU1VTSkudHlwZSkudG9FcXVhbCgnc2ltcGxlJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKFN0YXRzLklRTSkudHlwZSkudG9FcXVhbCgnc2ltcGxlJyk7XG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1tdWx0aS1zcGFjZXMgKi9cblxuICAgIC8vIENoZWNrIHNpbmdsZSBzdGF0aXN0aWNzXG4gICAgY2hlY2tQYXJzaW5nU2luZ2xlKCdwOScsICAgICAncCcsICAncGVyY2VudGlsZScsICAgICA5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ3A5OScsICAgICdwJywgICdwZXJjZW50aWxlJywgICAgIDk5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ1A5OScsICAgICdwJywgICdwZXJjZW50aWxlJywgICAgIDk5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ3A5OS45OScsICdwJywgICdwZXJjZW50aWxlJywgICAgIDk5Ljk5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ3RtOTknLCAgICd0bScsICd0cmltbWVkTWVhbicsICAgIDk5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ3dtOTknLCAgICd3bScsICd3aW5zb3JpemVkTWVhbicsIDk5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ3RjOTknLCAgICd0YycsICd0cmltbWVkQ291bnQnLCAgIDk5KTtcbiAgICBjaGVja1BhcnNpbmdTaW5nbGUoJ3RzOTknLCAgICd0cycsICd0cmltbWVkU3VtJywgICAgIDk5KTtcblxuICAgIC8vIENoZWNrIGFsbCBwYWlyIHN0YXRpc3RpY3NcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgxMCU6OTAlKScsICAgICAgICdUTScsICd0cmltbWVkTWVhbicsICAgIHRydWUsIGZhbHNlLCB1bmRlZmluZWQsIDEwLCAgICAgICAgOTApO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDEwLjk5JTo5MC45OSUpJywgJ1RNJywgJ3RyaW1tZWRNZWFuJywgICAgdHJ1ZSwgZmFsc2UsIHVuZGVmaW5lZCwgMTAuOTksICAgICA5MC45OSk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignV00oMTAlOjkwJSknLCAgICAgICAnV00nLCAnd2luc29yaXplZE1lYW4nLCB0cnVlLCBmYWxzZSwgdW5kZWZpbmVkLCAxMCwgICAgICAgIDkwKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUQygxMCU6OTAlKScsICAgICAgICdUQycsICd0cmltbWVkQ291bnQnLCAgIHRydWUsIGZhbHNlLCB1bmRlZmluZWQsIDEwLCAgICAgICAgOTApO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RTKDEwJTo5MCUpJywgICAgICAgJ1RTJywgJ3RyaW1tZWRTdW0nLCAgICAgdHJ1ZSwgZmFsc2UsIHVuZGVmaW5lZCwgMTAsICAgICAgICA5MCk7XG5cbiAgICAvLyBDaGVjayBjYW4gYmUgcmVwcmVzZW50ZWQgYXMgYSBzaW5nbGUgc3RhdGlzdGljXG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oOjkwJSknLCAgICAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCAgICB0cnVlLCB0cnVlLCAgJ3RtOTAnLCAgICB1bmRlZmluZWQsIDkwKTtcblxuICAgIC8vIENoZWNrIGV2ZXJ5IGNhc2VcbiAgICBjaGVja1BhcnNpbmdQYWlyKCd0bSgxMCU6OTAlKScsICAgICAgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgdHJ1ZSwgIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDEwLCAgICAgICAgICA5MCk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMTAlOjkwJSknLCAgICAgICAgICdUTScsICd0cmltbWVkTWVhbicsIHRydWUsICBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAxMCwgICAgICAgICAgOTApO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDo5MCUpJywgICAgICAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCB0cnVlLCAgdHJ1ZSwgICd0bTkwJywgICAgICAgICAgdW5kZWZpbmVkLCAgIDkwKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgxMCU6KScsICAgICAgICAgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgdHJ1ZSwgIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDEwLCAgICAgICAgICB1bmRlZmluZWQpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDEwOjE1MDApJywgICAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCBmYWxzZSwgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgMTAsICAgICAgICAgIDE1MDApO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDEwOiknLCAgICAgICAgICAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCBmYWxzZSwgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgMTAsICAgICAgICAgIHVuZGVmaW5lZCk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oOjUwMDApJywgICAgICAgICAgICdUTScsICd0cmltbWVkTWVhbicsIGZhbHNlLCBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICB1bmRlZmluZWQsICAgNTAwMCk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMC4xMjM0NTY3ODk6KScsICAgICdUTScsICd0cmltbWVkTWVhbicsIGZhbHNlLCBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAwLjEyMzQ1Njc4OSwgdW5kZWZpbmVkKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgwLjEyMzQ1Njc4OTopJywgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDAuMTIzNDU2Nzg5LCB1bmRlZmluZWQpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDowLjEyMzQ1Njc4OSknLCAgICAnVE0nLCAndHJpbW1lZE1lYW4nLCBmYWxzZSwgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgdW5kZWZpbmVkLCAgIDAuMTIzNDU2Nzg5KTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgwLjEyMzQ1Njc4OSU6KScsICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgdHJ1ZSwgIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDAuMTIzNDU2Nzg5LCB1bmRlZmluZWQpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDowLjEyMzQ1Njc4OSUpJywgICAnVE0nLCAndHJpbW1lZE1lYW4nLCB0cnVlLCAgdHJ1ZSwgICd0bTAuMTIzNDU2Nzg5JywgdW5kZWZpbmVkLCAgIDAuMTIzNDU2Nzg5KTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgwLjEyMzowLjQ1NDMpJywgICAgJ1RNJywgJ3RyaW1tZWRNZWFuJywgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDAuMTIzLCAgICAgICAwLjQ1NDMpO1xuICAgIGNoZWNrUGFyc2luZ1BhaXIoJ1RNKDAuMTIzJTowLjQ1NDMlKScsICAnVE0nLCAndHJpbW1lZE1lYW4nLCB0cnVlLCAgZmFsc2UsIHVuZGVmaW5lZCwgICAgICAgMC4xMjMsICAgICAgIDAuNDU0Myk7XG4gICAgY2hlY2tQYXJzaW5nUGFpcignVE0oMC4xMDAwJTowLjEwMDAlKScsICdUTScsICd0cmltbWVkTWVhbicsIHRydWUsICBmYWxzZSwgdW5kZWZpbmVkLCAgICAgICAwLjEsICAgICAgICAgMC4xKTtcbiAgICBjaGVja1BhcnNpbmdQYWlyKCdUTSgwLjk5OTk6MTAwLjk5OTkpJywgJ1RNJywgJ3RyaW1tZWRNZWFuJywgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQsICAgICAgIDAuOTk5OSwgICAgICAxMDAuOTk5OSk7XG5cbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW11bHRpLXNwYWNlcyAqL1xuXG4gICAgLy8gQ2hlY2sgaW52YWxpZCBzdGF0aXN0aWNzXG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdwOTkuOTkuOTknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdwMjAwJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygncGE5OScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJzk5JykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygndG0xLicpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ3RtMTIuJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygndG0xMjMnKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCd0bTEyMy4xMjM0NTY3ODknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCd0bS4xMjM0NTY3ODknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgxMDo5MCUpJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oMTAlOjE1MDApJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oMTApJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDAuOiknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSg6MC4pJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnKCknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCcoOiknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSg6KScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKCcpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDAuMTIzNDU2Nzg5JTolKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDAuMTIzOjAuNDU0MyUpJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oMC4xMjMlOjAuNDU0MyknKS50eXBlKS50b0VxdWFsKCdnZW5lcmljJyk7XG4gICAgZXhwZWN0KHBhcnNlU3RhdGlzdGljKCdUTSgxMDAwJTopJykudHlwZSkudG9FcXVhbCgnZ2VuZXJpYycpO1xuICAgIGV4cGVjdChwYXJzZVN0YXRpc3RpYygnVE0oOjEwMDAlKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgICBleHBlY3QocGFyc2VTdGF0aXN0aWMoJ1RNKDEwMDAlOjEwMDAlKScpLnR5cGUpLnRvRXF1YWwoJ2dlbmVyaWMnKTtcbiAgfSk7XG59KTtcbiJdfQ==