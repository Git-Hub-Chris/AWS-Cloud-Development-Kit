[
  {
    "Resources": {
      "baseApiCDA4D43A": {
        "Type": "AWS::AppSync::GraphQLApi",
        "Properties": {
          "AuthenticationType": "API_KEY",
          "Name": "baseApi"
        }
      },
      "baseApiDefaultAPIKeyApiKey4804ACE5": {
        "Type": "AWS::AppSync::ApiKey",
        "Properties": {
          "ApiId": {
            "Fn::GetAtt": [
              "baseApiCDA4D43A",
              "ApiId"
            ]
          },
          "Description": "Default API Key created by CDK"
        }
      },
      "baseApiSchemaB12C7BB0": {
        "Type": "AWS::AppSync::GraphQLSchema",
        "Properties": {
          "ApiId": {
            "Fn::GetAtt": [
              "baseApiCDA4D43A",
              "ApiId"
            ]
          },
          "Definition": "type test {\n  version: String!\n}\n\ntype Query {\n  getTests: [ test! ]!\n}\n\ntype Mutation {\n  addTest(version: String!): test\n}\n"
        }
      }
    },
    "Outputs": {
      "ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68": {
        "Value": {
          "Fn::GetAtt": [
            "baseApiCDA4D43A",
            "ApiId"
          ]
        },
        "Export": {
          "Name": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
        }
      }
    }
  },
  {
    "Resources": {
      "ApiTableCDKDefaultServiceRoleF54231AA": {
        "Type": "AWS::IAM::Role",
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "appsync.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          }
        }
      },
      "ApiTableCDKDefaultServiceRoleDefaultPolicy745D6657": {
        "Type": "AWS::IAM::Policy",
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": [
                  "dynamodb:BatchGetItem",
                  "dynamodb:GetRecords",
                  "dynamodb:GetShardIterator",
                  "dynamodb:Query",
                  "dynamodb:GetItem",
                  "dynamodb:Scan",
                  "dynamodb:BatchWriteItem",
                  "dynamodb:PutItem",
                  "dynamodb:UpdateItem",
                  "dynamodb:DeleteItem"
                ],
                "Effect": "Allow",
                "Resource": [
                  {
                    "Fn::GetAtt": [
                      "TestTable5769773A",
                      "Arn"
                    ]
                  },
                  {
                    "Ref": "AWS::NoValue"
                  }
                ]
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "ApiTableCDKDefaultServiceRoleDefaultPolicy745D6657",
          "Roles": [
            {
              "Ref": "ApiTableCDKDefaultServiceRoleF54231AA"
            }
          ]
        }
      },
      "ApiTableCDKDefault0035EEA0": {
        "Type": "AWS::AppSync::DataSource",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "Name": "TableCDKDefault",
          "Type": "AMAZON_DYNAMODB",
          "DynamoDBConfig": {
            "AwsRegion": {
              "Ref": "AWS::Region"
            },
            "TableName": {
              "Ref": "TestTable5769773A"
            }
          },
          "ServiceRoleArn": {
            "Fn::GetAtt": [
              "ApiTableCDKDefaultServiceRoleF54231AA",
              "Arn"
            ]
          }
        }
      },
      "ApiTableCDKDefaultQuerygetTestsResolverCB3712E2": {
        "Type": "AWS::AppSync::Resolver",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "FieldName": "getTests",
          "TypeName": "Query",
          "DataSourceName": "TableCDKDefault",
          "Kind": "UNIT",
          "RequestMappingTemplate": "{\"version\" : \"2017-02-28\", \"operation\" : \"Scan\"}",
          "ResponseMappingTemplate": "$util.toJson($ctx.result.items)"
        },
        "DependsOn": [
          "ApiTableCDKDefault0035EEA0"
        ]
      },
      "ApiTableCDKDefaultMutationaddTestResolver8087CE09": {
        "Type": "AWS::AppSync::Resolver",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "FieldName": "addTest",
          "TypeName": "Mutation",
          "DataSourceName": "TableCDKDefault",
          "Kind": "UNIT",
          "RequestMappingTemplate": "\n      #set($input = $ctx.args.test)\n      \n      {\n        \"version\": \"2017-02-28\",\n        \"operation\": \"PutItem\",\n        \"key\" : {\n      \"id\" : $util.dynamodb.toDynamoDBJson($util.autoId())\n    },\n        \"attributeValues\": $util.dynamodb.toMapValuesJson($input)\n      }",
          "ResponseMappingTemplate": "$util.toJson($ctx.result)"
        },
        "DependsOn": [
          "ApiTableCDKDefault0035EEA0"
        ]
      },
      "TestTable5769773A": {
        "Type": "AWS::DynamoDB::Table",
        "Properties": {
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingMode": "PAY_PER_REQUEST"
        },
        "UpdateReplacePolicy": "Delete",
        "DeletionPolicy": "Delete"
      },
      "api2NoneCDKDefaultCFB889A5": {
        "Type": "AWS::AppSync::DataSource",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "Name": "NoneCDKDefault",
          "Type": "NONE"
        }
      }
    }
  }
]