"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const integ_tests_alpha_1 = require("@aws-cdk/integ-tests-alpha");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_codepipeline_1 = require("aws-cdk-lib/aws-codepipeline");
const aws_codepipeline_actions_1 = require("aws-cdk-lib/aws-codepipeline-actions");
const aws_kms_1 = require("aws-cdk-lib/aws-kms");
const aws_lambda_1 = require("aws-cdk-lib/aws-lambda");
const aws_s3_1 = require("aws-cdk-lib/aws-s3");
const s3Deployment = require("aws-cdk-lib/aws-s3-deployment");
const aws_secretsmanager_1 = require("aws-cdk-lib/aws-secretsmanager");
const aws_ssm_1 = require("aws-cdk-lib/aws-ssm");
const lib_1 = require("../lib");
const SCHEMA_STR = `{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "string"
}`;
const LAMBDA_CODE = `
def handler(event, context):
  print('This is my dummy validator')
`;
const app = new aws_cdk_lib_1.App({
    postCliContext: {
        '@aws-cdk/aws-codepipeline:defaultPipelineTypeToV2': false,
    },
});
const stack = new aws_cdk_lib_1.Stack(app, 'aws-appconfig-configuration');
// create application for config profile
const appConfigApp = new lib_1.Application(stack, 'MyAppConfig', {
    applicationName: 'AppForConfigTest',
});
const deploymentStrategy = new lib_1.DeploymentStrategy(stack, 'MyDeployStrategy', {
    rolloutStrategy: lib_1.RolloutStrategy.linear({
        growthFactor: 100,
        deploymentDuration: aws_cdk_lib_1.Duration.minutes(0),
    }),
});
// hosted config from file
new lib_1.HostedConfiguration(stack, 'MyHostedConfigFromFile', {
    application: appConfigApp,
    content: lib_1.ConfigurationContent.fromFile('config.json'),
});
// create basic config profile and add config version
const hostedEnv = appConfigApp.addEnvironment('HostedEnv');
new lib_1.HostedConfiguration(stack, 'MyHostedConfig', {
    application: appConfigApp,
    content: lib_1.ConfigurationContent.fromInlineText('This is my configuration content.'),
    deployTo: [hostedEnv],
    validators: [
        lib_1.JsonSchemaValidator.fromInline(SCHEMA_STR),
        lib_1.JsonSchemaValidator.fromFile('schema.json'),
    ],
    deploymentStrategy,
});
// create basic config profile from add config version from file
const hostedEnvFromJson = appConfigApp.addEnvironment('HostedEnvFromJson');
const config = new lib_1.HostedConfiguration(stack, 'MyHostedConfigFromJson', {
    application: appConfigApp,
    content: lib_1.ConfigurationContent.fromInlineText('This is the configuration content'),
    deployTo: [hostedEnvFromJson],
    deploymentStrategy,
});
const hostedEnvFromYaml = appConfigApp.addEnvironment('HostedEnvFromYaml');
new lib_1.HostedConfiguration(stack, 'MyHostedConfigFromYaml', {
    application: appConfigApp,
    content: lib_1.ConfigurationContent.fromInlineYaml('This is the configuration content'),
    deployTo: [hostedEnvFromYaml],
    deploymentStrategy,
});
// verify a configuration can be deployed through the deploy method
const envToDeployLater = appConfigApp.addEnvironment('EnvDeployLater');
config.deploy(envToDeployLater);
// ssm paramter as configuration source
const func = new aws_lambda_1.Function(stack, 'MyValidatorFunction', {
    runtime: aws_lambda_1.Runtime.PYTHON_3_8,
    handler: 'index.handler',
    code: aws_lambda_1.Code.fromInline(LAMBDA_CODE),
});
const parameterEnv = appConfigApp.addEnvironment('ParameterEnv');
const ssmParameter = new aws_ssm_1.StringParameter(stack, 'MyParameter', {
    stringValue: 'This is the content stored in ssm parameter',
});
new lib_1.SourcedConfiguration(stack, 'MyConfigFromParameter', {
    name: 'TestConfigProfileStoredAsParamater',
    application: appConfigApp,
    description: 'This is a configuration profile used for integ testing',
    location: lib_1.ConfigurationSource.fromParameter(ssmParameter),
    versionNumber: '1',
    deployTo: [parameterEnv],
    validators: [
        lib_1.LambdaValidator.fromFunction(func),
    ],
    deploymentStrategy,
});
// ssm document as configuration source
const documentEnv = appConfigApp.addEnvironment('DocumentEnv');
const ssmDocument = new aws_ssm_1.CfnDocument(stack, 'MyDocument', {
    content: {
        schemaVersion: '2.2',
        description: 'Sample SSM Document',
        mainSteps: [
            {
                action: 'aws:runShellScript',
                name: 'step1',
                inputs: {
                    runCommand: [
                        'echo "Hello, World!"',
                    ],
                },
            },
        ],
    },
    documentType: 'Command',
    name: 'TestDocument',
});
new lib_1.SourcedConfiguration(stack, 'MyConfigFromDocument', {
    application: appConfigApp,
    location: lib_1.ConfigurationSource.fromCfnDocument(ssmDocument),
    versionNumber: '1',
    deployTo: [documentEnv],
    deploymentStrategy,
});
// S3 as configuration source
const bucketEnv = appConfigApp.addEnvironment('BucketEnv');
const bucket = new aws_s3_1.Bucket(stack, 'MyBucket', {
    versioned: true,
    removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
});
bucket.applyRemovalPolicy(aws_cdk_lib_1.RemovalPolicy.DESTROY);
const deployment = new s3Deployment.BucketDeployment(stack, 'DeployConfigInBucket', {
    sources: [s3Deployment.Source.data('hello/world/file.txt', 'This is the content stored in S3')],
    destinationBucket: bucket,
    retainOnDelete: false,
});
new lib_1.SourcedConfiguration(stack, 'MyConfigFromBucket', {
    application: appConfigApp,
    location: lib_1.ConfigurationSource.fromBucket(bucket, 'hello/world/file.txt'),
    description: `Sourced from ${aws_cdk_lib_1.Fn.select(0, deployment.objectKeys)}`,
    deployTo: [bucketEnv],
});
// secrets manager as configuration source (without key)
const secretEnv = appConfigApp.addEnvironment('SecretEnv');
const secret = new aws_secretsmanager_1.Secret(stack, 'MySecret', {
    secretStringValue: aws_cdk_lib_1.SecretValue.unsafePlainText('This is the content stored in secrets manager'),
});
new lib_1.SourcedConfiguration(stack, 'MyConfigFromSecret', {
    application: appConfigApp,
    location: lib_1.ConfigurationSource.fromSecret(secret),
    deployTo: [secretEnv],
});
// secrets manager as configuration source (with key)
const secretWithKeyEnv = appConfigApp.addEnvironment('SecretEnvWithKey');
const key = new aws_kms_1.Key(stack, 'MyKey');
const secretWithKey = new aws_secretsmanager_1.Secret(stack, 'MySecretWithKey', {
    secretStringValue: aws_cdk_lib_1.SecretValue.unsafePlainText('This is the content stored in secrets manager'),
    encryptionKey: key,
});
new lib_1.SourcedConfiguration(stack, 'MyConfigFromSecretWithKey', {
    location: lib_1.ConfigurationSource.fromSecret(secretWithKey),
    deploymentKey: key,
    application: appConfigApp,
    deployTo: [secretWithKeyEnv],
});
// code pipeline as configuration source
deployment.addSource(s3Deployment.Source.data('hello/world/codepipeline.txt', 'This is the content stored in code pipeline'));
const sourceAction = new aws_codepipeline_actions_1.S3SourceAction({
    actionName: 'Source',
    bucket: bucket,
    bucketKey: 'hello/world/codepipeline.txt',
    output: new aws_codepipeline_1.Artifact('SourceOutput'),
});
const deployAction = new aws_codepipeline_actions_1.S3DeployAction({
    actionName: 'Deploy',
    input: aws_codepipeline_1.Artifact.artifact('SourceOutput'),
    bucket: bucket,
    extract: true,
});
const pipeline = new aws_codepipeline_1.Pipeline(stack, 'MyPipeline', {
    crossAccountKeys: true,
    stages: [
        {
            stageName: 'beta',
            actions: [sourceAction],
        },
        {
            stageName: 'prod',
            actions: [deployAction],
        },
    ],
});
new lib_1.SourcedConfiguration(stack, 'MyConfigFromPipeline', {
    application: appConfigApp,
    location: lib_1.ConfigurationSource.fromPipeline(pipeline),
});
/* resource deployment alone is sufficient because we already have the
   corresponding resource handler tests to assert that resources can be
   used after created */
new integ_tests_alpha_1.IntegTest(app, 'appconfig-configuration', {
    testCases: [stack],
    cdkCommandOptions: {
        destroy: {
            args: {
                force: true,
            },
        },
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcuY29uZmlndXJhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludGVnLmNvbmZpZ3VyYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrRUFBdUQ7QUFDdkQsNkNBQW1GO0FBQ25GLG1FQUFrRTtBQUNsRSxtRkFBc0Y7QUFDdEYsaURBQTBDO0FBQzFDLHVEQUFpRTtBQUNqRSwrQ0FBNEM7QUFDNUMsOERBQThEO0FBQzlELHVFQUF3RDtBQUN4RCxpREFBbUU7QUFDbkUsZ0NBVWdCO0FBRWhCLE1BQU0sVUFBVSxHQUNoQjs7O0VBR0UsQ0FBQztBQUVILE1BQU0sV0FBVyxHQUNqQjs7O0NBR0MsQ0FBQztBQUVGLE1BQU0sR0FBRyxHQUFHLElBQUksaUJBQUcsQ0FBQztJQUNsQixjQUFjLEVBQUU7UUFDZCxtREFBbUQsRUFBRSxLQUFLO0tBQzNEO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsTUFBTSxLQUFLLEdBQUcsSUFBSSxtQkFBSyxDQUFDLEdBQUcsRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO0FBRTVELHdDQUF3QztBQUN4QyxNQUFNLFlBQVksR0FBRyxJQUFJLGlCQUFXLENBQUMsS0FBSyxFQUFFLGFBQWEsRUFBRTtJQUN6RCxlQUFlLEVBQUUsa0JBQWtCO0NBQ3BDLENBQUMsQ0FBQztBQUVILE1BQU0sa0JBQWtCLEdBQUcsSUFBSSx3QkFBa0IsQ0FBQyxLQUFLLEVBQUUsa0JBQWtCLEVBQUU7SUFDM0UsZUFBZSxFQUFFLHFCQUFlLENBQUMsTUFBTSxDQUFDO1FBQ3RDLFlBQVksRUFBRSxHQUFHO1FBQ2pCLGtCQUFrQixFQUFFLHNCQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztLQUN4QyxDQUFDO0NBQ0gsQ0FBQyxDQUFDO0FBRUgsMEJBQTBCO0FBQzFCLElBQUkseUJBQW1CLENBQUMsS0FBSyxFQUFFLHdCQUF3QixFQUFFO0lBQ3ZELFdBQVcsRUFBRSxZQUFZO0lBQ3pCLE9BQU8sRUFBRSwwQkFBb0IsQ0FBQyxR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RCxDQUFDLENBQUM7QUFFSDs7d0JBRXdCO0FBRXhCLElBQUksNkJBQVMsQ0FBQyxHQUFHLEVBQUUseUJBQXlCLEVBQUU7SUFDNUMsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDO0lBQ2xCLGlCQUFpQixFQUFFO1FBQ2pCLE9BQU8sRUFBRTtZQUNQLElBQUksRUFBRTtnQkFDSixLQUFLLEVBQUUsSUFBSTthQUNaO1NBQ0Y7S0FDRjtDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEludGVnVGVzdCB9IGZyb20gJ0Bhd3MtY2RrL2ludGVnLXRlc3RzLWFscGhhJztcbmltcG9ydCB7IEFwcCwgRHVyYXRpb24sIFN0YWNrLCBSZW1vdmFsUG9saWN5LCBGbiwgU2VjcmV0VmFsdWUgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBBcnRpZmFjdCwgUGlwZWxpbmUgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtY29kZXBpcGVsaW5lJztcbmltcG9ydCB7IFMzRGVwbG95QWN0aW9uLCBTM1NvdXJjZUFjdGlvbiB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1jb2RlcGlwZWxpbmUtYWN0aW9ucyc7XG5pbXBvcnQgeyBLZXkgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3Mta21zJztcbmltcG9ydCB7IENvZGUsIEZ1bmN0aW9uLCBSdW50aW1lIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWxhbWJkYSc7XG5pbXBvcnQgeyBCdWNrZXQgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtczMnO1xuaW1wb3J0ICogYXMgczNEZXBsb3ltZW50IGZyb20gJ2F3cy1jZGstbGliL2F3cy1zMy1kZXBsb3ltZW50JztcbmltcG9ydCB7IFNlY3JldCB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1zZWNyZXRzbWFuYWdlcic7XG5pbXBvcnQgeyBDZm5Eb2N1bWVudCwgU3RyaW5nUGFyYW1ldGVyIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLXNzbSc7XG5pbXBvcnQge1xuICBBcHBsaWNhdGlvbixcbiAgQ29uZmlndXJhdGlvbkNvbnRlbnQsXG4gIENvbmZpZ3VyYXRpb25Tb3VyY2UsXG4gIERlcGxveW1lbnRTdHJhdGVneSxcbiAgSG9zdGVkQ29uZmlndXJhdGlvbixcbiAgSnNvblNjaGVtYVZhbGlkYXRvcixcbiAgTGFtYmRhVmFsaWRhdG9yLFxuICBSb2xsb3V0U3RyYXRlZ3ksXG4gIFNvdXJjZWRDb25maWd1cmF0aW9uLFxufSBmcm9tICcuLi9saWInO1xuXG5jb25zdCBTQ0hFTUFfU1RSID1cbmB7XG4gIFwiJHNjaGVtYVwiOiBcImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hI1wiLFxuICBcInR5cGVcIjogXCJzdHJpbmdcIlxufWA7XG5cbmNvbnN0IExBTUJEQV9DT0RFID1cbmBcbmRlZiBoYW5kbGVyKGV2ZW50LCBjb250ZXh0KTpcbiAgcHJpbnQoJ1RoaXMgaXMgbXkgZHVtbXkgdmFsaWRhdG9yJylcbmA7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoe1xuICBwb3N0Q2xpQ29udGV4dDoge1xuICAgICdAYXdzLWNkay9hd3MtY29kZXBpcGVsaW5lOmRlZmF1bHRQaXBlbGluZVR5cGVUb1YyJzogZmFsc2UsXG4gIH0sXG59KTtcblxuY29uc3Qgc3RhY2sgPSBuZXcgU3RhY2soYXBwLCAnYXdzLWFwcGNvbmZpZy1jb25maWd1cmF0aW9uJyk7XG5cbi8vIGNyZWF0ZSBhcHBsaWNhdGlvbiBmb3IgY29uZmlnIHByb2ZpbGVcbmNvbnN0IGFwcENvbmZpZ0FwcCA9IG5ldyBBcHBsaWNhdGlvbihzdGFjaywgJ015QXBwQ29uZmlnJywge1xuICBhcHBsaWNhdGlvbk5hbWU6ICdBcHBGb3JDb25maWdUZXN0Jyxcbn0pO1xuXG5jb25zdCBkZXBsb3ltZW50U3RyYXRlZ3kgPSBuZXcgRGVwbG95bWVudFN0cmF0ZWd5KHN0YWNrLCAnTXlEZXBsb3lTdHJhdGVneScsIHtcbiAgcm9sbG91dFN0cmF0ZWd5OiBSb2xsb3V0U3RyYXRlZ3kubGluZWFyKHtcbiAgICBncm93dGhGYWN0b3I6IDEwMCxcbiAgICBkZXBsb3ltZW50RHVyYXRpb246IER1cmF0aW9uLm1pbnV0ZXMoMCksXG4gIH0pLFxufSk7XG5cbi8vIGhvc3RlZCBjb25maWcgZnJvbSBmaWxlXG5uZXcgSG9zdGVkQ29uZmlndXJhdGlvbihzdGFjaywgJ015SG9zdGVkQ29uZmlnRnJvbUZpbGUnLCB7XG4gIGFwcGxpY2F0aW9uOiBhcHBDb25maWdBcHAsXG4gIGNvbnRlbnQ6IENvbmZpZ3VyYXRpb25Db250ZW50LmZyb21GaWxlKCdjb25maWcuanNvbicpLFxufSk7XG5cbi8vIGNyZWF0ZSBiYXNpYyBjb25maWcgcHJvZmlsZSBhbmQgYWRkIGNvbmZpZyB2ZXJzaW9uXG5jb25zdCBob3N0ZWRFbnYgPSBhcHBDb25maWdBcHAuYWRkRW52aXJvbm1lbnQoJ0hvc3RlZEVudicpO1xubmV3IEhvc3RlZENvbmZpZ3VyYXRpb24oc3RhY2ssICdNeUhvc3RlZENvbmZpZycsIHtcbiAgYXBwbGljYXRpb246IGFwcENvbmZpZ0FwcCxcbiAgY29udGVudDogQ29uZmlndXJhdGlvbkNvbnRlbnQuZnJvbUlubGluZVRleHQoJ1RoaXMgaXMgbXkgY29uZmlndXJhdGlvbiBjb250ZW50LicpLFxuICBkZXBsb3lUbzogW2hvc3RlZEVudl0sXG4gIHZhbGlkYXRvcnM6IFtcbiAgICBKc29uU2NoZW1hVmFsaWRhdG9yLmZyb21JbmxpbmUoU0NIRU1BX1NUUiksXG4gICAgSnNvblNjaGVtYVZhbGlkYXRvci5mcm9tRmlsZSgnc2NoZW1hLmpzb24nKSxcbiAgXSxcbiAgZGVwbG95bWVudFN0cmF0ZWd5LFxufSk7XG5cbi8vIGNyZWF0ZSBiYXNpYyBjb25maWcgcHJvZmlsZSBmcm9tIGFkZCBjb25maWcgdmVyc2lvbiBmcm9tIGZpbGVcbmNvbnN0IGhvc3RlZEVudkZyb21Kc29uID0gYXBwQ29uZmlnQXBwLmFkZEVudmlyb25tZW50KCdIb3N0ZWRFbnZGcm9tSnNvbicpO1xuY29uc3QgY29uZmlnID0gbmV3IEhvc3RlZENvbmZpZ3VyYXRpb24oc3RhY2ssICdNeUhvc3RlZENvbmZpZ0Zyb21Kc29uJywge1xuICBhcHBsaWNhdGlvbjogYXBwQ29uZmlnQXBwLFxuICBjb250ZW50OiBDb25maWd1cmF0aW9uQ29udGVudC5mcm9tSW5saW5lVGV4dCgnVGhpcyBpcyB0aGUgY29uZmlndXJhdGlvbiBjb250ZW50JyksXG4gIGRlcGxveVRvOiBbaG9zdGVkRW52RnJvbUpzb25dLFxuICBkZXBsb3ltZW50U3RyYXRlZ3ksXG59KTtcblxuY29uc3QgaG9zdGVkRW52RnJvbVlhbWwgPSBhcHBDb25maWdBcHAuYWRkRW52aXJvbm1lbnQoJ0hvc3RlZEVudkZyb21ZYW1sJyk7XG5uZXcgSG9zdGVkQ29uZmlndXJhdGlvbihzdGFjaywgJ015SG9zdGVkQ29uZmlnRnJvbVlhbWwnLCB7XG4gIGFwcGxpY2F0aW9uOiBhcHBDb25maWdBcHAsXG4gIGNvbnRlbnQ6IENvbmZpZ3VyYXRpb25Db250ZW50LmZyb21JbmxpbmVZYW1sKCdUaGlzIGlzIHRoZSBjb25maWd1cmF0aW9uIGNvbnRlbnQnKSxcbiAgZGVwbG95VG86IFtob3N0ZWRFbnZGcm9tWWFtbF0sXG4gIGRlcGxveW1lbnRTdHJhdGVneSxcbn0pO1xuXG4vLyB2ZXJpZnkgYSBjb25maWd1cmF0aW9uIGNhbiBiZSBkZXBsb3llZCB0aHJvdWdoIHRoZSBkZXBsb3kgbWV0aG9kXG5jb25zdCBlbnZUb0RlcGxveUxhdGVyID0gYXBwQ29uZmlnQXBwLmFkZEVudmlyb25tZW50KCdFbnZEZXBsb3lMYXRlcicpO1xuY29uZmlnLmRlcGxveShlbnZUb0RlcGxveUxhdGVyKTtcblxuLy8gc3NtIHBhcmFtdGVyIGFzIGNvbmZpZ3VyYXRpb24gc291cmNlXG5jb25zdCBmdW5jID0gbmV3IEZ1bmN0aW9uKHN0YWNrLCAnTXlWYWxpZGF0b3JGdW5jdGlvbicsIHtcbiAgcnVudGltZTogUnVudGltZS5QWVRIT05fM184LFxuICBoYW5kbGVyOiAnaW5kZXguaGFuZGxlcicsXG4gIGNvZGU6IENvZGUuZnJvbUlubGluZShMQU1CREFfQ09ERSksXG59KTtcbmNvbnN0IHBhcmFtZXRlckVudiA9IGFwcENvbmZpZ0FwcC5hZGRFbnZpcm9ubWVudCgnUGFyYW1ldGVyRW52Jyk7XG5jb25zdCBzc21QYXJhbWV0ZXIgPSBuZXcgU3RyaW5nUGFyYW1ldGVyKHN0YWNrLCAnTXlQYXJhbWV0ZXInLCB7XG4gIHN0cmluZ1ZhbHVlOiAnVGhpcyBpcyB0aGUgY29udGVudCBzdG9yZWQgaW4gc3NtIHBhcmFtZXRlcicsXG59KTtcbm5ldyBTb3VyY2VkQ29uZmlndXJhdGlvbihzdGFjaywgJ015Q29uZmlnRnJvbVBhcmFtZXRlcicsIHtcbiAgbmFtZTogJ1Rlc3RDb25maWdQcm9maWxlU3RvcmVkQXNQYXJhbWF0ZXInLFxuICBhcHBsaWNhdGlvbjogYXBwQ29uZmlnQXBwLFxuICBkZXNjcmlwdGlvbjogJ1RoaXMgaXMgYSBjb25maWd1cmF0aW9uIHByb2ZpbGUgdXNlZCBmb3IgaW50ZWcgdGVzdGluZycsXG4gIGxvY2F0aW9uOiBDb25maWd1cmF0aW9uU291cmNlLmZyb21QYXJhbWV0ZXIoc3NtUGFyYW1ldGVyKSxcbiAgdmVyc2lvbk51bWJlcjogJzEnLFxuICBkZXBsb3lUbzogW3BhcmFtZXRlckVudl0sXG4gIHZhbGlkYXRvcnM6IFtcbiAgICBMYW1iZGFWYWxpZGF0b3IuZnJvbUZ1bmN0aW9uKGZ1bmMpLFxuICBdLFxuICBkZXBsb3ltZW50U3RyYXRlZ3ksXG59KTtcblxuLy8gc3NtIGRvY3VtZW50IGFzIGNvbmZpZ3VyYXRpb24gc291cmNlXG5jb25zdCBkb2N1bWVudEVudiA9IGFwcENvbmZpZ0FwcC5hZGRFbnZpcm9ubWVudCgnRG9jdW1lbnRFbnYnKTtcbmNvbnN0IHNzbURvY3VtZW50ID0gbmV3IENmbkRvY3VtZW50KHN0YWNrLCAnTXlEb2N1bWVudCcsIHtcbiAgY29udGVudDoge1xuICAgIHNjaGVtYVZlcnNpb246ICcyLjInLFxuICAgIGRlc2NyaXB0aW9uOiAnU2FtcGxlIFNTTSBEb2N1bWVudCcsXG4gICAgbWFpblN0ZXBzOiBbXG4gICAgICB7XG4gICAgICAgIGFjdGlvbjogJ2F3czpydW5TaGVsbFNjcmlwdCcsXG4gICAgICAgIG5hbWU6ICdzdGVwMScsXG4gICAgICAgIGlucHV0czoge1xuICAgICAgICAgIHJ1bkNvbW1hbmQ6IFtcbiAgICAgICAgICAgICdlY2hvIFwiSGVsbG8sIFdvcmxkIVwiJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICBkb2N1bWVudFR5cGU6ICdDb21tYW5kJyxcbiAgbmFtZTogJ1Rlc3REb2N1bWVudCcsXG59KTtcbm5ldyBTb3VyY2VkQ29uZmlndXJhdGlvbihzdGFjaywgJ015Q29uZmlnRnJvbURvY3VtZW50Jywge1xuICBhcHBsaWNhdGlvbjogYXBwQ29uZmlnQXBwLFxuICBsb2NhdGlvbjogQ29uZmlndXJhdGlvblNvdXJjZS5mcm9tQ2ZuRG9jdW1lbnQoc3NtRG9jdW1lbnQpLFxuICB2ZXJzaW9uTnVtYmVyOiAnMScsXG4gIGRlcGxveVRvOiBbZG9jdW1lbnRFbnZdLFxuICBkZXBsb3ltZW50U3RyYXRlZ3ksXG59KTtcblxuLy8gUzMgYXMgY29uZmlndXJhdGlvbiBzb3VyY2VcbmNvbnN0IGJ1Y2tldEVudiA9IGFwcENvbmZpZ0FwcC5hZGRFbnZpcm9ubWVudCgnQnVja2V0RW52Jyk7XG5jb25zdCBidWNrZXQgPSBuZXcgQnVja2V0KHN0YWNrLCAnTXlCdWNrZXQnLCB7XG4gIHZlcnNpb25lZDogdHJ1ZSxcbiAgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxufSk7XG5idWNrZXQuYXBwbHlSZW1vdmFsUG9saWN5KFJlbW92YWxQb2xpY3kuREVTVFJPWSk7XG5jb25zdCBkZXBsb3ltZW50ID0gbmV3IHMzRGVwbG95bWVudC5CdWNrZXREZXBsb3ltZW50KHN0YWNrLCAnRGVwbG95Q29uZmlnSW5CdWNrZXQnLCB7XG4gIHNvdXJjZXM6IFtzM0RlcGxveW1lbnQuU291cmNlLmRhdGEoJ2hlbGxvL3dvcmxkL2ZpbGUudHh0JywgJ1RoaXMgaXMgdGhlIGNvbnRlbnQgc3RvcmVkIGluIFMzJyldLFxuICBkZXN0aW5hdGlvbkJ1Y2tldDogYnVja2V0LFxuICByZXRhaW5PbkRlbGV0ZTogZmFsc2UsXG59KTtcbm5ldyBTb3VyY2VkQ29uZmlndXJhdGlvbihzdGFjaywgJ015Q29uZmlnRnJvbUJ1Y2tldCcsIHtcbiAgYXBwbGljYXRpb246IGFwcENvbmZpZ0FwcCxcbiAgbG9jYXRpb246IENvbmZpZ3VyYXRpb25Tb3VyY2UuZnJvbUJ1Y2tldChidWNrZXQsICdoZWxsby93b3JsZC9maWxlLnR4dCcpLFxuICBkZXNjcmlwdGlvbjogYFNvdXJjZWQgZnJvbSAke0ZuLnNlbGVjdCgwLCBkZXBsb3ltZW50Lm9iamVjdEtleXMpfWAsXG4gIGRlcGxveVRvOiBbYnVja2V0RW52XSxcbn0pO1xuXG4vLyBzZWNyZXRzIG1hbmFnZXIgYXMgY29uZmlndXJhdGlvbiBzb3VyY2UgKHdpdGhvdXQga2V5KVxuY29uc3Qgc2VjcmV0RW52ID0gYXBwQ29uZmlnQXBwLmFkZEVudmlyb25tZW50KCdTZWNyZXRFbnYnKTtcbmNvbnN0IHNlY3JldCA9IG5ldyBTZWNyZXQoc3RhY2ssICdNeVNlY3JldCcsIHtcbiAgc2VjcmV0U3RyaW5nVmFsdWU6IFNlY3JldFZhbHVlLnVuc2FmZVBsYWluVGV4dCgnVGhpcyBpcyB0aGUgY29udGVudCBzdG9yZWQgaW4gc2VjcmV0cyBtYW5hZ2VyJyksXG59KTtcbm5ldyBTb3VyY2VkQ29uZmlndXJhdGlvbihzdGFjaywgJ015Q29uZmlnRnJvbVNlY3JldCcsIHtcbiAgYXBwbGljYXRpb246IGFwcENvbmZpZ0FwcCxcbiAgbG9jYXRpb246IENvbmZpZ3VyYXRpb25Tb3VyY2UuZnJvbVNlY3JldChzZWNyZXQpLFxuICBkZXBsb3lUbzogW3NlY3JldEVudl0sXG59KTtcblxuLy8gc2VjcmV0cyBtYW5hZ2VyIGFzIGNvbmZpZ3VyYXRpb24gc291cmNlICh3aXRoIGtleSlcbmNvbnN0IHNlY3JldFdpdGhLZXlFbnYgPSBhcHBDb25maWdBcHAuYWRkRW52aXJvbm1lbnQoJ1NlY3JldEVudldpdGhLZXknKTtcbmNvbnN0IGtleSA9IG5ldyBLZXkoc3RhY2ssICdNeUtleScpO1xuY29uc3Qgc2VjcmV0V2l0aEtleSA9IG5ldyBTZWNyZXQoc3RhY2ssICdNeVNlY3JldFdpdGhLZXknLCB7XG4gIHNlY3JldFN0cmluZ1ZhbHVlOiBTZWNyZXRWYWx1ZS51bnNhZmVQbGFpblRleHQoJ1RoaXMgaXMgdGhlIGNvbnRlbnQgc3RvcmVkIGluIHNlY3JldHMgbWFuYWdlcicpLFxuICBlbmNyeXB0aW9uS2V5OiBrZXksXG59KTtcbm5ldyBTb3VyY2VkQ29uZmlndXJhdGlvbihzdGFjaywgJ015Q29uZmlnRnJvbVNlY3JldFdpdGhLZXknLCB7XG4gIGxvY2F0aW9uOiBDb25maWd1cmF0aW9uU291cmNlLmZyb21TZWNyZXQoc2VjcmV0V2l0aEtleSksXG4gIGRlcGxveW1lbnRLZXk6IGtleSxcbiAgYXBwbGljYXRpb246IGFwcENvbmZpZ0FwcCxcbiAgZGVwbG95VG86IFtzZWNyZXRXaXRoS2V5RW52XSxcbn0pO1xuXG4vLyBjb2RlIHBpcGVsaW5lIGFzIGNvbmZpZ3VyYXRpb24gc291cmNlXG5kZXBsb3ltZW50LmFkZFNvdXJjZShzM0RlcGxveW1lbnQuU291cmNlLmRhdGEoJ2hlbGxvL3dvcmxkL2NvZGVwaXBlbGluZS50eHQnLCAnVGhpcyBpcyB0aGUgY29udGVudCBzdG9yZWQgaW4gY29kZSBwaXBlbGluZScpKTtcbmNvbnN0IHNvdXJjZUFjdGlvbiA9IG5ldyBTM1NvdXJjZUFjdGlvbih7XG4gIGFjdGlvbk5hbWU6ICdTb3VyY2UnLFxuICBidWNrZXQ6IGJ1Y2tldCxcbiAgYnVja2V0S2V5OiAnaGVsbG8vd29ybGQvY29kZXBpcGVsaW5lLnR4dCcsXG4gIG91dHB1dDogbmV3IEFydGlmYWN0KCdTb3VyY2VPdXRwdXQnKSxcbn0pO1xuY29uc3QgZGVwbG95QWN0aW9uID0gbmV3IFMzRGVwbG95QWN0aW9uKHtcbiAgYWN0aW9uTmFtZTogJ0RlcGxveScsXG4gIGlucHV0OiBBcnRpZmFjdC5hcnRpZmFjdCgnU291cmNlT3V0cHV0JyksXG4gIGJ1Y2tldDogYnVja2V0LFxuICBleHRyYWN0OiB0cnVlLFxufSk7XG5jb25zdCBwaXBlbGluZSA9IG5ldyBQaXBlbGluZShzdGFjaywgJ015UGlwZWxpbmUnLCB7XG4gIGNyb3NzQWNjb3VudEtleXM6IHRydWUsXG4gIHN0YWdlczogW1xuICAgIHtcbiAgICAgIHN0YWdlTmFtZTogJ2JldGEnLFxuICAgICAgYWN0aW9uczogW3NvdXJjZUFjdGlvbl0sXG4gICAgfSxcbiAgICB7XG4gICAgICBzdGFnZU5hbWU6ICdwcm9kJyxcbiAgICAgIGFjdGlvbnM6IFtkZXBsb3lBY3Rpb25dLFxuICAgIH0sXG4gIF0sXG59KTtcbm5ldyBTb3VyY2VkQ29uZmlndXJhdGlvbihzdGFjaywgJ015Q29uZmlnRnJvbVBpcGVsaW5lJywge1xuICBhcHBsaWNhdGlvbjogYXBwQ29uZmlnQXBwLFxuICBsb2NhdGlvbjogQ29uZmlndXJhdGlvblNvdXJjZS5mcm9tUGlwZWxpbmUocGlwZWxpbmUpLFxufSk7XG5cbi8qIHJlc291cmNlIGRlcGxveW1lbnQgYWxvbmUgaXMgc3VmZmljaWVudCBiZWNhdXNlIHdlIGFscmVhZHkgaGF2ZSB0aGVcbiAgIGNvcnJlc3BvbmRpbmcgcmVzb3VyY2UgaGFuZGxlciB0ZXN0cyB0byBhc3NlcnQgdGhhdCByZXNvdXJjZXMgY2FuIGJlXG4gICB1c2VkIGFmdGVyIGNyZWF0ZWQgKi9cblxubmV3IEludGVnVGVzdChhcHAsICdhcHBjb25maWctY29uZmlndXJhdGlvbicsIHtcbiAgdGVzdENhc2VzOiBbc3RhY2tdLFxuICBjZGtDb21tYW5kT3B0aW9uczoge1xuICAgIGRlc3Ryb3k6IHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZm9yY2U6IHRydWUsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG59KTsiXX0=