"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const fs = require("fs-extra");
// eslint-disable-next-line @typescript-eslint/no-require-imports
const lerna_project = require('@lerna/project');
bringBackDependencies().catch(e => {
    // eslint-disable-next-line no-console
    console.error(e);
    process.exit(1);
});
async function bringBackDependencies() {
    const project = new lerna_project.Project();
    const separatePackages = project.getPackagesSync();
    const promises = new Array();
    for (const separatePkg of separatePackages) {
        promises.push(fs.rename(path.join(separatePkg.location, '_package.json'), separatePkg.manifestLocation));
    }
    return Promise.all(promises);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdG9yZS1wYWNrYWdlLWpzb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVzdG9yZS1wYWNrYWdlLWpzb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTZCO0FBQzdCLCtCQUErQjtBQUMvQixpRUFBaUU7QUFDakUsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFFaEQscUJBQXFCLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDaEMsc0NBQXNDO0lBQ3RDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQixDQUFDLENBQUMsQ0FBQztBQUVILEtBQUssVUFBVSxxQkFBcUI7SUFDbEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUMsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDbkQsTUFBTSxRQUFRLEdBQUcsSUFBSSxLQUFLLEVBQWlCLENBQUM7SUFDNUMsS0FBSyxNQUFNLFdBQVcsSUFBSSxnQkFBZ0IsRUFBRTtRQUMxQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7S0FDMUc7SUFDRCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcy1leHRyYSc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0c1xuY29uc3QgbGVybmFfcHJvamVjdCA9IHJlcXVpcmUoJ0BsZXJuYS9wcm9qZWN0Jyk7XG5cbmJyaW5nQmFja0RlcGVuZGVuY2llcygpLmNhdGNoKGUgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICBjb25zb2xlLmVycm9yKGUpO1xuICBwcm9jZXNzLmV4aXQoMSk7XG59KTtcblxuYXN5bmMgZnVuY3Rpb24gYnJpbmdCYWNrRGVwZW5kZW5jaWVzKCk6IFByb21pc2U8dm9pZFtdPiB7XG4gIGNvbnN0IHByb2plY3QgPSBuZXcgbGVybmFfcHJvamVjdC5Qcm9qZWN0KCk7XG4gIGNvbnN0IHNlcGFyYXRlUGFja2FnZXMgPSBwcm9qZWN0LmdldFBhY2thZ2VzU3luYygpO1xuICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheTxQcm9taXNlPHZvaWQ+PigpO1xuICBmb3IgKGNvbnN0IHNlcGFyYXRlUGtnIG9mIHNlcGFyYXRlUGFja2FnZXMpIHtcbiAgICBwcm9taXNlcy5wdXNoKGZzLnJlbmFtZShwYXRoLmpvaW4oc2VwYXJhdGVQa2cubG9jYXRpb24sICdfcGFja2FnZS5qc29uJyksIHNlcGFyYXRlUGtnLm1hbmlmZXN0TG9jYXRpb24pKTtcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufVxuIl19